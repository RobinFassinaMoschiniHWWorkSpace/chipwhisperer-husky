   1              	 .cpu cortex-m3
   2              	 .eabi_attribute 20,1
   3              	 .eabi_attribute 21,1
   4              	 .eabi_attribute 23,3
   5              	 .eabi_attribute 24,1
   6              	 .eabi_attribute 25,1
   7              	 .eabi_attribute 26,1
   8              	 .eabi_attribute 30,6
   9              	 .eabi_attribute 34,1
  10              	 .eabi_attribute 18,4
  11              	 .file "udc.c"
  12              	 .text
  13              	.Ltext0:
  14              	 .cfi_sections .debug_frame
  15              	 .section .bss.cpu_irq_critical_section_counter,"aw",%nobits
  16              	 .align 2
  19              	cpu_irq_critical_section_counter:
  20 0000 00000000 	 .space 4
  21              	 .section .bss.cpu_irq_prev_interrupt_state,"aw",%nobits
  24              	cpu_irq_prev_interrupt_state:
  25 0000 00       	 .space 1
  26              	 .section .bss.udc_device_status,"aw",%nobits
  27              	 .align 1
  30              	udc_device_status:
  31 0000 0000     	 .space 2
  32              	 .section .bss.udc_num_configuration,"aw",%nobits
  35              	udc_num_configuration:
  36 0000 00       	 .space 1
  37              	 .section .bss.udc_ptr_conf,"aw",%nobits
  38              	 .align 2
  41              	udc_ptr_conf:
  42 0000 00000000 	 .space 4
  43              	 .section .bss.udc_ptr_iface,"aw",%nobits
  44              	 .align 2
  47              	udc_ptr_iface:
  48 0000 00000000 	 .space 4
  49              	 .section .data.udc_string_desc_languageid,"aw"
  50              	 .align 2
  53              	udc_string_desc_languageid:
  54 0000 04       	 .byte 4
  55 0001 03       	 .byte 3
  56 0002 0904     	 .short 1033
  57              	 .section .data.udc_string_manufacturer_name,"aw"
  58              	 .align 2
  61              	udc_string_manufacturer_name:
  62 0000 4E657741 	 .ascii "NewAE Technology Inc.\000"
  62      45205465 
  62      63686E6F 
  62      6C6F6779 
  62      20496E63 
  63              	 .section .data.udc_string_product_name,"aw"
  64              	 .align 2
  67              	udc_string_product_name:
  68 0000 43686970 	 .ascii "ChipWhisperer-Husky\000"
  68      57686973 
  68      70657265 
  68      722D4875 
  68      736B7900 
  69              	 .section .text.udc_get_string_serial_name,"ax",%progbits
  70              	 .align 1
  71              	 .arch armv7-m
  72              	 .syntax unified
  73              	 .thumb
  74              	 .thumb_func
  75              	 .fpu softvfp
  77              	udc_get_string_serial_name:
  78              	.LFB73:
  79              	 .file 1 ".././hal/sam3u1c/udc.c"
   1:.././hal/sam3u1c/udc.c **** /**
   2:.././hal/sam3u1c/udc.c ****  * \file
   3:.././hal/sam3u1c/udc.c ****  *
   4:.././hal/sam3u1c/udc.c ****  * \brief USB Device Controller (UDC)
   5:.././hal/sam3u1c/udc.c ****  *
   6:.././hal/sam3u1c/udc.c ****  * Copyright (c) 2009 - 2014 Atmel Corporation. All rights reserved.
   7:.././hal/sam3u1c/udc.c ****  *
   8:.././hal/sam3u1c/udc.c ****  * \asf_license_start
   9:.././hal/sam3u1c/udc.c ****  *
  10:.././hal/sam3u1c/udc.c ****  * \page License
  11:.././hal/sam3u1c/udc.c ****  *
  12:.././hal/sam3u1c/udc.c ****  * Redistribution and use in source and binary forms, with or without
  13:.././hal/sam3u1c/udc.c ****  * modification, are permitted provided that the following conditions are met:
  14:.././hal/sam3u1c/udc.c ****  *
  15:.././hal/sam3u1c/udc.c ****  * 1. Redistributions of source code must retain the above copyright notice,
  16:.././hal/sam3u1c/udc.c ****  *    this list of conditions and the following disclaimer.
  17:.././hal/sam3u1c/udc.c ****  *
  18:.././hal/sam3u1c/udc.c ****  * 2. Redistributions in binary form must reproduce the above copyright notice,
  19:.././hal/sam3u1c/udc.c ****  *    this list of conditions and the following disclaimer in the documentation
  20:.././hal/sam3u1c/udc.c ****  *    and/or other materials provided with the distribution.
  21:.././hal/sam3u1c/udc.c ****  *
  22:.././hal/sam3u1c/udc.c ****  * 3. The name of Atmel may not be used to endorse or promote products derived
  23:.././hal/sam3u1c/udc.c ****  *    from this software without specific prior written permission.
  24:.././hal/sam3u1c/udc.c ****  *
  25:.././hal/sam3u1c/udc.c ****  * 4. This software may only be redistributed and used in connection with an
  26:.././hal/sam3u1c/udc.c ****  *    Atmel microcontroller product.
  27:.././hal/sam3u1c/udc.c ****  *
  28:.././hal/sam3u1c/udc.c ****  * THIS SOFTWARE IS PROVIDED BY ATMEL "AS IS" AND ANY EXPRESS OR IMPLIED
  29:.././hal/sam3u1c/udc.c ****  * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
  30:.././hal/sam3u1c/udc.c ****  * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT ARE
  31:.././hal/sam3u1c/udc.c ****  * EXPRESSLY AND SPECIFICALLY DISCLAIMED. IN NO EVENT SHALL ATMEL BE LIABLE FOR
  32:.././hal/sam3u1c/udc.c ****  * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
  33:.././hal/sam3u1c/udc.c ****  * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
  34:.././hal/sam3u1c/udc.c ****  * OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
  35:.././hal/sam3u1c/udc.c ****  * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT,
  36:.././hal/sam3u1c/udc.c ****  * STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN
  37:.././hal/sam3u1c/udc.c ****  * ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
  38:.././hal/sam3u1c/udc.c ****  * POSSIBILITY OF SUCH DAMAGE.
  39:.././hal/sam3u1c/udc.c ****  *
  40:.././hal/sam3u1c/udc.c ****  * \asf_license_stop
  41:.././hal/sam3u1c/udc.c ****  *
  42:.././hal/sam3u1c/udc.c ****  */
  43:.././hal/sam3u1c/udc.c **** 
  44:.././hal/sam3u1c/udc.c **** #include "conf_usb.h"
  45:.././hal/sam3u1c/udc.c **** #include "usb_protocol.h"
  46:.././hal/sam3u1c/udc.c **** #include "udd.h"
  47:.././hal/sam3u1c/udc.c **** #include "udc_desc.h"
  48:.././hal/sam3u1c/udc.c **** #include "udi.h"
  49:.././hal/sam3u1c/udc.c **** #include "udc.h"
  50:.././hal/sam3u1c/udc.c **** 
  51:.././hal/sam3u1c/udc.c **** #define WINUSB_PLATFORM_DESCRIPTOR_LENGTH 0x9E
  52:.././hal/sam3u1c/udc.c **** /**
  53:.././hal/sam3u1c/udc.c ****  * \ingroup udc_group
  54:.././hal/sam3u1c/udc.c ****  * \defgroup udc_group_interne Implementation of UDC
  55:.././hal/sam3u1c/udc.c ****  *
  56:.././hal/sam3u1c/udc.c ****  * Internal implementation
  57:.././hal/sam3u1c/udc.c ****  * @{
  58:.././hal/sam3u1c/udc.c ****  */
  59:.././hal/sam3u1c/udc.c **** 
  60:.././hal/sam3u1c/udc.c **** //! \name Internal variables to manage the USB device
  61:.././hal/sam3u1c/udc.c **** //! @{
  62:.././hal/sam3u1c/udc.c **** 
  63:.././hal/sam3u1c/udc.c **** //! Device status state (see enum usb_device_status in usb_protocol.h)
  64:.././hal/sam3u1c/udc.c **** static le16_t udc_device_status;
  65:.././hal/sam3u1c/udc.c **** 
  66:.././hal/sam3u1c/udc.c **** //! Device Configuration number selected by the USB host
  67:.././hal/sam3u1c/udc.c **** static uint8_t udc_num_configuration = 0;
  68:.././hal/sam3u1c/udc.c **** 
  69:.././hal/sam3u1c/udc.c **** //! Pointer on the selected speed device configuration
  70:.././hal/sam3u1c/udc.c **** static udc_config_speed_t UDC_DESC_STORAGE *udc_ptr_conf;
  71:.././hal/sam3u1c/udc.c **** 
  72:.././hal/sam3u1c/udc.c **** //! Pointer on interface descriptor used by SETUP request.
  73:.././hal/sam3u1c/udc.c **** static usb_iface_desc_t UDC_DESC_STORAGE *udc_ptr_iface;
  74:.././hal/sam3u1c/udc.c **** 
  75:.././hal/sam3u1c/udc.c **** //! @}
  76:.././hal/sam3u1c/udc.c **** 
  77:.././hal/sam3u1c/udc.c **** 
  78:.././hal/sam3u1c/udc.c **** //! \name Internal structure to store the USB device main strings
  79:.././hal/sam3u1c/udc.c **** //! @{
  80:.././hal/sam3u1c/udc.c **** 
  81:.././hal/sam3u1c/udc.c **** /**
  82:.././hal/sam3u1c/udc.c ****  * \brief Language ID of USB device (US ID by default)
  83:.././hal/sam3u1c/udc.c ****  */
  84:.././hal/sam3u1c/udc.c **** COMPILER_WORD_ALIGNED
  85:.././hal/sam3u1c/udc.c **** static UDC_DESC_STORAGE usb_str_lgid_desc_t udc_string_desc_languageid = {
  86:.././hal/sam3u1c/udc.c **** 	.desc.bLength = sizeof(usb_str_lgid_desc_t),
  87:.././hal/sam3u1c/udc.c **** 	.desc.bDescriptorType = USB_DT_STRING,
  88:.././hal/sam3u1c/udc.c **** 	.string = {LE16(USB_LANGID_EN_US)}
  89:.././hal/sam3u1c/udc.c **** };
  90:.././hal/sam3u1c/udc.c **** 
  91:.././hal/sam3u1c/udc.c **** /**
  92:.././hal/sam3u1c/udc.c ****  * \brief USB device manufacture name storage
  93:.././hal/sam3u1c/udc.c ****  * String is allocated only if USB_DEVICE_MANUFACTURE_NAME is declared
  94:.././hal/sam3u1c/udc.c ****  * by usb application configuration
  95:.././hal/sam3u1c/udc.c ****  */
  96:.././hal/sam3u1c/udc.c **** #ifdef USB_DEVICE_MANUFACTURE_NAME
  97:.././hal/sam3u1c/udc.c **** static uint8_t udc_string_manufacturer_name[] = USB_DEVICE_MANUFACTURE_NAME;
  98:.././hal/sam3u1c/udc.c **** #  define USB_DEVICE_MANUFACTURE_NAME_SIZE  \
  99:.././hal/sam3u1c/udc.c **** 	(sizeof(udc_string_manufacturer_name)-1)
 100:.././hal/sam3u1c/udc.c **** #else
 101:.././hal/sam3u1c/udc.c **** #  define USB_DEVICE_MANUFACTURE_NAME_SIZE  0
 102:.././hal/sam3u1c/udc.c **** #endif
 103:.././hal/sam3u1c/udc.c **** 
 104:.././hal/sam3u1c/udc.c **** /**
 105:.././hal/sam3u1c/udc.c ****  * \brief USB device product name storage
 106:.././hal/sam3u1c/udc.c ****  * String is allocated only if USB_DEVICE_PRODUCT_NAME is declared
 107:.././hal/sam3u1c/udc.c ****  * by usb application configuration
 108:.././hal/sam3u1c/udc.c ****  */
 109:.././hal/sam3u1c/udc.c **** #ifdef USB_DEVICE_PRODUCT_NAME
 110:.././hal/sam3u1c/udc.c **** static uint8_t udc_string_product_name[] = USB_DEVICE_PRODUCT_NAME;
 111:.././hal/sam3u1c/udc.c **** #  define USB_DEVICE_PRODUCT_NAME_SIZE  (sizeof(udc_string_product_name)-1)
 112:.././hal/sam3u1c/udc.c **** #else
 113:.././hal/sam3u1c/udc.c **** #  define USB_DEVICE_PRODUCT_NAME_SIZE  0
 114:.././hal/sam3u1c/udc.c **** #endif
 115:.././hal/sam3u1c/udc.c **** 
 116:.././hal/sam3u1c/udc.c **** /**
 117:.././hal/sam3u1c/udc.c ****  * \brief Get USB device serial number
 118:.././hal/sam3u1c/udc.c ****  *
 119:.././hal/sam3u1c/udc.c ****  * Use the define USB_DEVICE_SERIAL_NAME to set static serial number.
 120:.././hal/sam3u1c/udc.c ****  *
 121:.././hal/sam3u1c/udc.c ****  * For dynamic serial number set the define USB_DEVICE_GET_SERIAL_NAME_POINTER
 122:.././hal/sam3u1c/udc.c ****  * to a suitable pointer. This will also require the serial number length
 123:.././hal/sam3u1c/udc.c ****  * define USB_DEVICE_GET_SERIAL_NAME_LENGTH.
 124:.././hal/sam3u1c/udc.c ****  */
 125:.././hal/sam3u1c/udc.c **** #if defined USB_DEVICE_GET_SERIAL_NAME_POINTER
 126:.././hal/sam3u1c/udc.c **** 	static const uint8_t *udc_get_string_serial_name(void)
 127:.././hal/sam3u1c/udc.c **** 	{
  80              	 .loc 1 127 2
  81              	 .cfi_startproc
  82              	 
  83              	 
  84              	 
  85 0000 80B4     	 push {r7}
  86              	.LCFI0:
  87              	 .cfi_def_cfa_offset 4
  88              	 .cfi_offset 7,-4
  89 0002 00AF     	 add r7,sp,#0
  90              	.LCFI1:
  91              	 .cfi_def_cfa_register 7
 128:.././hal/sam3u1c/udc.c **** 		return (const uint8_t *)USB_DEVICE_GET_SERIAL_NAME_POINTER;
  92              	 .loc 1 128 10
  93 0004 024B     	 ldr r3,.L3
 129:.././hal/sam3u1c/udc.c **** 	}
  94              	 .loc 1 129 2
  95 0006 1846     	 mov r0,r3
  96 0008 BD46     	 mov sp,r7
  97              	.LCFI2:
  98              	 .cfi_def_cfa_register 13
  99              	 
 100 000a 80BC     	 pop {r7}
 101              	.LCFI3:
 102              	 .cfi_restore 7
 103              	 .cfi_def_cfa_offset 0
 104 000c 7047     	 bx lr
 105              	.L4:
 106 000e 00BF     	 .align 2
 107              	.L3:
 108 0010 00000000 	 .word usb_serial_number
 109              	 .cfi_endproc
 110              	.LFE73:
 112              	 .section .data.udc_string_desc,"aw"
 113              	 .align 2
 116              	udc_string_desc:
 117 0000 00       	 .space 1
 118 0001 03       	 .byte 3
 119 0002 00000000 	 .space 64
 119      00000000 
 119      00000000 
 119      00000000 
 119      00000000 
 120              	 .section .text.udc_get_interface_desc,"ax",%progbits
 121              	 .align 1
 122              	 .global udc_get_interface_desc
 123              	 .syntax unified
 124              	 .thumb
 125              	 .thumb_func
 126              	 .fpu softvfp
 128              	udc_get_interface_desc:
 129              	.LFB74:
 130:.././hal/sam3u1c/udc.c **** #  define USB_DEVICE_SERIAL_NAME_SIZE \
 131:.././hal/sam3u1c/udc.c **** 	USB_DEVICE_GET_SERIAL_NAME_LENGTH
 132:.././hal/sam3u1c/udc.c **** #elif defined USB_DEVICE_SERIAL_NAME
 133:.././hal/sam3u1c/udc.c **** 	static const uint8_t *udc_get_string_serial_name(void)
 134:.././hal/sam3u1c/udc.c **** 	{
 135:.././hal/sam3u1c/udc.c **** 		return (const uint8_t *)USB_DEVICE_SERIAL_NAME;
 136:.././hal/sam3u1c/udc.c **** 	}
 137:.././hal/sam3u1c/udc.c **** #  define USB_DEVICE_SERIAL_NAME_SIZE \
 138:.././hal/sam3u1c/udc.c **** 	(sizeof(USB_DEVICE_SERIAL_NAME)-1)
 139:.././hal/sam3u1c/udc.c **** #else
 140:.././hal/sam3u1c/udc.c **** #  define USB_DEVICE_SERIAL_NAME_SIZE  0
 141:.././hal/sam3u1c/udc.c **** #endif
 142:.././hal/sam3u1c/udc.c **** 
 143:.././hal/sam3u1c/udc.c **** /**
 144:.././hal/sam3u1c/udc.c ****  * \brief USB device string descriptor
 145:.././hal/sam3u1c/udc.c ****  * Structure used to transfer ASCII strings to USB String descriptor structure.
 146:.././hal/sam3u1c/udc.c ****  */
 147:.././hal/sam3u1c/udc.c **** struct udc_string_desc_t {
 148:.././hal/sam3u1c/udc.c **** 	usb_str_desc_t header;
 149:.././hal/sam3u1c/udc.c **** 	le16_t string[Max(Max(USB_DEVICE_MANUFACTURE_NAME_SIZE, \
 150:.././hal/sam3u1c/udc.c **** 			USB_DEVICE_PRODUCT_NAME_SIZE), USB_DEVICE_SERIAL_NAME_SIZE)];
 151:.././hal/sam3u1c/udc.c **** };
 152:.././hal/sam3u1c/udc.c **** COMPILER_WORD_ALIGNED
 153:.././hal/sam3u1c/udc.c **** static UDC_DESC_STORAGE struct udc_string_desc_t udc_string_desc = {
 154:.././hal/sam3u1c/udc.c **** 	.header.bDescriptorType = USB_DT_STRING
 155:.././hal/sam3u1c/udc.c **** };
 156:.././hal/sam3u1c/udc.c **** //! @}
 157:.././hal/sam3u1c/udc.c **** 
 158:.././hal/sam3u1c/udc.c **** usb_iface_desc_t UDC_DESC_STORAGE *udc_get_interface_desc(void)
 159:.././hal/sam3u1c/udc.c **** {
 130              	 .loc 1 159 1
 131              	 .cfi_startproc
 132              	 
 133              	 
 134              	 
 135 0000 80B4     	 push {r7}
 136              	.LCFI4:
 137              	 .cfi_def_cfa_offset 4
 138              	 .cfi_offset 7,-4
 139 0002 00AF     	 add r7,sp,#0
 140              	.LCFI5:
 141              	 .cfi_def_cfa_register 7
 160:.././hal/sam3u1c/udc.c **** 	return udc_ptr_iface;
 142              	 .loc 1 160 9
 143 0004 024B     	 ldr r3,.L7
 144 0006 1B68     	 ldr r3,[r3]
 161:.././hal/sam3u1c/udc.c **** }
 145              	 .loc 1 161 1
 146 0008 1846     	 mov r0,r3
 147 000a BD46     	 mov sp,r7
 148              	.LCFI6:
 149              	 .cfi_def_cfa_register 13
 150              	 
 151 000c 80BC     	 pop {r7}
 152              	.LCFI7:
 153              	 .cfi_restore 7
 154              	 .cfi_def_cfa_offset 0
 155 000e 7047     	 bx lr
 156              	.L8:
 157              	 .align 2
 158              	.L7:
 159 0010 00000000 	 .word udc_ptr_iface
 160              	 .cfi_endproc
 161              	.LFE74:
 163              	 .section .text.udc_get_eof_conf,"ax",%progbits
 164              	 .align 1
 165              	 .syntax unified
 166              	 .thumb
 167              	 .thumb_func
 168              	 .fpu softvfp
 170              	udc_get_eof_conf:
 171              	.LFB75:
 162:.././hal/sam3u1c/udc.c **** 
 163:.././hal/sam3u1c/udc.c **** /**
 164:.././hal/sam3u1c/udc.c ****  * \brief Returns a value to check the end of USB Configuration descriptor
 165:.././hal/sam3u1c/udc.c ****  *
 166:.././hal/sam3u1c/udc.c ****  * \return address after the last byte of USB Configuration descriptor
 167:.././hal/sam3u1c/udc.c ****  */
 168:.././hal/sam3u1c/udc.c **** static usb_conf_desc_t UDC_DESC_STORAGE *udc_get_eof_conf(void)
 169:.././hal/sam3u1c/udc.c **** {
 172              	 .loc 1 169 1
 173              	 .cfi_startproc
 174              	 
 175              	 
 176              	 
 177 0000 80B4     	 push {r7}
 178              	.LCFI8:
 179              	 .cfi_def_cfa_offset 4
 180              	 .cfi_offset 7,-4
 181 0002 00AF     	 add r7,sp,#0
 182              	.LCFI9:
 183              	 .cfi_def_cfa_register 7
 170:.././hal/sam3u1c/udc.c **** 	return (UDC_DESC_STORAGE usb_conf_desc_t *) ((uint8_t *)
 171:.././hal/sam3u1c/udc.c **** 			udc_ptr_conf->desc +
 184              	 .loc 1 171 16
 185 0004 064B     	 ldr r3,.L11
 186 0006 1B68     	 ldr r3,[r3]
 187 0008 1B68     	 ldr r3,[r3]
 172:.././hal/sam3u1c/udc.c **** 			le16_to_cpu(udc_ptr_conf->desc->wTotalLength));
 188              	 .loc 1 172 4
 189 000a 054A     	 ldr r2,.L11
 190 000c 1268     	 ldr r2,[r2]
 191 000e 1268     	 ldr r2,[r2]
 192 0010 5288     	 ldrh r2,[r2,#2]
 193 0012 92B2     	 uxth r2,r2
 170:.././hal/sam3u1c/udc.c **** 	return (UDC_DESC_STORAGE usb_conf_desc_t *) ((uint8_t *)
 194              	 .loc 1 170 9
 195 0014 1344     	 add r3,r3,r2
 173:.././hal/sam3u1c/udc.c **** }
 196              	 .loc 1 173 1
 197 0016 1846     	 mov r0,r3
 198 0018 BD46     	 mov sp,r7
 199              	.LCFI10:
 200              	 .cfi_def_cfa_register 13
 201              	 
 202 001a 80BC     	 pop {r7}
 203              	.LCFI11:
 204              	 .cfi_restore 7
 205              	 .cfi_def_cfa_offset 0
 206 001c 7047     	 bx lr
 207              	.L12:
 208 001e 00BF     	 .align 2
 209              	.L11:
 210 0020 00000000 	 .word udc_ptr_conf
 211              	 .cfi_endproc
 212              	.LFE75:
 214              	 .section .text.udc_next_desc_in_iface,"ax",%progbits
 215              	 .align 1
 216              	 .syntax unified
 217              	 .thumb
 218              	 .thumb_func
 219              	 .fpu softvfp
 221              	udc_next_desc_in_iface:
 222              	.LFB76:
 174:.././hal/sam3u1c/udc.c **** 
 175:.././hal/sam3u1c/udc.c **** #if (0!=USB_DEVICE_MAX_EP)
 176:.././hal/sam3u1c/udc.c **** /**
 177:.././hal/sam3u1c/udc.c ****  * \brief Search specific descriptor in global interface descriptor
 178:.././hal/sam3u1c/udc.c ****  *
 179:.././hal/sam3u1c/udc.c ****  * \param desc       Address of interface descriptor
 180:.././hal/sam3u1c/udc.c ****  *                   or previous specific descriptor found
 181:.././hal/sam3u1c/udc.c ****  * \param desc_id    Descriptor ID to search
 182:.././hal/sam3u1c/udc.c ****  *
 183:.././hal/sam3u1c/udc.c ****  * \return address of specific descriptor found
 184:.././hal/sam3u1c/udc.c ****  * \return NULL if it is the end of global interface descriptor
 185:.././hal/sam3u1c/udc.c ****  */
 186:.././hal/sam3u1c/udc.c **** static usb_conf_desc_t UDC_DESC_STORAGE *udc_next_desc_in_iface(usb_conf_desc_t
 187:.././hal/sam3u1c/udc.c **** 		UDC_DESC_STORAGE * desc, uint8_t desc_id)
 188:.././hal/sam3u1c/udc.c **** {
 223              	 .loc 1 188 1
 224              	 .cfi_startproc
 225              	 
 226              	 
 227 0000 80B5     	 push {r7,lr}
 228              	.LCFI12:
 229              	 .cfi_def_cfa_offset 8
 230              	 .cfi_offset 7,-8
 231              	 .cfi_offset 14,-4
 232 0002 84B0     	 sub sp,sp,#16
 233              	.LCFI13:
 234              	 .cfi_def_cfa_offset 24
 235 0004 00AF     	 add r7,sp,#0
 236              	.LCFI14:
 237              	 .cfi_def_cfa_register 7
 238 0006 7860     	 str r0,[r7,#4]
 239 0008 0B46     	 mov r3,r1
 240 000a FB70     	 strb r3,[r7,#3]
 189:.././hal/sam3u1c/udc.c **** 	usb_conf_desc_t UDC_DESC_STORAGE *ptr_eof_desc;
 190:.././hal/sam3u1c/udc.c **** 
 191:.././hal/sam3u1c/udc.c **** 	ptr_eof_desc = udc_get_eof_conf();
 241              	 .loc 1 191 17
 242 000c 124B     	 ldr r3,.L21
 243 000e 9847     	 blx r3
 244              	.LVL0:
 245 0010 F860     	 str r0,[r7,#12]
 192:.././hal/sam3u1c/udc.c **** 	// Go to next descriptor
 193:.././hal/sam3u1c/udc.c **** 	desc = (UDC_DESC_STORAGE usb_conf_desc_t *) ((uint8_t *) desc +
 194:.././hal/sam3u1c/udc.c **** 			desc->bLength);
 246              	 .loc 1 194 8
 247 0012 7B68     	 ldr r3,[r7,#4]
 248 0014 1B78     	 ldrb r3,[r3]
 249 0016 1A46     	 mov r2,r3
 193:.././hal/sam3u1c/udc.c **** 			desc->bLength);
 250              	 .loc 1 193 7
 251 0018 7B68     	 ldr r3,[r7,#4]
 252 001a 1344     	 add r3,r3,r2
 253 001c 7B60     	 str r3,[r7,#4]
 195:.././hal/sam3u1c/udc.c **** 	// Check the end of configuration descriptor
 196:.././hal/sam3u1c/udc.c **** 	while (ptr_eof_desc > desc) {
 254              	 .loc 1 196 8
 255 001e 10E0     	 b .L14
 256              	.L19:
 197:.././hal/sam3u1c/udc.c **** 		// If new interface descriptor is found,
 198:.././hal/sam3u1c/udc.c **** 		// then it is the end of the current global interface descriptor
 199:.././hal/sam3u1c/udc.c **** 		if (USB_DT_INTERFACE == desc->bDescriptorType) {
 257              	 .loc 1 199 31
 258 0020 7B68     	 ldr r3,[r7,#4]
 259 0022 5B78     	 ldrb r3,[r3,#1]
 260              	 .loc 1 199 6
 261 0024 042B     	 cmp r3,#4
 262 0026 11D0     	 beq .L20
 200:.././hal/sam3u1c/udc.c **** 			break; // End of global interface descriptor
 201:.././hal/sam3u1c/udc.c **** 		}
 202:.././hal/sam3u1c/udc.c **** 		if (desc_id == desc->bDescriptorType) {
 263              	 .loc 1 202 22
 264 0028 7B68     	 ldr r3,[r7,#4]
 265 002a 5B78     	 ldrb r3,[r3,#1]
 266              	 .loc 1 202 6
 267 002c FA78     	 ldrb r2,[r7,#3]
 268 002e 9A42     	 cmp r2,r3
 269 0030 01D1     	 bne .L17
 203:.././hal/sam3u1c/udc.c **** 			return desc; // Specific descriptor found
 270              	 .loc 1 203 11
 271 0032 7B68     	 ldr r3,[r7,#4]
 272 0034 0CE0     	 b .L18
 273              	.L17:
 204:.././hal/sam3u1c/udc.c **** 		}
 205:.././hal/sam3u1c/udc.c **** 		// Go to next descriptor
 206:.././hal/sam3u1c/udc.c **** 		desc = (UDC_DESC_STORAGE usb_conf_desc_t *) ((uint8_t *) desc +
 207:.././hal/sam3u1c/udc.c **** 				desc->bLength);
 274              	 .loc 1 207 9
 275 0036 7B68     	 ldr r3,[r7,#4]
 276 0038 1B78     	 ldrb r3,[r3]
 277 003a 1A46     	 mov r2,r3
 206:.././hal/sam3u1c/udc.c **** 				desc->bLength);
 278              	 .loc 1 206 8
 279 003c 7B68     	 ldr r3,[r7,#4]
 280 003e 1344     	 add r3,r3,r2
 281 0040 7B60     	 str r3,[r7,#4]
 282              	.L14:
 196:.././hal/sam3u1c/udc.c **** 		// If new interface descriptor is found,
 283              	 .loc 1 196 8
 284 0042 FA68     	 ldr r2,[r7,#12]
 285 0044 7B68     	 ldr r3,[r7,#4]
 286 0046 9A42     	 cmp r2,r3
 287 0048 EAD8     	 bhi .L19
 288 004a 00E0     	 b .L16
 289              	.L20:
 200:.././hal/sam3u1c/udc.c **** 		}
 290              	 .loc 1 200 4
 291 004c 00BF     	 nop
 292              	.L16:
 208:.././hal/sam3u1c/udc.c **** 	}
 209:.././hal/sam3u1c/udc.c **** 	return NULL; // No specific descriptor found
 293              	 .loc 1 209 9
 294 004e 0023     	 movs r3,#0
 295              	.L18:
 210:.././hal/sam3u1c/udc.c **** }
 296              	 .loc 1 210 1
 297 0050 1846     	 mov r0,r3
 298 0052 1037     	 adds r7,r7,#16
 299              	.LCFI15:
 300              	 .cfi_def_cfa_offset 8
 301 0054 BD46     	 mov sp,r7
 302              	.LCFI16:
 303              	 .cfi_def_cfa_register 13
 304              	 
 305 0056 80BD     	 pop {r7,pc}
 306              	.L22:
 307              	 .align 2
 308              	.L21:
 309 0058 00000000 	 .word udc_get_eof_conf
 310              	 .cfi_endproc
 311              	.LFE76:
 313              	 .section .text.udc_update_iface_desc,"ax",%progbits
 314              	 .align 1
 315              	 .syntax unified
 316              	 .thumb
 317              	 .thumb_func
 318              	 .fpu softvfp
 320              	udc_update_iface_desc:
 321              	.LFB77:
 211:.././hal/sam3u1c/udc.c **** #endif
 212:.././hal/sam3u1c/udc.c **** 
 213:.././hal/sam3u1c/udc.c **** /**
 214:.././hal/sam3u1c/udc.c ****  * \brief Search an interface descriptor
 215:.././hal/sam3u1c/udc.c ****  * This routine updates the internal pointer udc_ptr_iface.
 216:.././hal/sam3u1c/udc.c ****  *
 217:.././hal/sam3u1c/udc.c ****  * \param iface_num     Interface number to find in Configuration Descriptor
 218:.././hal/sam3u1c/udc.c ****  * \param setting_num   Setting number of interface to find
 219:.././hal/sam3u1c/udc.c ****  *
 220:.././hal/sam3u1c/udc.c ****  * \return 1 if found or 0 if not found
 221:.././hal/sam3u1c/udc.c ****  */
 222:.././hal/sam3u1c/udc.c **** static bool udc_update_iface_desc(uint8_t iface_num, uint8_t setting_num)
 223:.././hal/sam3u1c/udc.c **** {
 322              	 .loc 1 223 1
 323              	 .cfi_startproc
 324              	 
 325              	 
 326 0000 80B5     	 push {r7,lr}
 327              	.LCFI17:
 328              	 .cfi_def_cfa_offset 8
 329              	 .cfi_offset 7,-8
 330              	 .cfi_offset 14,-4
 331 0002 84B0     	 sub sp,sp,#16
 332              	.LCFI18:
 333              	 .cfi_def_cfa_offset 24
 334 0004 00AF     	 add r7,sp,#0
 335              	.LCFI19:
 336              	 .cfi_def_cfa_register 7
 337 0006 0346     	 mov r3,r0
 338 0008 0A46     	 mov r2,r1
 339 000a FB71     	 strb r3,[r7,#7]
 340 000c 1346     	 mov r3,r2
 341 000e BB71     	 strb r3,[r7,#6]
 224:.././hal/sam3u1c/udc.c **** 	usb_conf_desc_t UDC_DESC_STORAGE *ptr_end_desc;
 225:.././hal/sam3u1c/udc.c **** 
 226:.././hal/sam3u1c/udc.c **** 	if (0 == udc_num_configuration) {
 342              	 .loc 1 226 8
 343 0010 1E4B     	 ldr r3,.L30
 344 0012 1B78     	 ldrb r3,[r3]
 345              	 .loc 1 226 5
 346 0014 002B     	 cmp r3,#0
 347 0016 01D1     	 bne .L24
 227:.././hal/sam3u1c/udc.c **** 		return false;
 348              	 .loc 1 227 10
 349 0018 0023     	 movs r3,#0
 350 001a 32E0     	 b .L25
 351              	.L24:
 228:.././hal/sam3u1c/udc.c **** 	}
 229:.././hal/sam3u1c/udc.c **** 
 230:.././hal/sam3u1c/udc.c **** 	if (iface_num >= udc_ptr_conf->desc->bNumInterfaces) {
 352              	 .loc 1 230 31
 353 001c 1C4B     	 ldr r3,.L30+4
 354 001e 1B68     	 ldr r3,[r3]
 355 0020 1B68     	 ldr r3,[r3]
 356              	 .loc 1 230 37
 357 0022 1B79     	 ldrb r3,[r3,#4]
 358              	 .loc 1 230 5
 359 0024 FA79     	 ldrb r2,[r7,#7]
 360 0026 9A42     	 cmp r2,r3
 361 0028 01D3     	 bcc .L26
 231:.././hal/sam3u1c/udc.c **** 		return false;
 362              	 .loc 1 231 10
 363 002a 0023     	 movs r3,#0
 364 002c 29E0     	 b .L25
 365              	.L26:
 232:.././hal/sam3u1c/udc.c **** 	}
 233:.././hal/sam3u1c/udc.c **** 
 234:.././hal/sam3u1c/udc.c **** 	// Start at the beginning of configuration descriptor
 235:.././hal/sam3u1c/udc.c **** 	udc_ptr_iface = (UDC_DESC_STORAGE usb_iface_desc_t *)
 236:.././hal/sam3u1c/udc.c **** 			udc_ptr_conf->desc;
 366              	 .loc 1 236 16
 367 002e 184B     	 ldr r3,.L30+4
 368 0030 1B68     	 ldr r3,[r3]
 369 0032 1B68     	 ldr r3,[r3]
 235:.././hal/sam3u1c/udc.c **** 			udc_ptr_conf->desc;
 370              	 .loc 1 235 16
 371 0034 174A     	 ldr r2,.L30+8
 372 0036 1360     	 str r3,[r2]
 237:.././hal/sam3u1c/udc.c **** 
 238:.././hal/sam3u1c/udc.c **** 	// Check the end of configuration descriptor
 239:.././hal/sam3u1c/udc.c **** 	ptr_end_desc = udc_get_eof_conf();
 373              	 .loc 1 239 17
 374 0038 174B     	 ldr r3,.L30+12
 375 003a 9847     	 blx r3
 376              	.LVL1:
 377 003c F860     	 str r0,[r7,#12]
 240:.././hal/sam3u1c/udc.c **** 	while (ptr_end_desc >
 378              	 .loc 1 240 8
 379 003e 1AE0     	 b .L27
 380              	.L29:
 241:.././hal/sam3u1c/udc.c **** 			(UDC_DESC_STORAGE usb_conf_desc_t *) udc_ptr_iface) {
 242:.././hal/sam3u1c/udc.c **** 		if (USB_DT_INTERFACE == udc_ptr_iface->bDescriptorType) {
 381              	 .loc 1 242 40
 382 0040 144B     	 ldr r3,.L30+8
 383 0042 1B68     	 ldr r3,[r3]
 384 0044 5B78     	 ldrb r3,[r3,#1]
 385              	 .loc 1 242 6
 386 0046 042B     	 cmp r3,#4
 387 0048 0DD1     	 bne .L28
 243:.././hal/sam3u1c/udc.c **** 			// A interface descriptor is found
 244:.././hal/sam3u1c/udc.c **** 			// Check interface and alternate setting number
 245:.././hal/sam3u1c/udc.c **** 			if ((iface_num == udc_ptr_iface->bInterfaceNumber) &&
 388              	 .loc 1 245 35
 389 004a 124B     	 ldr r3,.L30+8
 390 004c 1B68     	 ldr r3,[r3]
 391 004e 9B78     	 ldrb r3,[r3,#2]
 392              	 .loc 1 245 7
 393 0050 FA79     	 ldrb r2,[r7,#7]
 394 0052 9A42     	 cmp r2,r3
 395 0054 07D1     	 bne .L28
 246:.././hal/sam3u1c/udc.c **** 					(setting_num ==
 247:.././hal/sam3u1c/udc.c **** 					udc_ptr_iface->bAlternateSetting)) {
 396              	 .loc 1 247 19 discriminator 1
 397 0056 0F4B     	 ldr r3,.L30+8
 398 0058 1B68     	 ldr r3,[r3]
 399 005a DB78     	 ldrb r3,[r3,#3]
 245:.././hal/sam3u1c/udc.c **** 					(setting_num ==
 400              	 .loc 1 245 55 discriminator 1
 401 005c BA79     	 ldrb r2,[r7,#6]
 402 005e 9A42     	 cmp r2,r3
 403 0060 01D1     	 bne .L28
 248:.././hal/sam3u1c/udc.c **** 				return true; // Interface found
 404              	 .loc 1 248 12
 405 0062 0123     	 movs r3,#1
 406 0064 0DE0     	 b .L25
 407              	.L28:
 249:.././hal/sam3u1c/udc.c **** 			}
 250:.././hal/sam3u1c/udc.c **** 		}
 251:.././hal/sam3u1c/udc.c **** 		// Go to next descriptor
 252:.././hal/sam3u1c/udc.c **** 		udc_ptr_iface = (UDC_DESC_STORAGE usb_iface_desc_t *) (
 408              	 .loc 1 252 19
 409 0066 0B4B     	 ldr r3,.L30+8
 410 0068 1B68     	 ldr r3,[r3]
 253:.././hal/sam3u1c/udc.c **** 				(uint8_t *) udc_ptr_iface +
 254:.././hal/sam3u1c/udc.c **** 				udc_ptr_iface->bLength);
 411              	 .loc 1 254 18
 412 006a 0A4A     	 ldr r2,.L30+8
 413 006c 1268     	 ldr r2,[r2]
 414 006e 1278     	 ldrb r2,[r2]
 252:.././hal/sam3u1c/udc.c **** 				(uint8_t *) udc_ptr_iface +
 415              	 .loc 1 252 19
 416 0070 1344     	 add r3,r3,r2
 252:.././hal/sam3u1c/udc.c **** 				(uint8_t *) udc_ptr_iface +
 417              	 .loc 1 252 17
 418 0072 084A     	 ldr r2,.L30+8
 419 0074 1360     	 str r3,[r2]
 420              	.L27:
 241:.././hal/sam3u1c/udc.c **** 		if (USB_DT_INTERFACE == udc_ptr_iface->bDescriptorType) {
 421              	 .loc 1 241 4
 422 0076 074B     	 ldr r3,.L30+8
 423 0078 1B68     	 ldr r3,[r3]
 240:.././hal/sam3u1c/udc.c **** 			(UDC_DESC_STORAGE usb_conf_desc_t *) udc_ptr_iface) {
 424              	 .loc 1 240 8
 425 007a FA68     	 ldr r2,[r7,#12]
 426 007c 9A42     	 cmp r2,r3
 427 007e DFD8     	 bhi .L29
 255:.././hal/sam3u1c/udc.c **** 	}
 256:.././hal/sam3u1c/udc.c **** 	return false; // Interface not found
 428              	 .loc 1 256 9
 429 0080 0023     	 movs r3,#0
 430              	.L25:
 257:.././hal/sam3u1c/udc.c **** }
 431              	 .loc 1 257 1
 432 0082 1846     	 mov r0,r3
 433 0084 1037     	 adds r7,r7,#16
 434              	.LCFI20:
 435              	 .cfi_def_cfa_offset 8
 436 0086 BD46     	 mov sp,r7
 437              	.LCFI21:
 438              	 .cfi_def_cfa_register 13
 439              	 
 440 0088 80BD     	 pop {r7,pc}
 441              	.L31:
 442 008a 00BF     	 .align 2
 443              	.L30:
 444 008c 00000000 	 .word udc_num_configuration
 445 0090 00000000 	 .word udc_ptr_conf
 446 0094 00000000 	 .word udc_ptr_iface
 447 0098 00000000 	 .word udc_get_eof_conf
 448              	 .cfi_endproc
 449              	.LFE77:
 451              	 .section .text.udc_iface_disable,"ax",%progbits
 452              	 .align 1
 453              	 .syntax unified
 454              	 .thumb
 455              	 .thumb_func
 456              	 .fpu softvfp
 458              	udc_iface_disable:
 459              	.LFB78:
 258:.././hal/sam3u1c/udc.c **** 
 259:.././hal/sam3u1c/udc.c **** /**
 260:.././hal/sam3u1c/udc.c ****  * \brief Disables an usb device interface (UDI)
 261:.././hal/sam3u1c/udc.c ****  * This routine call the UDI corresponding to interface number
 262:.././hal/sam3u1c/udc.c ****  *
 263:.././hal/sam3u1c/udc.c ****  * \param iface_num     Interface number to disable
 264:.././hal/sam3u1c/udc.c ****  *
 265:.././hal/sam3u1c/udc.c ****  * \return 1 if it is done or 0 if interface is not found
 266:.././hal/sam3u1c/udc.c ****  */
 267:.././hal/sam3u1c/udc.c **** static bool udc_iface_disable(uint8_t iface_num)
 268:.././hal/sam3u1c/udc.c **** {
 460              	 .loc 1 268 1
 461              	 .cfi_startproc
 462              	 
 463              	 
 464 0000 80B5     	 push {r7,lr}
 465              	.LCFI22:
 466              	 .cfi_def_cfa_offset 8
 467              	 .cfi_offset 7,-8
 468              	 .cfi_offset 14,-4
 469 0002 84B0     	 sub sp,sp,#16
 470              	.LCFI23:
 471              	 .cfi_def_cfa_offset 24
 472 0004 00AF     	 add r7,sp,#0
 473              	.LCFI24:
 474              	 .cfi_def_cfa_register 7
 475 0006 0346     	 mov r3,r0
 476 0008 FB71     	 strb r3,[r7,#7]
 269:.././hal/sam3u1c/udc.c **** 	udi_api_t UDC_DESC_STORAGE *udi_api;
 270:.././hal/sam3u1c/udc.c **** 
 271:.././hal/sam3u1c/udc.c **** 	// Select first alternate setting of the interface
 272:.././hal/sam3u1c/udc.c **** 	// to update udc_ptr_iface before call iface->getsetting()
 273:.././hal/sam3u1c/udc.c **** 	if (!udc_update_iface_desc(iface_num, 0)) {
 477              	 .loc 1 273 7
 478 000a FB79     	 ldrb r3,[r7,#7]
 479 000c 0021     	 movs r1,#0
 480 000e 1846     	 mov r0,r3
 481 0010 1E4B     	 ldr r3,.L41
 482 0012 9847     	 blx r3
 483              	.LVL2:
 484 0014 0346     	 mov r3,r0
 485              	 .loc 1 273 6
 486 0016 83F00103 	 eor r3,r3,#1
 487 001a DBB2     	 uxtb r3,r3
 488              	 .loc 1 273 5
 489 001c 002B     	 cmp r3,#0
 490 001e 01D0     	 beq .L33
 274:.././hal/sam3u1c/udc.c **** 		return false;
 491              	 .loc 1 274 10
 492 0020 0023     	 movs r3,#0
 493 0022 2FE0     	 b .L34
 494              	.L33:
 275:.././hal/sam3u1c/udc.c **** 	}
 276:.././hal/sam3u1c/udc.c **** 
 277:.././hal/sam3u1c/udc.c **** 	// Select the interface with the current alternate setting
 278:.././hal/sam3u1c/udc.c **** 	udi_api = udc_ptr_conf->udi_apis[iface_num];
 495              	 .loc 1 278 24
 496 0024 1A4B     	 ldr r3,.L41+4
 497 0026 1B68     	 ldr r3,[r3]
 498 0028 5A68     	 ldr r2,[r3,#4]
 499              	 .loc 1 278 34
 500 002a FB79     	 ldrb r3,[r7,#7]
 501 002c 9B00     	 lsls r3,r3,#2
 502 002e 1344     	 add r3,r3,r2
 503              	 .loc 1 278 10
 504 0030 1B68     	 ldr r3,[r3]
 505 0032 BB60     	 str r3,[r7,#8]
 279:.././hal/sam3u1c/udc.c **** 
 280:.././hal/sam3u1c/udc.c **** #if (0!=USB_DEVICE_MAX_EP)
 281:.././hal/sam3u1c/udc.c **** 	if (!udc_update_iface_desc(iface_num, udi_api->getsetting())) {
 506              	 .loc 1 281 47
 507 0034 BB68     	 ldr r3,[r7,#8]
 508 0036 DB68     	 ldr r3,[r3,#12]
 509              	 .loc 1 281 7
 510 0038 9847     	 blx r3
 511              	.LVL3:
 512 003a 0346     	 mov r3,r0
 513 003c 1A46     	 mov r2,r3
 514 003e FB79     	 ldrb r3,[r7,#7]
 515 0040 1146     	 mov r1,r2
 516 0042 1846     	 mov r0,r3
 517 0044 114B     	 ldr r3,.L41
 518 0046 9847     	 blx r3
 519              	.LVL4:
 520 0048 0346     	 mov r3,r0
 521              	 .loc 1 281 6
 522 004a 83F00103 	 eor r3,r3,#1
 523 004e DBB2     	 uxtb r3,r3
 524              	 .loc 1 281 5
 525 0050 002B     	 cmp r3,#0
 526 0052 01D0     	 beq .L35
 282:.././hal/sam3u1c/udc.c **** 		return false;
 527              	 .loc 1 282 10
 528 0054 0023     	 movs r3,#0
 529 0056 15E0     	 b .L34
 530              	.L35:
 531              	.LBB2:
 283:.././hal/sam3u1c/udc.c **** 	}
 284:.././hal/sam3u1c/udc.c **** 
 285:.././hal/sam3u1c/udc.c **** 	// Start at the beginning of interface descriptor
 286:.././hal/sam3u1c/udc.c **** 	{
 287:.././hal/sam3u1c/udc.c **** 		usb_ep_desc_t UDC_DESC_STORAGE *ep_desc;
 288:.././hal/sam3u1c/udc.c **** 		ep_desc = (UDC_DESC_STORAGE usb_ep_desc_t *) udc_ptr_iface;
 532              	 .loc 1 288 11
 533 0058 0E4B     	 ldr r3,.L41+8
 534 005a 1B68     	 ldr r3,[r3]
 535 005c FB60     	 str r3,[r7,#12]
 536              	.L38:
 289:.././hal/sam3u1c/udc.c **** 		while (1) {
 290:.././hal/sam3u1c/udc.c **** 			// Search Endpoint descriptor included in global interface descriptor
 291:.././hal/sam3u1c/udc.c **** 			ep_desc = (UDC_DESC_STORAGE usb_ep_desc_t *)
 292:.././hal/sam3u1c/udc.c **** 					udc_next_desc_in_iface((UDC_DESC_STORAGE
 537              	 .loc 1 292 6
 538 005e 0521     	 movs r1,#5
 539 0060 F868     	 ldr r0,[r7,#12]
 540 0062 0D4B     	 ldr r3,.L41+12
 541 0064 9847     	 blx r3
 542              	.LVL5:
 543 0066 F860     	 str r0,[r7,#12]
 293:.././hal/sam3u1c/udc.c **** 					usb_conf_desc_t *)
 294:.././hal/sam3u1c/udc.c **** 					ep_desc, USB_DT_ENDPOINT);
 295:.././hal/sam3u1c/udc.c **** 			if (NULL == ep_desc) {
 544              	 .loc 1 295 7
 545 0068 FB68     	 ldr r3,[r7,#12]
 546 006a 002B     	 cmp r3,#0
 547 006c 05D0     	 beq .L40
 296:.././hal/sam3u1c/udc.c **** 				break;
 297:.././hal/sam3u1c/udc.c **** 			}
 298:.././hal/sam3u1c/udc.c **** 			// Free the endpoint used by the interface
 299:.././hal/sam3u1c/udc.c **** 			udd_ep_free(ep_desc->bEndpointAddress);
 548              	 .loc 1 299 4
 549 006e FB68     	 ldr r3,[r7,#12]
 550 0070 9B78     	 ldrb r3,[r3,#2]
 551 0072 1846     	 mov r0,r3
 552 0074 094B     	 ldr r3,.L41+16
 553 0076 9847     	 blx r3
 554              	.LVL6:
 291:.././hal/sam3u1c/udc.c **** 					udc_next_desc_in_iface((UDC_DESC_STORAGE
 555              	 .loc 1 291 12
 556 0078 F1E7     	 b .L38
 557              	.L40:
 296:.././hal/sam3u1c/udc.c **** 				break;
 558              	 .loc 1 296 5
 559 007a 00BF     	 nop
 560              	.LBE2:
 300:.././hal/sam3u1c/udc.c **** 		}
 301:.././hal/sam3u1c/udc.c **** 	}
 302:.././hal/sam3u1c/udc.c **** #endif
 303:.././hal/sam3u1c/udc.c **** 
 304:.././hal/sam3u1c/udc.c **** 	// Disable interface
 305:.././hal/sam3u1c/udc.c **** 	udi_api->disable();
 561              	 .loc 1 305 9
 562 007c BB68     	 ldr r3,[r7,#8]
 563 007e 5B68     	 ldr r3,[r3,#4]
 564              	 .loc 1 305 2
 565 0080 9847     	 blx r3
 566              	.LVL7:
 306:.././hal/sam3u1c/udc.c **** 	return true;
 567              	 .loc 1 306 9
 568 0082 0123     	 movs r3,#1
 569              	.L34:
 307:.././hal/sam3u1c/udc.c **** }
 570              	 .loc 1 307 1
 571 0084 1846     	 mov r0,r3
 572 0086 1037     	 adds r7,r7,#16
 573              	.LCFI25:
 574              	 .cfi_def_cfa_offset 8
 575 0088 BD46     	 mov sp,r7
 576              	.LCFI26:
 577              	 .cfi_def_cfa_register 13
 578              	 
 579 008a 80BD     	 pop {r7,pc}
 580              	.L42:
 581              	 .align 2
 582              	.L41:
 583 008c 00000000 	 .word udc_update_iface_desc
 584 0090 00000000 	 .word udc_ptr_conf
 585 0094 00000000 	 .word udc_ptr_iface
 586 0098 00000000 	 .word udc_next_desc_in_iface
 587 009c 00000000 	 .word udd_ep_free
 588              	 .cfi_endproc
 589              	.LFE78:
 591              	 .section .text.udc_iface_enable,"ax",%progbits
 592              	 .align 1
 593              	 .syntax unified
 594              	 .thumb
 595              	 .thumb_func
 596              	 .fpu softvfp
 598              	udc_iface_enable:
 599              	.LFB79:
 308:.././hal/sam3u1c/udc.c **** 
 309:.././hal/sam3u1c/udc.c **** /**
 310:.././hal/sam3u1c/udc.c ****  * \brief Enables an usb device interface (UDI)
 311:.././hal/sam3u1c/udc.c ****  * This routine calls the UDI corresponding
 312:.././hal/sam3u1c/udc.c ****  * to the interface and setting number.
 313:.././hal/sam3u1c/udc.c ****  *
 314:.././hal/sam3u1c/udc.c ****  * \param iface_num     Interface number to enable
 315:.././hal/sam3u1c/udc.c ****  * \param setting_num   Setting number to enable
 316:.././hal/sam3u1c/udc.c ****  *
 317:.././hal/sam3u1c/udc.c ****  * \return 1 if it is done or 0 if interface is not found
 318:.././hal/sam3u1c/udc.c ****  */
 319:.././hal/sam3u1c/udc.c **** static bool udc_iface_enable(uint8_t iface_num, uint8_t setting_num)
 320:.././hal/sam3u1c/udc.c **** {
 600              	 .loc 1 320 1
 601              	 .cfi_startproc
 602              	 
 603              	 
 604 0000 80B5     	 push {r7,lr}
 605              	.LCFI27:
 606              	 .cfi_def_cfa_offset 8
 607              	 .cfi_offset 7,-8
 608              	 .cfi_offset 14,-4
 609 0002 84B0     	 sub sp,sp,#16
 610              	.LCFI28:
 611              	 .cfi_def_cfa_offset 24
 612 0004 00AF     	 add r7,sp,#0
 613              	.LCFI29:
 614              	 .cfi_def_cfa_register 7
 615 0006 0346     	 mov r3,r0
 616 0008 0A46     	 mov r2,r1
 617 000a FB71     	 strb r3,[r7,#7]
 618 000c 1346     	 mov r3,r2
 619 000e BB71     	 strb r3,[r7,#6]
 321:.././hal/sam3u1c/udc.c **** 	// Select the interface descriptor
 322:.././hal/sam3u1c/udc.c **** 	if (!udc_update_iface_desc(iface_num, setting_num)) {
 620              	 .loc 1 322 7
 621 0010 BA79     	 ldrb r2,[r7,#6]
 622 0012 FB79     	 ldrb r3,[r7,#7]
 623 0014 1146     	 mov r1,r2
 624 0016 1846     	 mov r0,r3
 625 0018 1A4B     	 ldr r3,.L52
 626 001a 9847     	 blx r3
 627              	.LVL8:
 628 001c 0346     	 mov r3,r0
 629              	 .loc 1 322 6
 630 001e 83F00103 	 eor r3,r3,#1
 631 0022 DBB2     	 uxtb r3,r3
 632              	 .loc 1 322 5
 633 0024 002B     	 cmp r3,#0
 634 0026 01D0     	 beq .L44
 323:.././hal/sam3u1c/udc.c **** 		return false;
 635              	 .loc 1 323 10
 636 0028 0023     	 movs r3,#0
 637 002a 27E0     	 b .L45
 638              	.L44:
 324:.././hal/sam3u1c/udc.c **** 	}
 325:.././hal/sam3u1c/udc.c **** 
 326:.././hal/sam3u1c/udc.c **** #if (0!=USB_DEVICE_MAX_EP)
 327:.././hal/sam3u1c/udc.c **** 	usb_ep_desc_t UDC_DESC_STORAGE *ep_desc;
 328:.././hal/sam3u1c/udc.c **** 
 329:.././hal/sam3u1c/udc.c **** 	// Start at the beginning of the global interface descriptor
 330:.././hal/sam3u1c/udc.c **** 	ep_desc = (UDC_DESC_STORAGE usb_ep_desc_t *) udc_ptr_iface;
 639              	 .loc 1 330 10
 640 002c 164B     	 ldr r3,.L52+4
 641 002e 1B68     	 ldr r3,[r3]
 642 0030 FB60     	 str r3,[r7,#12]
 643              	.L49:
 331:.././hal/sam3u1c/udc.c **** 	while (1) {
 332:.././hal/sam3u1c/udc.c **** 		// Search Endpoint descriptor included in the global interface descriptor
 333:.././hal/sam3u1c/udc.c **** 		ep_desc = (UDC_DESC_STORAGE usb_ep_desc_t *)
 334:.././hal/sam3u1c/udc.c **** 				udc_next_desc_in_iface((UDC_DESC_STORAGE
 644              	 .loc 1 334 5
 645 0032 0521     	 movs r1,#5
 646 0034 F868     	 ldr r0,[r7,#12]
 647 0036 154B     	 ldr r3,.L52+8
 648 0038 9847     	 blx r3
 649              	.LVL9:
 650 003a F860     	 str r0,[r7,#12]
 335:.././hal/sam3u1c/udc.c **** 						usb_conf_desc_t *) ep_desc,
 336:.././hal/sam3u1c/udc.c **** 				USB_DT_ENDPOINT);
 337:.././hal/sam3u1c/udc.c **** 		if (NULL == ep_desc)
 651              	 .loc 1 337 6
 652 003c FB68     	 ldr r3,[r7,#12]
 653 003e 002B     	 cmp r3,#0
 654 0040 11D0     	 beq .L51
 338:.././hal/sam3u1c/udc.c **** 			break;
 339:.././hal/sam3u1c/udc.c **** 		// Alloc the endpoint used by the interface
 340:.././hal/sam3u1c/udc.c **** 		if (!udd_ep_alloc(ep_desc->bEndpointAddress,
 655              	 .loc 1 340 8
 656 0042 FB68     	 ldr r3,[r7,#12]
 657 0044 9878     	 ldrb r0,[r3,#2]
 658 0046 FB68     	 ldr r3,[r7,#12]
 659 0048 D978     	 ldrb r1,[r3,#3]
 660 004a FB68     	 ldr r3,[r7,#12]
 661 004c 9B88     	 ldrh r3,[r3,#4]
 662 004e 9BB2     	 uxth r3,r3
 663 0050 1A46     	 mov r2,r3
 664 0052 0F4B     	 ldr r3,.L52+12
 665 0054 9847     	 blx r3
 666              	.LVL10:
 667 0056 0346     	 mov r3,r0
 668              	 .loc 1 340 7
 669 0058 83F00103 	 eor r3,r3,#1
 670 005c DBB2     	 uxtb r3,r3
 671              	 .loc 1 340 6
 672 005e 002B     	 cmp r3,#0
 673 0060 E7D0     	 beq .L49
 341:.././hal/sam3u1c/udc.c **** 				ep_desc->bmAttributes,
 342:.././hal/sam3u1c/udc.c **** 				le16_to_cpu
 343:.././hal/sam3u1c/udc.c **** 				(ep_desc->wMaxPacketSize))) {
 344:.././hal/sam3u1c/udc.c **** 			return false;
 674              	 .loc 1 344 11
 675 0062 0023     	 movs r3,#0
 676 0064 0AE0     	 b .L45
 677              	.L51:
 338:.././hal/sam3u1c/udc.c **** 			break;
 678              	 .loc 1 338 4
 679 0066 00BF     	 nop
 345:.././hal/sam3u1c/udc.c **** 		}
 346:.././hal/sam3u1c/udc.c **** 	}
 347:.././hal/sam3u1c/udc.c **** #endif
 348:.././hal/sam3u1c/udc.c **** 	// Enable the interface
 349:.././hal/sam3u1c/udc.c **** 	return udc_ptr_conf->udi_apis[iface_num]->enable();
 680              	 .loc 1 349 21
 681 0068 0A4B     	 ldr r3,.L52+16
 682 006a 1B68     	 ldr r3,[r3]
 683 006c 5A68     	 ldr r2,[r3,#4]
 684              	 .loc 1 349 31
 685 006e FB79     	 ldrb r3,[r7,#7]
 686 0070 9B00     	 lsls r3,r3,#2
 687 0072 1344     	 add r3,r3,r2
 688 0074 1B68     	 ldr r3,[r3]
 689              	 .loc 1 349 42
 690 0076 1B68     	 ldr r3,[r3]
 691              	 .loc 1 349 9
 692 0078 9847     	 blx r3
 693              	.LVL11:
 694 007a 0346     	 mov r3,r0
 695              	.L45:
 350:.././hal/sam3u1c/udc.c **** }
 696              	 .loc 1 350 1
 697 007c 1846     	 mov r0,r3
 698 007e 1037     	 adds r7,r7,#16
 699              	.LCFI30:
 700              	 .cfi_def_cfa_offset 8
 701 0080 BD46     	 mov sp,r7
 702              	.LCFI31:
 703              	 .cfi_def_cfa_register 13
 704              	 
 705 0082 80BD     	 pop {r7,pc}
 706              	.L53:
 707              	 .align 2
 708              	.L52:
 709 0084 00000000 	 .word udc_update_iface_desc
 710 0088 00000000 	 .word udc_ptr_iface
 711 008c 00000000 	 .word udc_next_desc_in_iface
 712 0090 00000000 	 .word udd_ep_alloc
 713 0094 00000000 	 .word udc_ptr_conf
 714              	 .cfi_endproc
 715              	.LFE79:
 717              	 .section .text.udc_start,"ax",%progbits
 718              	 .align 1
 719              	 .global udc_start
 720              	 .syntax unified
 721              	 .thumb
 722              	 .thumb_func
 723              	 .fpu softvfp
 725              	udc_start:
 726              	.LFB80:
 351:.././hal/sam3u1c/udc.c **** 
 352:.././hal/sam3u1c/udc.c **** /*! \brief Start the USB Device stack
 353:.././hal/sam3u1c/udc.c ****  */
 354:.././hal/sam3u1c/udc.c **** void udc_start(void)
 355:.././hal/sam3u1c/udc.c **** {
 727              	 .loc 1 355 1
 728              	 .cfi_startproc
 729              	 
 730              	 
 731 0000 80B5     	 push {r7,lr}
 732              	.LCFI32:
 733              	 .cfi_def_cfa_offset 8
 734              	 .cfi_offset 7,-8
 735              	 .cfi_offset 14,-4
 736 0002 00AF     	 add r7,sp,#0
 737              	.LCFI33:
 738              	 .cfi_def_cfa_register 7
 356:.././hal/sam3u1c/udc.c **** 	udd_enable();
 739              	 .loc 1 356 2
 740 0004 014B     	 ldr r3,.L55
 741 0006 9847     	 blx r3
 742              	.LVL12:
 357:.././hal/sam3u1c/udc.c **** }
 743              	 .loc 1 357 1
 744 0008 00BF     	 nop
 745 000a 80BD     	 pop {r7,pc}
 746              	.L56:
 747              	 .align 2
 748              	.L55:
 749 000c 00000000 	 .word udd_enable
 750              	 .cfi_endproc
 751              	.LFE80:
 753              	 .section .text.udc_stop,"ax",%progbits
 754              	 .align 1
 755              	 .global udc_stop
 756              	 .syntax unified
 757              	 .thumb
 758              	 .thumb_func
 759              	 .fpu softvfp
 761              	udc_stop:
 762              	.LFB81:
 358:.././hal/sam3u1c/udc.c **** 
 359:.././hal/sam3u1c/udc.c **** /*! \brief Stop the USB Device stack
 360:.././hal/sam3u1c/udc.c ****  */
 361:.././hal/sam3u1c/udc.c **** void udc_stop(void)
 362:.././hal/sam3u1c/udc.c **** {
 763              	 .loc 1 362 1
 764              	 .cfi_startproc
 765              	 
 766              	 
 767 0000 80B5     	 push {r7,lr}
 768              	.LCFI34:
 769              	 .cfi_def_cfa_offset 8
 770              	 .cfi_offset 7,-8
 771              	 .cfi_offset 14,-4
 772 0002 00AF     	 add r7,sp,#0
 773              	.LCFI35:
 774              	 .cfi_def_cfa_register 7
 363:.././hal/sam3u1c/udc.c **** 	udd_disable();
 775              	 .loc 1 363 2
 776 0004 024B     	 ldr r3,.L58
 777 0006 9847     	 blx r3
 778              	.LVL13:
 364:.././hal/sam3u1c/udc.c **** 	udc_reset();
 779              	 .loc 1 364 2
 780 0008 024B     	 ldr r3,.L58+4
 781 000a 9847     	 blx r3
 782              	.LVL14:
 365:.././hal/sam3u1c/udc.c **** }
 783              	 .loc 1 365 1
 784 000c 00BF     	 nop
 785 000e 80BD     	 pop {r7,pc}
 786              	.L59:
 787              	 .align 2
 788              	.L58:
 789 0010 00000000 	 .word udd_disable
 790 0014 00000000 	 .word udc_reset
 791              	 .cfi_endproc
 792              	.LFE81:
 794              	 .section .text.udc_reset,"ax",%progbits
 795              	 .align 1
 796              	 .global udc_reset
 797              	 .syntax unified
 798              	 .thumb
 799              	 .thumb_func
 800              	 .fpu softvfp
 802              	udc_reset:
 803              	.LFB82:
 366:.././hal/sam3u1c/udc.c **** 
 367:.././hal/sam3u1c/udc.c **** /**
 368:.././hal/sam3u1c/udc.c ****  * \brief Reset the current configuration of the USB device,
 369:.././hal/sam3u1c/udc.c ****  * This routines can be called by UDD when a RESET on the USB line occurs.
 370:.././hal/sam3u1c/udc.c ****  */
 371:.././hal/sam3u1c/udc.c **** void udc_reset(void)
 372:.././hal/sam3u1c/udc.c **** {
 804              	 .loc 1 372 1
 805              	 .cfi_startproc
 806              	 
 807              	 
 808 0000 80B5     	 push {r7,lr}
 809              	.LCFI36:
 810              	 .cfi_def_cfa_offset 8
 811              	 .cfi_offset 7,-8
 812              	 .cfi_offset 14,-4
 813 0002 82B0     	 sub sp,sp,#8
 814              	.LCFI37:
 815              	 .cfi_def_cfa_offset 16
 816 0004 00AF     	 add r7,sp,#0
 817              	.LCFI38:
 818              	 .cfi_def_cfa_register 7
 373:.././hal/sam3u1c/udc.c **** 	uint8_t iface_num;
 374:.././hal/sam3u1c/udc.c **** 
 375:.././hal/sam3u1c/udc.c **** 	if (udc_num_configuration) {
 819              	 .loc 1 375 6
 820 0006 0F4B     	 ldr r3,.L64
 821 0008 1B78     	 ldrb r3,[r3]
 822              	 .loc 1 375 5
 823 000a 002B     	 cmp r3,#0
 824 000c 10D0     	 beq .L61
 376:.././hal/sam3u1c/udc.c **** 		for (iface_num = 0;
 825              	 .loc 1 376 18
 826 000e 0023     	 movs r3,#0
 827 0010 FB71     	 strb r3,[r7,#7]
 828              	 .loc 1 376 3
 829 0012 06E0     	 b .L62
 830              	.L63:
 377:.././hal/sam3u1c/udc.c **** 				iface_num < udc_ptr_conf->desc->bNumInterfaces;
 378:.././hal/sam3u1c/udc.c **** 				iface_num++) {
 379:.././hal/sam3u1c/udc.c **** 			udc_iface_disable(iface_num);
 831              	 .loc 1 379 4
 832 0014 FB79     	 ldrb r3,[r7,#7]
 833 0016 1846     	 mov r0,r3
 834 0018 0B4B     	 ldr r3,.L64+4
 835 001a 9847     	 blx r3
 836              	.LVL15:
 378:.././hal/sam3u1c/udc.c **** 			udc_iface_disable(iface_num);
 837              	 .loc 1 378 14
 838 001c FB79     	 ldrb r3,[r7,#7]
 839 001e 0133     	 adds r3,r3,#1
 840 0020 FB71     	 strb r3,[r7,#7]
 841              	.L62:
 377:.././hal/sam3u1c/udc.c **** 				iface_num < udc_ptr_conf->desc->bNumInterfaces;
 842              	 .loc 1 377 29 discriminator 1
 843 0022 0A4B     	 ldr r3,.L64+8
 844 0024 1B68     	 ldr r3,[r3]
 845 0026 1B68     	 ldr r3,[r3]
 377:.././hal/sam3u1c/udc.c **** 				iface_num < udc_ptr_conf->desc->bNumInterfaces;
 846              	 .loc 1 377 35 discriminator 1
 847 0028 1B79     	 ldrb r3,[r3,#4]
 376:.././hal/sam3u1c/udc.c **** 		for (iface_num = 0;
 848              	 .loc 1 376 3 discriminator 1
 849 002a FA79     	 ldrb r2,[r7,#7]
 850 002c 9A42     	 cmp r2,r3
 851 002e F1D3     	 bcc .L63
 852              	.L61:
 380:.././hal/sam3u1c/udc.c **** 		}
 381:.././hal/sam3u1c/udc.c **** 	}
 382:.././hal/sam3u1c/udc.c **** 	udc_num_configuration = 0;
 853              	 .loc 1 382 24
 854 0030 044B     	 ldr r3,.L64
 855 0032 0022     	 movs r2,#0
 856 0034 1A70     	 strb r2,[r3]
 383:.././hal/sam3u1c/udc.c **** #if (USB_CONFIG_ATTR_REMOTE_WAKEUP \
 384:.././hal/sam3u1c/udc.c **** 	== (USB_DEVICE_ATTR & USB_CONFIG_ATTR_REMOTE_WAKEUP))
 385:.././hal/sam3u1c/udc.c **** 	if (CPU_TO_LE16(USB_DEV_STATUS_REMOTEWAKEUP) & udc_device_status) {
 386:.././hal/sam3u1c/udc.c **** 		// Remote wakeup is enabled then disable it
 387:.././hal/sam3u1c/udc.c **** 		UDC_REMOTEWAKEUP_DISABLE();
 388:.././hal/sam3u1c/udc.c **** 	}
 389:.././hal/sam3u1c/udc.c **** #endif
 390:.././hal/sam3u1c/udc.c **** 	udc_device_status =
 857              	 .loc 1 390 20
 858 0036 064B     	 ldr r3,.L64+12
 859 0038 0022     	 movs r2,#0
 860 003a 1A80     	 strh r2,[r3]
 391:.././hal/sam3u1c/udc.c **** #if (USB_DEVICE_ATTR & USB_CONFIG_ATTR_SELF_POWERED)
 392:.././hal/sam3u1c/udc.c **** 			CPU_TO_LE16(USB_DEV_STATUS_SELF_POWERED);
 393:.././hal/sam3u1c/udc.c **** #else
 394:.././hal/sam3u1c/udc.c **** 			CPU_TO_LE16(USB_DEV_STATUS_BUS_POWERED);
 395:.././hal/sam3u1c/udc.c **** #endif
 396:.././hal/sam3u1c/udc.c **** }
 861              	 .loc 1 396 1
 862 003c 00BF     	 nop
 863 003e 0837     	 adds r7,r7,#8
 864              	.LCFI39:
 865              	 .cfi_def_cfa_offset 8
 866 0040 BD46     	 mov sp,r7
 867              	.LCFI40:
 868              	 .cfi_def_cfa_register 13
 869              	 
 870 0042 80BD     	 pop {r7,pc}
 871              	.L65:
 872              	 .align 2
 873              	.L64:
 874 0044 00000000 	 .word udc_num_configuration
 875 0048 00000000 	 .word udc_iface_disable
 876 004c 00000000 	 .word udc_ptr_conf
 877 0050 00000000 	 .word udc_device_status
 878              	 .cfi_endproc
 879              	.LFE82:
 881              	 .section .text.udc_sof_notify,"ax",%progbits
 882              	 .align 1
 883              	 .global udc_sof_notify
 884              	 .syntax unified
 885              	 .thumb
 886              	 .thumb_func
 887              	 .fpu softvfp
 889              	udc_sof_notify:
 890              	.LFB83:
 397:.././hal/sam3u1c/udc.c **** 
 398:.././hal/sam3u1c/udc.c **** void udc_sof_notify(void)
 399:.././hal/sam3u1c/udc.c **** {
 891              	 .loc 1 399 1
 892              	 .cfi_startproc
 893              	 
 894              	 
 895 0000 80B5     	 push {r7,lr}
 896              	.LCFI41:
 897              	 .cfi_def_cfa_offset 8
 898              	 .cfi_offset 7,-8
 899              	 .cfi_offset 14,-4
 900 0002 82B0     	 sub sp,sp,#8
 901              	.LCFI42:
 902              	 .cfi_def_cfa_offset 16
 903 0004 00AF     	 add r7,sp,#0
 904              	.LCFI43:
 905              	 .cfi_def_cfa_register 7
 400:.././hal/sam3u1c/udc.c **** 	uint8_t iface_num;
 401:.././hal/sam3u1c/udc.c **** 
 402:.././hal/sam3u1c/udc.c **** 	if (udc_num_configuration) {
 906              	 .loc 1 402 6
 907 0006 144B     	 ldr r3,.L72
 908 0008 1B78     	 ldrb r3,[r3]
 909              	 .loc 1 402 5
 910 000a 002B     	 cmp r3,#0
 911 000c 1FD0     	 beq .L71
 403:.././hal/sam3u1c/udc.c **** 		for (iface_num = 0;
 912              	 .loc 1 403 18
 913 000e 0023     	 movs r3,#0
 914 0010 FB71     	 strb r3,[r7,#7]
 915              	 .loc 1 403 3
 916 0012 15E0     	 b .L68
 917              	.L70:
 404:.././hal/sam3u1c/udc.c **** 				iface_num < udc_ptr_conf->desc->bNumInterfaces;
 405:.././hal/sam3u1c/udc.c **** 				iface_num++) {
 406:.././hal/sam3u1c/udc.c **** 			if (udc_ptr_conf->udi_apis[iface_num]->sof_notify != NULL) {
 918              	 .loc 1 406 20
 919 0014 114B     	 ldr r3,.L72+4
 920 0016 1B68     	 ldr r3,[r3]
 921 0018 5A68     	 ldr r2,[r3,#4]
 922              	 .loc 1 406 30
 923 001a FB79     	 ldrb r3,[r7,#7]
 924 001c 9B00     	 lsls r3,r3,#2
 925 001e 1344     	 add r3,r3,r2
 926 0020 1B68     	 ldr r3,[r3]
 927              	 .loc 1 406 41
 928 0022 1B69     	 ldr r3,[r3,#16]
 929              	 .loc 1 406 7
 930 0024 002B     	 cmp r3,#0
 931 0026 08D0     	 beq .L69
 407:.././hal/sam3u1c/udc.c **** 				udc_ptr_conf->udi_apis[iface_num]->sof_notify();
 932              	 .loc 1 407 17
 933 0028 0C4B     	 ldr r3,.L72+4
 934 002a 1B68     	 ldr r3,[r3]
 935 002c 5A68     	 ldr r2,[r3,#4]
 936              	 .loc 1 407 27
 937 002e FB79     	 ldrb r3,[r7,#7]
 938 0030 9B00     	 lsls r3,r3,#2
 939 0032 1344     	 add r3,r3,r2
 940 0034 1B68     	 ldr r3,[r3]
 941              	 .loc 1 407 38
 942 0036 1B69     	 ldr r3,[r3,#16]
 943              	 .loc 1 407 5
 944 0038 9847     	 blx r3
 945              	.LVL16:
 946              	.L69:
 405:.././hal/sam3u1c/udc.c **** 			if (udc_ptr_conf->udi_apis[iface_num]->sof_notify != NULL) {
 947              	 .loc 1 405 14
 948 003a FB79     	 ldrb r3,[r7,#7]
 949 003c 0133     	 adds r3,r3,#1
 950 003e FB71     	 strb r3,[r7,#7]
 951              	.L68:
 404:.././hal/sam3u1c/udc.c **** 				iface_num < udc_ptr_conf->desc->bNumInterfaces;
 952              	 .loc 1 404 29 discriminator 1
 953 0040 064B     	 ldr r3,.L72+4
 954 0042 1B68     	 ldr r3,[r3]
 955 0044 1B68     	 ldr r3,[r3]
 404:.././hal/sam3u1c/udc.c **** 				iface_num < udc_ptr_conf->desc->bNumInterfaces;
 956              	 .loc 1 404 35 discriminator 1
 957 0046 1B79     	 ldrb r3,[r3,#4]
 403:.././hal/sam3u1c/udc.c **** 				iface_num < udc_ptr_conf->desc->bNumInterfaces;
 958              	 .loc 1 403 3 discriminator 1
 959 0048 FA79     	 ldrb r2,[r7,#7]
 960 004a 9A42     	 cmp r2,r3
 961 004c E2D3     	 bcc .L70
 962              	.L71:
 408:.././hal/sam3u1c/udc.c **** 			}
 409:.././hal/sam3u1c/udc.c **** 		}
 410:.././hal/sam3u1c/udc.c **** 	}
 411:.././hal/sam3u1c/udc.c **** }
 963              	 .loc 1 411 1
 964 004e 00BF     	 nop
 965 0050 0837     	 adds r7,r7,#8
 966              	.LCFI44:
 967              	 .cfi_def_cfa_offset 8
 968 0052 BD46     	 mov sp,r7
 969              	.LCFI45:
 970              	 .cfi_def_cfa_register 13
 971              	 
 972 0054 80BD     	 pop {r7,pc}
 973              	.L73:
 974 0056 00BF     	 .align 2
 975              	.L72:
 976 0058 00000000 	 .word udc_num_configuration
 977 005c 00000000 	 .word udc_ptr_conf
 978              	 .cfi_endproc
 979              	.LFE83:
 981              	 .section .text.udc_req_std_dev_get_status,"ax",%progbits
 982              	 .align 1
 983              	 .syntax unified
 984              	 .thumb
 985              	 .thumb_func
 986              	 .fpu softvfp
 988              	udc_req_std_dev_get_status:
 989              	.LFB84:
 412:.././hal/sam3u1c/udc.c **** 
 413:.././hal/sam3u1c/udc.c **** /**
 414:.././hal/sam3u1c/udc.c ****  * \brief Standard device request to get device status
 415:.././hal/sam3u1c/udc.c ****  *
 416:.././hal/sam3u1c/udc.c ****  * \return true if success
 417:.././hal/sam3u1c/udc.c ****  */
 418:.././hal/sam3u1c/udc.c **** static bool udc_req_std_dev_get_status(void)
 419:.././hal/sam3u1c/udc.c **** {
 990              	 .loc 1 419 1
 991              	 .cfi_startproc
 992              	 
 993              	 
 994 0000 80B5     	 push {r7,lr}
 995              	.LCFI46:
 996              	 .cfi_def_cfa_offset 8
 997              	 .cfi_offset 7,-8
 998              	 .cfi_offset 14,-4
 999 0002 00AF     	 add r7,sp,#0
 1000              	.LCFI47:
 1001              	 .cfi_def_cfa_register 7
 420:.././hal/sam3u1c/udc.c **** 	if (udd_g_ctrlreq.req.wLength != sizeof(udc_device_status)) {
 1002              	 .loc 1 420 23
 1003 0004 064B     	 ldr r3,.L77
 1004 0006 DB88     	 ldrh r3,[r3,#6]
 1005              	 .loc 1 420 5
 1006 0008 022B     	 cmp r3,#2
 1007 000a 01D0     	 beq .L75
 421:.././hal/sam3u1c/udc.c **** 		return false;
 1008              	 .loc 1 421 10
 1009 000c 0023     	 movs r3,#0
 1010 000e 04E0     	 b .L76
 1011              	.L75:
 422:.././hal/sam3u1c/udc.c **** 	}
 423:.././hal/sam3u1c/udc.c **** 
 424:.././hal/sam3u1c/udc.c **** 	udd_set_setup_payload( (uint8_t *) & udc_device_status,
 1012              	 .loc 1 424 2
 1013 0010 0221     	 movs r1,#2
 1014 0012 0448     	 ldr r0,.L77+4
 1015 0014 044B     	 ldr r3,.L77+8
 1016 0016 9847     	 blx r3
 1017              	.LVL17:
 425:.././hal/sam3u1c/udc.c **** 			sizeof(udc_device_status));
 426:.././hal/sam3u1c/udc.c **** 	return true;
 1018              	 .loc 1 426 9
 1019 0018 0123     	 movs r3,#1
 1020              	.L76:
 427:.././hal/sam3u1c/udc.c **** }
 1021              	 .loc 1 427 1
 1022 001a 1846     	 mov r0,r3
 1023 001c 80BD     	 pop {r7,pc}
 1024              	.L78:
 1025 001e 00BF     	 .align 2
 1026              	.L77:
 1027 0020 00000000 	 .word udd_g_ctrlreq
 1028 0024 00000000 	 .word udc_device_status
 1029 0028 00000000 	 .word udd_set_setup_payload
 1030              	 .cfi_endproc
 1031              	.LFE84:
 1033              	 .section .text.udc_req_std_ep_get_status,"ax",%progbits
 1034              	 .align 1
 1035              	 .syntax unified
 1036              	 .thumb
 1037              	 .thumb_func
 1038              	 .fpu softvfp
 1040              	udc_req_std_ep_get_status:
 1041              	.LFB85:
 428:.././hal/sam3u1c/udc.c **** 
 429:.././hal/sam3u1c/udc.c **** #if (0!=USB_DEVICE_MAX_EP)
 430:.././hal/sam3u1c/udc.c **** /**
 431:.././hal/sam3u1c/udc.c ****  * \brief Standard endpoint request to get endpoint status
 432:.././hal/sam3u1c/udc.c ****  *
 433:.././hal/sam3u1c/udc.c ****  * \return true if success
 434:.././hal/sam3u1c/udc.c ****  */
 435:.././hal/sam3u1c/udc.c **** static bool udc_req_std_ep_get_status(void)
 436:.././hal/sam3u1c/udc.c **** {
 1042              	 .loc 1 436 1
 1043              	 .cfi_startproc
 1044              	 
 1045              	 
 1046 0000 80B5     	 push {r7,lr}
 1047              	.LCFI48:
 1048              	 .cfi_def_cfa_offset 8
 1049              	 .cfi_offset 7,-8
 1050              	 .cfi_offset 14,-4
 1051 0002 00AF     	 add r7,sp,#0
 1052              	.LCFI49:
 1053              	 .cfi_def_cfa_register 7
 437:.././hal/sam3u1c/udc.c **** 	static le16_t udc_ep_status;
 438:.././hal/sam3u1c/udc.c **** 
 439:.././hal/sam3u1c/udc.c **** 	if (udd_g_ctrlreq.req.wLength != sizeof(udc_ep_status)) {
 1054              	 .loc 1 439 23
 1055 0004 0B4B     	 ldr r3,.L82
 1056 0006 DB88     	 ldrh r3,[r3,#6]
 1057              	 .loc 1 439 5
 1058 0008 022B     	 cmp r3,#2
 1059 000a 01D0     	 beq .L80
 440:.././hal/sam3u1c/udc.c **** 		return false;
 1060              	 .loc 1 440 10
 1061 000c 0023     	 movs r3,#0
 1062 000e 0EE0     	 b .L81
 1063              	.L80:
 441:.././hal/sam3u1c/udc.c **** 	}
 442:.././hal/sam3u1c/udc.c **** 
 443:.././hal/sam3u1c/udc.c **** 	udc_ep_status = udd_ep_is_halted(udd_g_ctrlreq.req.
 1064              	 .loc 1 443 52
 1065 0010 084B     	 ldr r3,.L82
 1066 0012 9B88     	 ldrh r3,[r3,#4]
 1067              	 .loc 1 443 18
 1068 0014 DBB2     	 uxtb r3,r3
 1069 0016 1846     	 mov r0,r3
 1070 0018 074B     	 ldr r3,.L82+4
 1071 001a 9847     	 blx r3
 1072              	.LVL18:
 1073 001c 0346     	 mov r3,r0
 444:.././hal/sam3u1c/udc.c **** 			wIndex & 0xFF) ? CPU_TO_LE16(USB_EP_STATUS_HALTED) : 0;
 1074              	 .loc 1 444 55
 1075 001e 9AB2     	 uxth r2,r3
 443:.././hal/sam3u1c/udc.c **** 			wIndex & 0xFF) ? CPU_TO_LE16(USB_EP_STATUS_HALTED) : 0;
 1076              	 .loc 1 443 16
 1077 0020 064B     	 ldr r3,.L82+8
 1078 0022 1A80     	 strh r2,[r3]
 445:.././hal/sam3u1c/udc.c **** 
 446:.././hal/sam3u1c/udc.c **** 	udd_set_setup_payload( (uint8_t *) & udc_ep_status,
 1079              	 .loc 1 446 2
 1080 0024 0221     	 movs r1,#2
 1081 0026 0548     	 ldr r0,.L82+8
 1082 0028 054B     	 ldr r3,.L82+12
 1083 002a 9847     	 blx r3
 1084              	.LVL19:
 447:.././hal/sam3u1c/udc.c **** 			sizeof(udc_ep_status));
 448:.././hal/sam3u1c/udc.c **** 	return true;
 1085              	 .loc 1 448 9
 1086 002c 0123     	 movs r3,#1
 1087              	.L81:
 449:.././hal/sam3u1c/udc.c **** }
 1088              	 .loc 1 449 1
 1089 002e 1846     	 mov r0,r3
 1090 0030 80BD     	 pop {r7,pc}
 1091              	.L83:
 1092 0032 00BF     	 .align 2
 1093              	.L82:
 1094 0034 00000000 	 .word udd_g_ctrlreq
 1095 0038 00000000 	 .word udd_ep_is_halted
 1096 003c 00000000 	 .word udc_ep_status.7347
 1097 0040 00000000 	 .word udd_set_setup_payload
 1098              	 .cfi_endproc
 1099              	.LFE85:
 1101              	 .section .text.udc_req_std_dev_clear_feature,"ax",%progbits
 1102              	 .align 1
 1103              	 .syntax unified
 1104              	 .thumb
 1105              	 .thumb_func
 1106              	 .fpu softvfp
 1108              	udc_req_std_dev_clear_feature:
 1109              	.LFB86:
 450:.././hal/sam3u1c/udc.c **** #endif
 451:.././hal/sam3u1c/udc.c **** 
 452:.././hal/sam3u1c/udc.c **** /**
 453:.././hal/sam3u1c/udc.c ****  * \brief Standard device request to change device status
 454:.././hal/sam3u1c/udc.c ****  *
 455:.././hal/sam3u1c/udc.c ****  * \return true if success
 456:.././hal/sam3u1c/udc.c ****  */
 457:.././hal/sam3u1c/udc.c **** static bool udc_req_std_dev_clear_feature(void)
 458:.././hal/sam3u1c/udc.c **** {
 1110              	 .loc 1 458 1
 1111              	 .cfi_startproc
 1112              	 
 1113              	 
 1114              	 
 1115 0000 80B4     	 push {r7}
 1116              	.LCFI50:
 1117              	 .cfi_def_cfa_offset 4
 1118              	 .cfi_offset 7,-4
 1119 0002 00AF     	 add r7,sp,#0
 1120              	.LCFI51:
 1121              	 .cfi_def_cfa_register 7
 459:.././hal/sam3u1c/udc.c **** 	if (udd_g_ctrlreq.req.wLength) {
 1122              	 .loc 1 459 23
 1123 0004 0B4B     	 ldr r3,.L88
 1124 0006 DB88     	 ldrh r3,[r3,#6]
 1125              	 .loc 1 459 5
 1126 0008 002B     	 cmp r3,#0
 1127 000a 01D0     	 beq .L85
 460:.././hal/sam3u1c/udc.c **** 		return false;
 1128              	 .loc 1 460 10
 1129 000c 0023     	 movs r3,#0
 1130 000e 0DE0     	 b .L86
 1131              	.L85:
 461:.././hal/sam3u1c/udc.c **** 	}
 462:.././hal/sam3u1c/udc.c **** 
 463:.././hal/sam3u1c/udc.c **** 	if (udd_g_ctrlreq.req.wValue == USB_DEV_FEATURE_REMOTE_WAKEUP) {
 1132              	 .loc 1 463 23
 1133 0010 084B     	 ldr r3,.L88
 1134 0012 5B88     	 ldrh r3,[r3,#2]
 1135              	 .loc 1 463 5
 1136 0014 012B     	 cmp r3,#1
 1137 0016 08D1     	 bne .L87
 464:.././hal/sam3u1c/udc.c **** 		udc_device_status &= CPU_TO_LE16(~(uint32_t)USB_DEV_STATUS_REMOTEWAKEUP);
 1138              	 .loc 1 464 21
 1139 0018 074B     	 ldr r3,.L88+4
 1140 001a 1B88     	 ldrh r3,[r3]
 1141 001c 23F00203 	 bic r3,r3,#2
 1142 0020 9AB2     	 uxth r2,r3
 1143 0022 054B     	 ldr r3,.L88+4
 1144 0024 1A80     	 strh r2,[r3]
 465:.././hal/sam3u1c/udc.c **** #if (USB_CONFIG_ATTR_REMOTE_WAKEUP \
 466:.././hal/sam3u1c/udc.c **** 	== (USB_DEVICE_ATTR & USB_CONFIG_ATTR_REMOTE_WAKEUP))
 467:.././hal/sam3u1c/udc.c **** 		UDC_REMOTEWAKEUP_DISABLE();
 468:.././hal/sam3u1c/udc.c **** #endif
 469:.././hal/sam3u1c/udc.c **** 		return true;
 1145              	 .loc 1 469 10
 1146 0026 0123     	 movs r3,#1
 1147 0028 00E0     	 b .L86
 1148              	.L87:
 470:.././hal/sam3u1c/udc.c **** 	}
 471:.././hal/sam3u1c/udc.c **** 	return false;
 1149              	 .loc 1 471 9
 1150 002a 0023     	 movs r3,#0
 1151              	.L86:
 472:.././hal/sam3u1c/udc.c **** }
 1152              	 .loc 1 472 1
 1153 002c 1846     	 mov r0,r3
 1154 002e BD46     	 mov sp,r7
 1155              	.LCFI52:
 1156              	 .cfi_def_cfa_register 13
 1157              	 
 1158 0030 80BC     	 pop {r7}
 1159              	.LCFI53:
 1160              	 .cfi_restore 7
 1161              	 .cfi_def_cfa_offset 0
 1162 0032 7047     	 bx lr
 1163              	.L89:
 1164              	 .align 2
 1165              	.L88:
 1166 0034 00000000 	 .word udd_g_ctrlreq
 1167 0038 00000000 	 .word udc_device_status
 1168              	 .cfi_endproc
 1169              	.LFE86:
 1171              	 .section .text.udc_req_std_ep_clear_feature,"ax",%progbits
 1172              	 .align 1
 1173              	 .syntax unified
 1174              	 .thumb
 1175              	 .thumb_func
 1176              	 .fpu softvfp
 1178              	udc_req_std_ep_clear_feature:
 1179              	.LFB87:
 473:.././hal/sam3u1c/udc.c **** 
 474:.././hal/sam3u1c/udc.c **** #if (0!=USB_DEVICE_MAX_EP)
 475:.././hal/sam3u1c/udc.c **** /**
 476:.././hal/sam3u1c/udc.c ****  * \brief Standard endpoint request to clear endpoint feature
 477:.././hal/sam3u1c/udc.c ****  *
 478:.././hal/sam3u1c/udc.c ****  * \return true if success
 479:.././hal/sam3u1c/udc.c ****  */
 480:.././hal/sam3u1c/udc.c **** static bool udc_req_std_ep_clear_feature(void)
 481:.././hal/sam3u1c/udc.c **** {
 1180              	 .loc 1 481 1
 1181              	 .cfi_startproc
 1182              	 
 1183              	 
 1184 0000 80B5     	 push {r7,lr}
 1185              	.LCFI54:
 1186              	 .cfi_def_cfa_offset 8
 1187              	 .cfi_offset 7,-8
 1188              	 .cfi_offset 14,-4
 1189 0002 00AF     	 add r7,sp,#0
 1190              	.LCFI55:
 1191              	 .cfi_def_cfa_register 7
 482:.././hal/sam3u1c/udc.c **** 	if (udd_g_ctrlreq.req.wLength) {
 1192              	 .loc 1 482 23
 1193 0004 0A4B     	 ldr r3,.L94
 1194 0006 DB88     	 ldrh r3,[r3,#6]
 1195              	 .loc 1 482 5
 1196 0008 002B     	 cmp r3,#0
 1197 000a 01D0     	 beq .L91
 483:.././hal/sam3u1c/udc.c **** 		return false;
 1198              	 .loc 1 483 10
 1199 000c 0023     	 movs r3,#0
 1200 000e 0CE0     	 b .L92
 1201              	.L91:
 484:.././hal/sam3u1c/udc.c **** 	}
 485:.././hal/sam3u1c/udc.c **** 
 486:.././hal/sam3u1c/udc.c **** 	if (udd_g_ctrlreq.req.wValue == USB_EP_FEATURE_HALT) {
 1202              	 .loc 1 486 23
 1203 0010 074B     	 ldr r3,.L94
 1204 0012 5B88     	 ldrh r3,[r3,#2]
 1205              	 .loc 1 486 5
 1206 0014 002B     	 cmp r3,#0
 1207 0016 07D1     	 bne .L93
 487:.././hal/sam3u1c/udc.c **** 		return udd_ep_clear_halt(udd_g_ctrlreq.req.wIndex & 0xFF);
 1208              	 .loc 1 487 45
 1209 0018 054B     	 ldr r3,.L94
 1210 001a 9B88     	 ldrh r3,[r3,#4]
 1211              	 .loc 1 487 10
 1212 001c DBB2     	 uxtb r3,r3
 1213 001e 1846     	 mov r0,r3
 1214 0020 044B     	 ldr r3,.L94+4
 1215 0022 9847     	 blx r3
 1216              	.LVL20:
 1217 0024 0346     	 mov r3,r0
 1218 0026 00E0     	 b .L92
 1219              	.L93:
 488:.././hal/sam3u1c/udc.c **** 	}
 489:.././hal/sam3u1c/udc.c **** 	return false;
 1220              	 .loc 1 489 9
 1221 0028 0023     	 movs r3,#0
 1222              	.L92:
 490:.././hal/sam3u1c/udc.c **** }
 1223              	 .loc 1 490 1
 1224 002a 1846     	 mov r0,r3
 1225 002c 80BD     	 pop {r7,pc}
 1226              	.L95:
 1227 002e 00BF     	 .align 2
 1228              	.L94:
 1229 0030 00000000 	 .word udd_g_ctrlreq
 1230 0034 00000000 	 .word udd_ep_clear_halt
 1231              	 .cfi_endproc
 1232              	.LFE87:
 1234              	 .section .text.udc_req_std_dev_set_feature,"ax",%progbits
 1235              	 .align 1
 1236              	 .syntax unified
 1237              	 .thumb
 1238              	 .thumb_func
 1239              	 .fpu softvfp
 1241              	udc_req_std_dev_set_feature:
 1242              	.LFB88:
 491:.././hal/sam3u1c/udc.c **** #endif
 492:.././hal/sam3u1c/udc.c **** 
 493:.././hal/sam3u1c/udc.c **** /**
 494:.././hal/sam3u1c/udc.c ****  * \brief Standard device request to set a feature
 495:.././hal/sam3u1c/udc.c ****  *
 496:.././hal/sam3u1c/udc.c ****  * \return true if success
 497:.././hal/sam3u1c/udc.c ****  */
 498:.././hal/sam3u1c/udc.c **** static bool udc_req_std_dev_set_feature(void)
 499:.././hal/sam3u1c/udc.c **** {
 1243              	 .loc 1 499 1
 1244              	 .cfi_startproc
 1245              	 
 1246              	 
 1247 0000 80B5     	 push {r7,lr}
 1248              	.LCFI56:
 1249              	 .cfi_def_cfa_offset 8
 1250              	 .cfi_offset 7,-8
 1251              	 .cfi_offset 14,-4
 1252 0002 00AF     	 add r7,sp,#0
 1253              	.LCFI57:
 1254              	 .cfi_def_cfa_register 7
 500:.././hal/sam3u1c/udc.c **** 	if (udd_g_ctrlreq.req.wLength) {
 1255              	 .loc 1 500 23
 1256 0004 264B     	 ldr r3,.L115
 1257 0006 DB88     	 ldrh r3,[r3,#6]
 1258              	 .loc 1 500 5
 1259 0008 002B     	 cmp r3,#0
 1260 000a 01D0     	 beq .L97
 501:.././hal/sam3u1c/udc.c **** 		return false;
 1261              	 .loc 1 501 10
 1262 000c 0023     	 movs r3,#0
 1263 000e 45E0     	 b .L98
 1264              	.L97:
 502:.././hal/sam3u1c/udc.c **** 	}
 503:.././hal/sam3u1c/udc.c **** 
 504:.././hal/sam3u1c/udc.c **** 	switch (udd_g_ctrlreq.req.wValue) {
 1265              	 .loc 1 504 27
 1266 0010 234B     	 ldr r3,.L115
 1267 0012 5B88     	 ldrh r3,[r3,#2]
 1268              	 .loc 1 504 2
 1269 0014 012B     	 cmp r3,#1
 1270 0016 02D0     	 beq .L99
 1271 0018 022B     	 cmp r3,#2
 1272 001a 02D0     	 beq .L100
 505:.././hal/sam3u1c/udc.c **** 
 506:.././hal/sam3u1c/udc.c **** 	case USB_DEV_FEATURE_REMOTE_WAKEUP:
 507:.././hal/sam3u1c/udc.c **** #if (USB_CONFIG_ATTR_REMOTE_WAKEUP \
 508:.././hal/sam3u1c/udc.c **** 	== (USB_DEVICE_ATTR & USB_CONFIG_ATTR_REMOTE_WAKEUP))
 509:.././hal/sam3u1c/udc.c **** 		udc_device_status |= CPU_TO_LE16(USB_DEV_STATUS_REMOTEWAKEUP);
 510:.././hal/sam3u1c/udc.c **** 		UDC_REMOTEWAKEUP_ENABLE();
 511:.././hal/sam3u1c/udc.c **** 		return true;
 512:.././hal/sam3u1c/udc.c **** #else
 513:.././hal/sam3u1c/udc.c **** 		return false;
 514:.././hal/sam3u1c/udc.c **** #endif
 515:.././hal/sam3u1c/udc.c **** 
 516:.././hal/sam3u1c/udc.c **** #ifdef USB_DEVICE_HS_SUPPORT
 517:.././hal/sam3u1c/udc.c **** 	case USB_DEV_FEATURE_TEST_MODE:
 518:.././hal/sam3u1c/udc.c **** 		if (!udd_is_high_speed()) {
 519:.././hal/sam3u1c/udc.c **** 			break;
 520:.././hal/sam3u1c/udc.c **** 		}
 521:.././hal/sam3u1c/udc.c **** 		if (udd_g_ctrlreq.req.wIndex & 0xff) {
 522:.././hal/sam3u1c/udc.c **** 			break;
 523:.././hal/sam3u1c/udc.c **** 		}
 524:.././hal/sam3u1c/udc.c **** 		// Unconfigure the device, terminating all ongoing requests
 525:.././hal/sam3u1c/udc.c **** 		udc_reset();
 526:.././hal/sam3u1c/udc.c **** 		switch ((udd_g_ctrlreq.req.wIndex >> 8) & 0xFF) {
 527:.././hal/sam3u1c/udc.c **** 		case USB_DEV_TEST_MODE_J:
 528:.././hal/sam3u1c/udc.c **** 			udd_g_ctrlreq.callback = udd_test_mode_j;
 529:.././hal/sam3u1c/udc.c **** 			return true;
 530:.././hal/sam3u1c/udc.c **** 
 531:.././hal/sam3u1c/udc.c **** 		case USB_DEV_TEST_MODE_K:
 532:.././hal/sam3u1c/udc.c **** 			udd_g_ctrlreq.callback = udd_test_mode_k;
 533:.././hal/sam3u1c/udc.c **** 			return true;
 534:.././hal/sam3u1c/udc.c **** 
 535:.././hal/sam3u1c/udc.c **** 		case USB_DEV_TEST_MODE_SE0_NAK:
 536:.././hal/sam3u1c/udc.c **** 			udd_g_ctrlreq.callback = udd_test_mode_se0_nak;
 537:.././hal/sam3u1c/udc.c **** 			return true;
 538:.././hal/sam3u1c/udc.c **** 
 539:.././hal/sam3u1c/udc.c **** 		case USB_DEV_TEST_MODE_PACKET:
 540:.././hal/sam3u1c/udc.c **** 			udd_g_ctrlreq.callback = udd_test_mode_packet;
 541:.././hal/sam3u1c/udc.c **** 			return true;
 542:.././hal/sam3u1c/udc.c **** 
 543:.././hal/sam3u1c/udc.c **** 		case USB_DEV_TEST_MODE_FORCE_ENABLE: // Only for downstream facing hub ports
 544:.././hal/sam3u1c/udc.c **** 		default:
 545:.././hal/sam3u1c/udc.c **** 			break;
 546:.././hal/sam3u1c/udc.c **** 		}
 547:.././hal/sam3u1c/udc.c **** 		break;
 548:.././hal/sam3u1c/udc.c **** #endif
 549:.././hal/sam3u1c/udc.c **** 	default:
 550:.././hal/sam3u1c/udc.c **** 		break;
 1273              	 .loc 1 550 3
 1274 001c 3DE0     	 b .L103
 1275              	.L99:
 513:.././hal/sam3u1c/udc.c **** #endif
 1276              	 .loc 1 513 10
 1277 001e 0023     	 movs r3,#0
 1278 0020 3CE0     	 b .L98
 1279              	.L100:
 518:.././hal/sam3u1c/udc.c **** 			break;
 1280              	 .loc 1 518 8
 1281 0022 204B     	 ldr r3,.L115+4
 1282 0024 9847     	 blx r3
 1283              	.LVL21:
 1284 0026 0346     	 mov r3,r0
 518:.././hal/sam3u1c/udc.c **** 			break;
 1285              	 .loc 1 518 7
 1286 0028 83F00103 	 eor r3,r3,#1
 1287 002c DBB2     	 uxtb r3,r3
 518:.././hal/sam3u1c/udc.c **** 			break;
 1288              	 .loc 1 518 6
 1289 002e 002B     	 cmp r3,#0
 1290 0030 30D1     	 bne .L112
 521:.././hal/sam3u1c/udc.c **** 			break;
 1291              	 .loc 1 521 24
 1292 0032 1B4B     	 ldr r3,.L115
 1293 0034 9B88     	 ldrh r3,[r3,#4]
 521:.././hal/sam3u1c/udc.c **** 			break;
 1294              	 .loc 1 521 32
 1295 0036 DBB2     	 uxtb r3,r3
 521:.././hal/sam3u1c/udc.c **** 			break;
 1296              	 .loc 1 521 6
 1297 0038 002B     	 cmp r3,#0
 1298 003a 2DD1     	 bne .L113
 525:.././hal/sam3u1c/udc.c **** 		switch ((udd_g_ctrlreq.req.wIndex >> 8) & 0xFF) {
 1299              	 .loc 1 525 3
 1300 003c 1A4B     	 ldr r3,.L115+8
 1301 003e 9847     	 blx r3
 1302              	.LVL22:
 526:.././hal/sam3u1c/udc.c **** 		case USB_DEV_TEST_MODE_J:
 1303              	 .loc 1 526 29
 1304 0040 174B     	 ldr r3,.L115
 1305 0042 9B88     	 ldrh r3,[r3,#4]
 526:.././hal/sam3u1c/udc.c **** 		case USB_DEV_TEST_MODE_J:
 1306              	 .loc 1 526 43
 1307 0044 1B0A     	 lsrs r3,r3,#8
 1308 0046 9BB2     	 uxth r3,r3
 1309 0048 DBB2     	 uxtb r3,r3
 1310 004a 013B     	 subs r3,r3,#1
 1311 004c 032B     	 cmp r3,#3
 1312 004e 1FD8     	 bhi .L114
 1313 0050 01A2     	 adr r2,.L107
 1314 0052 52F823F0 	 ldr pc,[r2,r3,lsl#2]
 1315 0056 00BF     	 .p2align 2
 1316              	.L107:
 1317 0058 69000000 	 .word .L110+1
 1318 005c 73000000 	 .word .L109+1
 1319 0060 7D000000 	 .word .L108+1
 1320 0064 87000000 	 .word .L106+1
 1321              	 .p2align 1
 1322              	.L110:
 528:.././hal/sam3u1c/udc.c **** 			return true;
 1323              	 .loc 1 528 27
 1324 0068 0D4B     	 ldr r3,.L115
 1325 006a 104A     	 ldr r2,.L115+12
 1326 006c 1A61     	 str r2,[r3,#16]
 529:.././hal/sam3u1c/udc.c **** 
 1327              	 .loc 1 529 11
 1328 006e 0123     	 movs r3,#1
 1329 0070 14E0     	 b .L98
 1330              	.L109:
 532:.././hal/sam3u1c/udc.c **** 			return true;
 1331              	 .loc 1 532 27
 1332 0072 0B4B     	 ldr r3,.L115
 1333 0074 0E4A     	 ldr r2,.L115+16
 1334 0076 1A61     	 str r2,[r3,#16]
 533:.././hal/sam3u1c/udc.c **** 
 1335              	 .loc 1 533 11
 1336 0078 0123     	 movs r3,#1
 1337 007a 0FE0     	 b .L98
 1338              	.L108:
 536:.././hal/sam3u1c/udc.c **** 			return true;
 1339              	 .loc 1 536 27
 1340 007c 084B     	 ldr r3,.L115
 1341 007e 0D4A     	 ldr r2,.L115+20
 1342 0080 1A61     	 str r2,[r3,#16]
 537:.././hal/sam3u1c/udc.c **** 
 1343              	 .loc 1 537 11
 1344 0082 0123     	 movs r3,#1
 1345 0084 0AE0     	 b .L98
 1346              	.L106:
 540:.././hal/sam3u1c/udc.c **** 			return true;
 1347              	 .loc 1 540 27
 1348 0086 064B     	 ldr r3,.L115
 1349 0088 0B4A     	 ldr r2,.L115+24
 1350 008a 1A61     	 str r2,[r3,#16]
 541:.././hal/sam3u1c/udc.c **** 
 1351              	 .loc 1 541 11
 1352 008c 0123     	 movs r3,#1
 1353 008e 05E0     	 b .L98
 1354              	.L114:
 545:.././hal/sam3u1c/udc.c **** 		}
 1355              	 .loc 1 545 4
 1356 0090 00BF     	 nop
 547:.././hal/sam3u1c/udc.c **** #endif
 1357              	 .loc 1 547 3
 1358 0092 02E0     	 b .L103
 1359              	.L112:
 519:.././hal/sam3u1c/udc.c **** 		}
 1360              	 .loc 1 519 4
 1361 0094 00BF     	 nop
 1362 0096 00E0     	 b .L103
 1363              	.L113:
 522:.././hal/sam3u1c/udc.c **** 		}
 1364              	 .loc 1 522 4
 1365 0098 00BF     	 nop
 1366              	.L103:
 551:.././hal/sam3u1c/udc.c **** 	}
 552:.././hal/sam3u1c/udc.c **** 	return false;
 1367              	 .loc 1 552 9
 1368 009a 0023     	 movs r3,#0
 1369              	.L98:
 553:.././hal/sam3u1c/udc.c **** }
 1370              	 .loc 1 553 1
 1371 009c 1846     	 mov r0,r3
 1372 009e 80BD     	 pop {r7,pc}
 1373              	.L116:
 1374              	 .align 2
 1375              	.L115:
 1376 00a0 00000000 	 .word udd_g_ctrlreq
 1377 00a4 00000000 	 .word udd_is_high_speed
 1378 00a8 00000000 	 .word udc_reset
 1379 00ac 00000000 	 .word udd_test_mode_j
 1380 00b0 00000000 	 .word udd_test_mode_k
 1381 00b4 00000000 	 .word udd_test_mode_se0_nak
 1382 00b8 00000000 	 .word udd_test_mode_packet
 1383              	 .cfi_endproc
 1384              	.LFE88:
 1386              	 .section .text.udc_req_std_ep_set_feature,"ax",%progbits
 1387              	 .align 1
 1388              	 .syntax unified
 1389              	 .thumb
 1390              	 .thumb_func
 1391              	 .fpu softvfp
 1393              	udc_req_std_ep_set_feature:
 1394              	.LFB89:
 554:.././hal/sam3u1c/udc.c **** 
 555:.././hal/sam3u1c/udc.c **** /**
 556:.././hal/sam3u1c/udc.c ****  * \brief Standard endpoint request to halt an endpoint
 557:.././hal/sam3u1c/udc.c ****  *
 558:.././hal/sam3u1c/udc.c ****  * \return true if success
 559:.././hal/sam3u1c/udc.c ****  */
 560:.././hal/sam3u1c/udc.c **** #if (0!=USB_DEVICE_MAX_EP)
 561:.././hal/sam3u1c/udc.c **** static bool udc_req_std_ep_set_feature(void)
 562:.././hal/sam3u1c/udc.c **** {
 1395              	 .loc 1 562 1
 1396              	 .cfi_startproc
 1397              	 
 1398              	 
 1399 0000 80B5     	 push {r7,lr}
 1400              	.LCFI58:
 1401              	 .cfi_def_cfa_offset 8
 1402              	 .cfi_offset 7,-8
 1403              	 .cfi_offset 14,-4
 1404 0002 00AF     	 add r7,sp,#0
 1405              	.LCFI59:
 1406              	 .cfi_def_cfa_register 7
 563:.././hal/sam3u1c/udc.c **** 	if (udd_g_ctrlreq.req.wLength) {
 1407              	 .loc 1 563 23
 1408 0004 0D4B     	 ldr r3,.L121
 1409 0006 DB88     	 ldrh r3,[r3,#6]
 1410              	 .loc 1 563 5
 1411 0008 002B     	 cmp r3,#0
 1412 000a 01D0     	 beq .L118
 564:.././hal/sam3u1c/udc.c **** 		return false;
 1413              	 .loc 1 564 10
 1414 000c 0023     	 movs r3,#0
 1415 000e 12E0     	 b .L119
 1416              	.L118:
 565:.././hal/sam3u1c/udc.c **** 	}
 566:.././hal/sam3u1c/udc.c **** 	if (udd_g_ctrlreq.req.wValue == USB_EP_FEATURE_HALT) {
 1417              	 .loc 1 566 23
 1418 0010 0A4B     	 ldr r3,.L121
 1419 0012 5B88     	 ldrh r3,[r3,#2]
 1420              	 .loc 1 566 5
 1421 0014 002B     	 cmp r3,#0
 1422 0016 0DD1     	 bne .L120
 567:.././hal/sam3u1c/udc.c **** 		udd_ep_abort(udd_g_ctrlreq.req.wIndex & 0xFF);
 1423              	 .loc 1 567 33
 1424 0018 084B     	 ldr r3,.L121
 1425 001a 9B88     	 ldrh r3,[r3,#4]
 1426              	 .loc 1 567 3
 1427 001c DBB2     	 uxtb r3,r3
 1428 001e 1846     	 mov r0,r3
 1429 0020 074B     	 ldr r3,.L121+4
 1430 0022 9847     	 blx r3
 1431              	.LVL23:
 568:.././hal/sam3u1c/udc.c **** 		return udd_ep_set_halt(udd_g_ctrlreq.req.wIndex & 0xFF);
 1432              	 .loc 1 568 43
 1433 0024 054B     	 ldr r3,.L121
 1434 0026 9B88     	 ldrh r3,[r3,#4]
 1435              	 .loc 1 568 10
 1436 0028 DBB2     	 uxtb r3,r3
 1437 002a 1846     	 mov r0,r3
 1438 002c 054B     	 ldr r3,.L121+8
 1439 002e 9847     	 blx r3
 1440              	.LVL24:
 1441 0030 0346     	 mov r3,r0
 1442 0032 00E0     	 b .L119
 1443              	.L120:
 569:.././hal/sam3u1c/udc.c **** 	}
 570:.././hal/sam3u1c/udc.c **** 	return false;
 1444              	 .loc 1 570 9
 1445 0034 0023     	 movs r3,#0
 1446              	.L119:
 571:.././hal/sam3u1c/udc.c **** }
 1447              	 .loc 1 571 1
 1448 0036 1846     	 mov r0,r3
 1449 0038 80BD     	 pop {r7,pc}
 1450              	.L122:
 1451 003a 00BF     	 .align 2
 1452              	.L121:
 1453 003c 00000000 	 .word udd_g_ctrlreq
 1454 0040 00000000 	 .word udd_ep_abort
 1455 0044 00000000 	 .word udd_ep_set_halt
 1456              	 .cfi_endproc
 1457              	.LFE89:
 1459              	 .section .text.udc_valid_address,"ax",%progbits
 1460              	 .align 1
 1461              	 .syntax unified
 1462              	 .thumb
 1463              	 .thumb_func
 1464              	 .fpu softvfp
 1466              	udc_valid_address:
 1467              	.LFB90:
 572:.././hal/sam3u1c/udc.c **** #endif
 573:.././hal/sam3u1c/udc.c **** 
 574:.././hal/sam3u1c/udc.c **** /**
 575:.././hal/sam3u1c/udc.c ****  * \brief Change the address of device
 576:.././hal/sam3u1c/udc.c ****  * Callback called at the end of request set address
 577:.././hal/sam3u1c/udc.c ****  */
 578:.././hal/sam3u1c/udc.c **** static void udc_valid_address(void)
 579:.././hal/sam3u1c/udc.c **** {
 1468              	 .loc 1 579 1
 1469              	 .cfi_startproc
 1470              	 
 1471              	 
 1472 0000 80B5     	 push {r7,lr}
 1473              	.LCFI60:
 1474              	 .cfi_def_cfa_offset 8
 1475              	 .cfi_offset 7,-8
 1476              	 .cfi_offset 14,-4
 1477 0002 00AF     	 add r7,sp,#0
 1478              	.LCFI61:
 1479              	 .cfi_def_cfa_register 7
 580:.././hal/sam3u1c/udc.c **** 	udd_set_address(udd_g_ctrlreq.req.wValue & 0x7F);
 1480              	 .loc 1 580 35
 1481 0004 054B     	 ldr r3,.L124
 1482 0006 5B88     	 ldrh r3,[r3,#2]
 1483              	 .loc 1 580 43
 1484 0008 DBB2     	 uxtb r3,r3
 1485              	 .loc 1 580 2
 1486 000a 03F07F03 	 and r3,r3,#127
 1487 000e DBB2     	 uxtb r3,r3
 1488 0010 1846     	 mov r0,r3
 1489 0012 034B     	 ldr r3,.L124+4
 1490 0014 9847     	 blx r3
 1491              	.LVL25:
 581:.././hal/sam3u1c/udc.c **** }
 1492              	 .loc 1 581 1
 1493 0016 00BF     	 nop
 1494 0018 80BD     	 pop {r7,pc}
 1495              	.L125:
 1496 001a 00BF     	 .align 2
 1497              	.L124:
 1498 001c 00000000 	 .word udd_g_ctrlreq
 1499 0020 00000000 	 .word udd_set_address
 1500              	 .cfi_endproc
 1501              	.LFE90:
 1503              	 .section .text.udc_req_std_dev_set_address,"ax",%progbits
 1504              	 .align 1
 1505              	 .syntax unified
 1506              	 .thumb
 1507              	 .thumb_func
 1508              	 .fpu softvfp
 1510              	udc_req_std_dev_set_address:
 1511              	.LFB91:
 582:.././hal/sam3u1c/udc.c **** 
 583:.././hal/sam3u1c/udc.c **** /**
 584:.././hal/sam3u1c/udc.c ****  * \brief Standard device request to set device address
 585:.././hal/sam3u1c/udc.c ****  *
 586:.././hal/sam3u1c/udc.c ****  * \return true if success
 587:.././hal/sam3u1c/udc.c ****  */
 588:.././hal/sam3u1c/udc.c **** static bool udc_req_std_dev_set_address(void)
 589:.././hal/sam3u1c/udc.c **** {
 1512              	 .loc 1 589 1
 1513              	 .cfi_startproc
 1514              	 
 1515              	 
 1516              	 
 1517 0000 80B4     	 push {r7}
 1518              	.LCFI62:
 1519              	 .cfi_def_cfa_offset 4
 1520              	 .cfi_offset 7,-4
 1521 0002 00AF     	 add r7,sp,#0
 1522              	.LCFI63:
 1523              	 .cfi_def_cfa_register 7
 590:.././hal/sam3u1c/udc.c **** 	if (udd_g_ctrlreq.req.wLength) {
 1524              	 .loc 1 590 23
 1525 0004 064B     	 ldr r3,.L129
 1526 0006 DB88     	 ldrh r3,[r3,#6]
 1527              	 .loc 1 590 5
 1528 0008 002B     	 cmp r3,#0
 1529 000a 01D0     	 beq .L127
 591:.././hal/sam3u1c/udc.c **** 		return false;
 1530              	 .loc 1 591 10
 1531 000c 0023     	 movs r3,#0
 1532 000e 03E0     	 b .L128
 1533              	.L127:
 592:.././hal/sam3u1c/udc.c **** 	}
 593:.././hal/sam3u1c/udc.c **** 
 594:.././hal/sam3u1c/udc.c **** 	// The address must be changed at the end of setup request after the handshake
 595:.././hal/sam3u1c/udc.c **** 	// then we use a callback to change address
 596:.././hal/sam3u1c/udc.c **** 	udd_g_ctrlreq.callback = udc_valid_address;
 1534              	 .loc 1 596 25
 1535 0010 034B     	 ldr r3,.L129
 1536 0012 044A     	 ldr r2,.L129+4
 1537 0014 1A61     	 str r2,[r3,#16]
 597:.././hal/sam3u1c/udc.c **** 	return true;
 1538              	 .loc 1 597 9
 1539 0016 0123     	 movs r3,#1
 1540              	.L128:
 598:.././hal/sam3u1c/udc.c **** }
 1541              	 .loc 1 598 1
 1542 0018 1846     	 mov r0,r3
 1543 001a BD46     	 mov sp,r7
 1544              	.LCFI64:
 1545              	 .cfi_def_cfa_register 13
 1546              	 
 1547 001c 80BC     	 pop {r7}
 1548              	.LCFI65:
 1549              	 .cfi_restore 7
 1550              	 .cfi_def_cfa_offset 0
 1551 001e 7047     	 bx lr
 1552              	.L130:
 1553              	 .align 2
 1554              	.L129:
 1555 0020 00000000 	 .word udd_g_ctrlreq
 1556 0024 00000000 	 .word udc_valid_address
 1557              	 .cfi_endproc
 1558              	.LFE91:
 1560              	 .section .text.udc_req_std_dev_get_str_desc,"ax",%progbits
 1561              	 .align 1
 1562              	 .syntax unified
 1563              	 .thumb
 1564              	 .thumb_func
 1565              	 .fpu softvfp
 1567              	udc_req_std_dev_get_str_desc:
 1568              	.LFB92:
 599:.././hal/sam3u1c/udc.c **** 
 600:.././hal/sam3u1c/udc.c **** /**
 601:.././hal/sam3u1c/udc.c ****  * \brief Standard device request to get device string descriptor
 602:.././hal/sam3u1c/udc.c ****  *
 603:.././hal/sam3u1c/udc.c ****  * \return true if success
 604:.././hal/sam3u1c/udc.c ****  */
 605:.././hal/sam3u1c/udc.c **** static bool udc_req_std_dev_get_str_desc(void)
 606:.././hal/sam3u1c/udc.c **** {
 1569              	 .loc 1 606 1
 1570              	 .cfi_startproc
 1571              	 
 1572              	 
 1573 0000 80B5     	 push {r7,lr}
 1574              	.LCFI66:
 1575              	 .cfi_def_cfa_offset 8
 1576              	 .cfi_offset 7,-8
 1577              	 .cfi_offset 14,-4
 1578 0002 84B0     	 sub sp,sp,#16
 1579              	.LCFI67:
 1580              	 .cfi_def_cfa_offset 24
 1581 0004 00AF     	 add r7,sp,#0
 1582              	.LCFI68:
 1583              	 .cfi_def_cfa_register 7
 607:.././hal/sam3u1c/udc.c **** 	uint8_t i;
 608:.././hal/sam3u1c/udc.c **** 	const uint8_t *str;
 609:.././hal/sam3u1c/udc.c **** 	uint8_t str_length = 0;
 1584              	 .loc 1 609 10
 1585 0006 0023     	 movs r3,#0
 1586 0008 FB71     	 strb r3,[r7,#7]
 610:.././hal/sam3u1c/udc.c **** 
 611:.././hal/sam3u1c/udc.c **** 	// Link payload pointer to the string corresponding at request
 612:.././hal/sam3u1c/udc.c **** 	switch (udd_g_ctrlreq.req.wValue & 0xff) {
 1587              	 .loc 1 612 27
 1588 000a 294B     	 ldr r3,.L143
 1589 000c 5B88     	 ldrh r3,[r3,#2]
 1590              	 .loc 1 612 35
 1591 000e DBB2     	 uxtb r3,r3
 1592 0010 032B     	 cmp r3,#3
 1593 0012 20D8     	 bhi .L132
 1594 0014 01A2     	 adr r2,.L134
 1595 0016 52F823F0 	 ldr pc,[r2,r3,lsl#2]
 1596 001a 00BF     	 .p2align 2
 1597              	.L134:
 1598 001c 2D000000 	 .word .L137+1
 1599 0020 37000000 	 .word .L136+1
 1600 0024 41000000 	 .word .L135+1
 1601 0028 4B000000 	 .word .L133+1
 1602              	 .p2align 1
 1603              	.L137:
 613:.././hal/sam3u1c/udc.c **** 	case 0:
 614:.././hal/sam3u1c/udc.c **** 		udd_set_setup_payload((uint8_t *) &udc_string_desc_languageid,
 1604              	 .loc 1 614 3
 1605 002c 0421     	 movs r1,#4
 1606 002e 2148     	 ldr r0,.L143+4
 1607 0030 214B     	 ldr r3,.L143+8
 1608 0032 9847     	 blx r3
 1609              	.LVL26:
 615:.././hal/sam3u1c/udc.c **** 				sizeof(udc_string_desc_languageid));
 616:.././hal/sam3u1c/udc.c **** 		break;
 1610              	 .loc 1 616 3
 1611 0034 11E0     	 b .L138
 1612              	.L136:
 617:.././hal/sam3u1c/udc.c **** 
 618:.././hal/sam3u1c/udc.c **** #ifdef USB_DEVICE_MANUFACTURE_NAME
 619:.././hal/sam3u1c/udc.c **** 	case 1:
 620:.././hal/sam3u1c/udc.c **** 		str_length = USB_DEVICE_MANUFACTURE_NAME_SIZE;
 1613              	 .loc 1 620 14
 1614 0036 1523     	 movs r3,#21
 1615 0038 FB71     	 strb r3,[r7,#7]
 621:.././hal/sam3u1c/udc.c **** 		str = udc_string_manufacturer_name;
 1616              	 .loc 1 621 7
 1617 003a 204B     	 ldr r3,.L143+12
 1618 003c BB60     	 str r3,[r7,#8]
 622:.././hal/sam3u1c/udc.c **** 		break;
 1619              	 .loc 1 622 3
 1620 003e 0CE0     	 b .L138
 1621              	.L135:
 623:.././hal/sam3u1c/udc.c **** #endif
 624:.././hal/sam3u1c/udc.c **** #ifdef USB_DEVICE_PRODUCT_NAME
 625:.././hal/sam3u1c/udc.c **** 	case 2:
 626:.././hal/sam3u1c/udc.c **** 		str_length = USB_DEVICE_PRODUCT_NAME_SIZE;
 1622              	 .loc 1 626 14
 1623 0040 1323     	 movs r3,#19
 1624 0042 FB71     	 strb r3,[r7,#7]
 627:.././hal/sam3u1c/udc.c **** 		str = udc_string_product_name;
 1625              	 .loc 1 627 7
 1626 0044 1E4B     	 ldr r3,.L143+16
 1627 0046 BB60     	 str r3,[r7,#8]
 628:.././hal/sam3u1c/udc.c **** 		break;
 1628              	 .loc 1 628 3
 1629 0048 07E0     	 b .L138
 1630              	.L133:
 629:.././hal/sam3u1c/udc.c **** #endif
 630:.././hal/sam3u1c/udc.c **** #if defined USB_DEVICE_SERIAL_NAME || defined USB_DEVICE_GET_SERIAL_NAME_POINTER
 631:.././hal/sam3u1c/udc.c **** 	case 3:
 632:.././hal/sam3u1c/udc.c **** 		str_length = USB_DEVICE_SERIAL_NAME_SIZE;
 1631              	 .loc 1 632 14
 1632 004a 2023     	 movs r3,#32
 1633 004c FB71     	 strb r3,[r7,#7]
 633:.././hal/sam3u1c/udc.c **** 		str = udc_get_string_serial_name();
 1634              	 .loc 1 633 9
 1635 004e 1D4B     	 ldr r3,.L143+20
 1636 0050 9847     	 blx r3
 1637              	.LVL27:
 1638 0052 B860     	 str r0,[r7,#8]
 634:.././hal/sam3u1c/udc.c **** 		break;
 1639              	 .loc 1 634 3
 1640 0054 01E0     	 b .L138
 1641              	.L132:
 635:.././hal/sam3u1c/udc.c **** #endif
 636:.././hal/sam3u1c/udc.c **** 	default:
 637:.././hal/sam3u1c/udc.c **** #ifdef UDC_GET_EXTRA_STRING
 638:.././hal/sam3u1c/udc.c **** 		if (UDC_GET_EXTRA_STRING()) {
 639:.././hal/sam3u1c/udc.c **** 			break;
 640:.././hal/sam3u1c/udc.c **** 		}
 641:.././hal/sam3u1c/udc.c **** #endif
 642:.././hal/sam3u1c/udc.c **** 		return false;
 1642              	 .loc 1 642 10
 1643 0056 0023     	 movs r3,#0
 1644 0058 26E0     	 b .L139
 1645              	.L138:
 643:.././hal/sam3u1c/udc.c **** 	}
 644:.././hal/sam3u1c/udc.c **** 
 645:.././hal/sam3u1c/udc.c **** 	if (str_length) {
 1646              	 .loc 1 645 5
 1647 005a FB79     	 ldrb r3,[r7,#7]
 1648 005c 002B     	 cmp r3,#0
 1649 005e 22D0     	 beq .L140
 646:.././hal/sam3u1c/udc.c **** 		for(i = 0; i < str_length; i++) {
 1650              	 .loc 1 646 9
 1651 0060 0023     	 movs r3,#0
 1652 0062 FB73     	 strb r3,[r7,#15]
 1653              	 .loc 1 646 3
 1654 0064 0DE0     	 b .L141
 1655              	.L142:
 647:.././hal/sam3u1c/udc.c **** 			udc_string_desc.string[i] = cpu_to_le16((le16_t)str[i]);
 1656              	 .loc 1 647 32 discriminator 3
 1657 0066 FB7B     	 ldrb r3,[r7,#15]
 1658 0068 BA68     	 ldr r2,[r7,#8]
 1659 006a 1344     	 add r3,r3,r2
 1660 006c 1A78     	 ldrb r2,[r3]
 1661              	 .loc 1 647 26 discriminator 3
 1662 006e FB7B     	 ldrb r3,[r7,#15]
 1663              	 .loc 1 647 32 discriminator 3
 1664 0070 91B2     	 uxth r1,r2
 1665              	 .loc 1 647 30 discriminator 3
 1666 0072 154A     	 ldr r2,.L143+24
 1667 0074 5B00     	 lsls r3,r3,#1
 1668 0076 1344     	 add r3,r3,r2
 1669 0078 0A46     	 mov r2,r1
 1670 007a 5A80     	 strh r2,[r3,#2]
 646:.././hal/sam3u1c/udc.c **** 		for(i = 0; i < str_length; i++) {
 1671              	 .loc 1 646 31 discriminator 3
 1672 007c FB7B     	 ldrb r3,[r7,#15]
 1673 007e 0133     	 adds r3,r3,#1
 1674 0080 FB73     	 strb r3,[r7,#15]
 1675              	.L141:
 646:.././hal/sam3u1c/udc.c **** 		for(i = 0; i < str_length; i++) {
 1676              	 .loc 1 646 3 discriminator 1
 1677 0082 FA7B     	 ldrb r2,[r7,#15]
 1678 0084 FB79     	 ldrb r3,[r7,#7]
 1679 0086 9A42     	 cmp r2,r3
 1680 0088 EDD3     	 bcc .L142
 648:.././hal/sam3u1c/udc.c **** 		}
 649:.././hal/sam3u1c/udc.c **** 
 650:.././hal/sam3u1c/udc.c **** 		udc_string_desc.header.bLength = 2 + (str_length) * 2;
 1681              	 .loc 1 650 34
 1682 008a FB79     	 ldrb r3,[r7,#7]
 1683 008c 0133     	 adds r3,r3,#1
 1684 008e DBB2     	 uxtb r3,r3
 1685 0090 5B00     	 lsls r3,r3,#1
 1686 0092 DAB2     	 uxtb r2,r3
 1687 0094 0C4B     	 ldr r3,.L143+24
 1688 0096 1A70     	 strb r2,[r3]
 651:.././hal/sam3u1c/udc.c **** 		udd_set_setup_payload(
 652:.././hal/sam3u1c/udc.c **** 			(uint8_t *) &udc_string_desc,
 653:.././hal/sam3u1c/udc.c **** 			udc_string_desc.header.bLength);
 1689              	 .loc 1 653 26
 1690 0098 0B4B     	 ldr r3,.L143+24
 1691 009a 1B78     	 ldrb r3,[r3]
 651:.././hal/sam3u1c/udc.c **** 		udd_set_setup_payload(
 1692              	 .loc 1 651 3
 1693 009c 9BB2     	 uxth r3,r3
 1694 009e 1946     	 mov r1,r3
 1695 00a0 0948     	 ldr r0,.L143+24
 1696 00a2 054B     	 ldr r3,.L143+8
 1697 00a4 9847     	 blx r3
 1698              	.LVL28:
 1699              	.L140:
 654:.././hal/sam3u1c/udc.c **** 	}
 655:.././hal/sam3u1c/udc.c **** 
 656:.././hal/sam3u1c/udc.c **** 	return true;
 1700              	 .loc 1 656 9
 1701 00a6 0123     	 movs r3,#1
 1702              	.L139:
 657:.././hal/sam3u1c/udc.c **** }
 1703              	 .loc 1 657 1
 1704 00a8 1846     	 mov r0,r3
 1705 00aa 1037     	 adds r7,r7,#16
 1706              	.LCFI69:
 1707              	 .cfi_def_cfa_offset 8
 1708 00ac BD46     	 mov sp,r7
 1709              	.LCFI70:
 1710              	 .cfi_def_cfa_register 13
 1711              	 
 1712 00ae 80BD     	 pop {r7,pc}
 1713              	.L144:
 1714              	 .align 2
 1715              	.L143:
 1716 00b0 00000000 	 .word udd_g_ctrlreq
 1717 00b4 00000000 	 .word udc_string_desc_languageid
 1718 00b8 00000000 	 .word udd_set_setup_payload
 1719 00bc 00000000 	 .word udc_string_manufacturer_name
 1720 00c0 00000000 	 .word udc_string_product_name
 1721 00c4 00000000 	 .word udc_get_string_serial_name
 1722 00c8 00000000 	 .word udc_string_desc
 1723              	 .cfi_endproc
 1724              	.LFE92:
 1726              	 .global BOS_DESC
 1727              	 .section .rodata.BOS_DESC,"a"
 1728              	 .align 2
 1731              	BOS_DESC:
 1732 0000 050F2100 	 .ascii "\005\017!\000\001\034\020\005\000\337`\335\330\211E"
 1732      011C1005 
 1732      00DF60DD 
 1732      D88945
 1733 000f C74C9CD2 	 .ascii "\307L\234\322e\235\236d\212\237\000\000\003\006\236"
 1733      659D9E64 
 1733      8A9F0000 
 1733      03069E
 1734 001e 000100   	 .ascii "\000\001\000"
 1735              	 .section .text.udc_req_std_dev_get_descriptor,"ax",%progbits
 1736              	 .align 1
 1737              	 .syntax unified
 1738              	 .thumb
 1739              	 .thumb_func
 1740              	 .fpu softvfp
 1742              	udc_req_std_dev_get_descriptor:
 1743              	.LFB93:
 658:.././hal/sam3u1c/udc.c **** //0xC0 bRequestType, 0x01 bRequest, 0x00 wValue, 0x07 wIndex
 659:.././hal/sam3u1c/udc.c **** 
 660:.././hal/sam3u1c/udc.c **** /**
 661:.././hal/sam3u1c/udc.c ****  * \brief Standard device request to get descriptors about USB device
 662:.././hal/sam3u1c/udc.c ****  *
 663:.././hal/sam3u1c/udc.c ****  * \return true if success
 664:.././hal/sam3u1c/udc.c ****  */
 665:.././hal/sam3u1c/udc.c **** 	const uint8_t BOS_DESC[] = {
 666:.././hal/sam3u1c/udc.c **** 		//bos descriptor, technically a USB3 thing, but also 2.1 which kind of exists
 667:.././hal/sam3u1c/udc.c **** 		0x05,  // bos length
 668:.././hal/sam3u1c/udc.c **** 		0x0F,  // bos request type
 669:.././hal/sam3u1c/udc.c **** 		0x21, 0x00, // wTotalLength: 0x05 + 0x1C (WinUSB descriptor length)
 670:.././hal/sam3u1c/udc.c **** 		0x01,       // # of platform specific descriptors. 1 (WinUSB) in our case
 671:.././hal/sam3u1c/udc.c **** 		
 672:.././hal/sam3u1c/udc.c **** 		// WinUSB descriptor
 673:.././hal/sam3u1c/udc.c **** 		0x1C, // Descriptor length
 674:.././hal/sam3u1c/udc.c **** 		0x10, // Descriptor type (Device capability)
 675:.././hal/sam3u1c/udc.c **** 		0x05, // Capability type (Platform)
 676:.././hal/sam3u1c/udc.c **** 		0x00, // Reserved byte
 677:.././hal/sam3u1c/udc.c **** 
 678:.././hal/sam3u1c/udc.c **** 		// MS GUID (D8DD60DF-4589-4CC7-9CD2-659D9E648A9F)- some mixed endian bs
 679:.././hal/sam3u1c/udc.c **** 		0xDF, 0x60, 0xDD, 0xD8, 
 680:.././hal/sam3u1c/udc.c **** 		0x89, 0x45, 0xC7, 0x4C, 
 681:.././hal/sam3u1c/udc.c **** 		0x9C, 0xD2, 0x65, 0x9D, 
 682:.././hal/sam3u1c/udc.c **** 		0x9E ,0x64, 0x8A, 0x9F,
 683:.././hal/sam3u1c/udc.c **** 
 684:.././hal/sam3u1c/udc.c **** 		0x00, 0x00, 0x03, 0x06, // Min Windows version, 8.1, so should work on that and above
 685:.././hal/sam3u1c/udc.c **** 
 686:.././hal/sam3u1c/udc.c **** 		// Windows will ask for another descriptor based on this info
 687:.././hal/sam3u1c/udc.c **** 		WINUSB_PLATFORM_DESCRIPTOR_LENGTH, 0x00, //length of other descriptor
 688:.././hal/sam3u1c/udc.c **** 		0x01, // when asking for MS 2.0 descriptor, will do bmRequestType = 0xC0, bRequest = this (0x01)
 689:.././hal/sam3u1c/udc.c **** 		0x00  // if non 0, Windows will send this before asking for the next descriptor
 690:.././hal/sam3u1c/udc.c **** 		};
 691:.././hal/sam3u1c/udc.c **** static bool udc_req_std_dev_get_descriptor(void)
 692:.././hal/sam3u1c/udc.c **** {
 1744              	 .loc 1 692 1
 1745              	 .cfi_startproc
 1746              	 
 1747              	 
 1748 0000 80B5     	 push {r7,lr}
 1749              	.LCFI71:
 1750              	 .cfi_def_cfa_offset 8
 1751              	 .cfi_offset 7,-8
 1752              	 .cfi_offset 14,-4
 1753 0002 82B0     	 sub sp,sp,#8
 1754              	.LCFI72:
 1755              	 .cfi_def_cfa_offset 16
 1756 0004 00AF     	 add r7,sp,#0
 1757              	.LCFI73:
 1758              	 .cfi_def_cfa_register 7
 693:.././hal/sam3u1c/udc.c **** 	uint8_t conf_num;
 694:.././hal/sam3u1c/udc.c **** 
 695:.././hal/sam3u1c/udc.c **** 
 696:.././hal/sam3u1c/udc.c **** 	conf_num = udd_g_ctrlreq.req.wValue & 0xff;
 1759              	 .loc 1 696 30
 1760 0006 7F4B     	 ldr r3,.L169
 1761 0008 5B88     	 ldrh r3,[r3,#2]
 1762              	 .loc 1 696 11
 1763 000a FB71     	 strb r3,[r7,#7]
 697:.././hal/sam3u1c/udc.c **** 
 698:.././hal/sam3u1c/udc.c **** 	// Check descriptor ID
 699:.././hal/sam3u1c/udc.c **** 	switch ((uint8_t) (udd_g_ctrlreq.req.wValue >> 8)) {
 1764              	 .loc 1 699 38
 1765 000c 7D4B     	 ldr r3,.L169
 1766 000e 5B88     	 ldrh r3,[r3,#2]
 1767              	 .loc 1 699 10
 1768 0010 1B0A     	 lsrs r3,r3,#8
 1769 0012 9BB2     	 uxth r3,r3
 1770 0014 DBB2     	 uxtb r3,r3
 1771 0016 013B     	 subs r3,r3,#1
 1772 0018 0E2B     	 cmp r3,#14
 1773 001a 00F2E080 	 bhi .L146
 1774 001e 01A2     	 adr r2,.L148
 1775 0020 52F823F0 	 ldr pc,[r2,r3,lsl#2]
 1776              	 .p2align 2
 1777              	.L148:
 1778 0024 61000000 	 .word .L153+1
 1779 0028 B1000000 	 .word .L152+1
 1780 002c CB010000 	 .word .L151+1
 1781 0030 DF010000 	 .word .L146+1
 1782 0034 DF010000 	 .word .L146+1
 1783 0038 2B010000 	 .word .L150+1
 1784 003c 41010000 	 .word .L149+1
 1785 0040 DF010000 	 .word .L146+1
 1786 0044 DF010000 	 .word .L146+1
 1787 0048 DF010000 	 .word .L146+1
 1788 004c DF010000 	 .word .L146+1
 1789 0050 DF010000 	 .word .L146+1
 1790 0054 DF010000 	 .word .L146+1
 1791 0058 DF010000 	 .word .L146+1
 1792 005c C1010000 	 .word .L147+1
 1793              	 .p2align 1
 1794              	.L153:
 700:.././hal/sam3u1c/udc.c **** 	case USB_DT_DEVICE:
 701:.././hal/sam3u1c/udc.c **** 		// Device descriptor requested
 702:.././hal/sam3u1c/udc.c **** #ifdef USB_DEVICE_HS_SUPPORT
 703:.././hal/sam3u1c/udc.c **** 		if (!udd_is_high_speed()) {
 1795              	 .loc 1 703 8
 1796 0060 694B     	 ldr r3,.L169+4
 1797 0062 9847     	 blx r3
 1798              	.LVL29:
 1799 0064 0346     	 mov r3,r0
 1800              	 .loc 1 703 7
 1801 0066 83F00103 	 eor r3,r3,#1
 1802 006a DBB2     	 uxtb r3,r3
 1803              	 .loc 1 703 6
 1804 006c 002B     	 cmp r3,#0
 1805 006e 0AD0     	 beq .L154
 704:.././hal/sam3u1c/udc.c **** 			//(udc_config.confdev_hs)->bcdUSB = 0x0210;
 705:.././hal/sam3u1c/udc.c **** 			udd_set_setup_payload(
 706:.././hal/sam3u1c/udc.c **** 				(uint8_t *) udc_config.confdev_hs,
 1806              	 .loc 1 706 27
 1807 0070 664B     	 ldr r3,.L169+8
 1808 0072 9A68     	 ldr r2,[r3,#8]
 707:.././hal/sam3u1c/udc.c **** 				udc_config.confdev_hs->bLength);
 1809              	 .loc 1 707 15
 1810 0074 654B     	 ldr r3,.L169+8
 1811 0076 9B68     	 ldr r3,[r3,#8]
 1812              	 .loc 1 707 26
 1813 0078 1B78     	 ldrb r3,[r3]
 705:.././hal/sam3u1c/udc.c **** 				(uint8_t *) udc_config.confdev_hs,
 1814              	 .loc 1 705 4
 1815 007a 9BB2     	 uxth r3,r3
 1816 007c 1946     	 mov r1,r3
 1817 007e 1046     	 mov r0,r2
 1818 0080 634B     	 ldr r3,.L169+12
 1819 0082 9847     	 blx r3
 1820              	.LVL30:
 708:.././hal/sam3u1c/udc.c **** 		} else
 709:.././hal/sam3u1c/udc.c **** #endif
 710:.././hal/sam3u1c/udc.c **** 		{
 711:.././hal/sam3u1c/udc.c **** 			// Windows will only ask for BOS if we set this to USB 2.1
 712:.././hal/sam3u1c/udc.c **** 			(udc_config.confdev_lsfs)->bcdUSB = 0x0210;
 713:.././hal/sam3u1c/udc.c **** 			udd_set_setup_payload(
 714:.././hal/sam3u1c/udc.c **** 				(uint8_t *) udc_config.confdev_lsfs,
 715:.././hal/sam3u1c/udc.c **** 				udc_config.confdev_lsfs->bLength);
 716:.././hal/sam3u1c/udc.c **** 		}
 717:.././hal/sam3u1c/udc.c **** 		break;
 1821              	 .loc 1 717 3
 1822 0084 AEE0     	 b .L156
 1823              	.L154:
 712:.././hal/sam3u1c/udc.c **** 			udd_set_setup_payload(
 1824              	 .loc 1 712 15
 1825 0086 614B     	 ldr r3,.L169+8
 1826 0088 1B68     	 ldr r3,[r3]
 712:.././hal/sam3u1c/udc.c **** 			udd_set_setup_payload(
 1827              	 .loc 1 712 38
 1828 008a 0022     	 movs r2,#0
 1829 008c 42F01002 	 orr r2,r2,#16
 1830 0090 9A70     	 strb r2,[r3,#2]
 1831 0092 0022     	 movs r2,#0
 1832 0094 42F00202 	 orr r2,r2,#2
 1833 0098 DA70     	 strb r2,[r3,#3]
 714:.././hal/sam3u1c/udc.c **** 				udc_config.confdev_lsfs->bLength);
 1834              	 .loc 1 714 27
 1835 009a 5C4B     	 ldr r3,.L169+8
 1836 009c 1A68     	 ldr r2,[r3]
 715:.././hal/sam3u1c/udc.c **** 		}
 1837              	 .loc 1 715 15
 1838 009e 5B4B     	 ldr r3,.L169+8
 1839 00a0 1B68     	 ldr r3,[r3]
 715:.././hal/sam3u1c/udc.c **** 		}
 1840              	 .loc 1 715 28
 1841 00a2 1B78     	 ldrb r3,[r3]
 713:.././hal/sam3u1c/udc.c **** 				(uint8_t *) udc_config.confdev_lsfs,
 1842              	 .loc 1 713 4
 1843 00a4 9BB2     	 uxth r3,r3
 1844 00a6 1946     	 mov r1,r3
 1845 00a8 1046     	 mov r0,r2
 1846 00aa 594B     	 ldr r3,.L169+12
 1847 00ac 9847     	 blx r3
 1848              	.LVL31:
 1849              	 .loc 1 717 3
 1850 00ae 99E0     	 b .L156
 1851              	.L152:
 718:.././hal/sam3u1c/udc.c **** 
 719:.././hal/sam3u1c/udc.c **** 	case USB_DT_CONFIGURATION:
 720:.././hal/sam3u1c/udc.c **** 		// Configuration descriptor requested
 721:.././hal/sam3u1c/udc.c **** #ifdef USB_DEVICE_HS_SUPPORT
 722:.././hal/sam3u1c/udc.c **** 		if (udd_is_high_speed()) {
 1852              	 .loc 1 722 7
 1853 00b0 554B     	 ldr r3,.L169+4
 1854 00b2 9847     	 blx r3
 1855              	.LVL32:
 1856 00b4 0346     	 mov r3,r0
 1857              	 .loc 1 722 6
 1858 00b6 002B     	 cmp r3,#0
 1859 00b8 19D0     	 beq .L157
 723:.././hal/sam3u1c/udc.c **** 			// HS descriptor
 724:.././hal/sam3u1c/udc.c **** 			if (conf_num >= udc_config.confdev_hs->
 1860              	 .loc 1 724 30
 1861 00ba 544B     	 ldr r3,.L169+8
 1862 00bc 9B68     	 ldr r3,[r3,#8]
 1863              	 .loc 1 724 41
 1864 00be 5B7C     	 ldrb r3,[r3,#17]
 1865              	 .loc 1 724 7
 1866 00c0 FA79     	 ldrb r2,[r7,#7]
 1867 00c2 9A42     	 cmp r2,r3
 1868 00c4 01D3     	 bcc .L158
 725:.././hal/sam3u1c/udc.c **** 					bNumConfigurations) {
 726:.././hal/sam3u1c/udc.c **** 				return false;
 1869              	 .loc 1 726 12
 1870 00c6 0023     	 movs r3,#0
 1871 00c8 97E0     	 b .L159
 1872              	.L158:
 727:.././hal/sam3u1c/udc.c **** 			}
 728:.././hal/sam3u1c/udc.c **** 			udd_set_setup_payload(
 729:.././hal/sam3u1c/udc.c **** 				(uint8_t *)udc_config.conf_hs[conf_num].desc,
 1873              	 .loc 1 729 26
 1874 00ca 504B     	 ldr r3,.L169+8
 1875 00cc 1A69     	 ldr r2,[r3,#16]
 1876              	 .loc 1 729 34
 1877 00ce FB79     	 ldrb r3,[r7,#7]
 1878 00d0 DB00     	 lsls r3,r3,#3
 1879 00d2 1344     	 add r3,r3,r2
 1880              	 .loc 1 729 44
 1881 00d4 1868     	 ldr r0,[r3]
 730:.././hal/sam3u1c/udc.c **** 				le16_to_cpu(udc_config.conf_hs[conf_num].desc->wTotalLength));
 1882              	 .loc 1 730 5
 1883 00d6 4D4B     	 ldr r3,.L169+8
 1884 00d8 1A69     	 ldr r2,[r3,#16]
 1885 00da FB79     	 ldrb r3,[r7,#7]
 1886 00dc DB00     	 lsls r3,r3,#3
 1887 00de 1344     	 add r3,r3,r2
 1888 00e0 1B68     	 ldr r3,[r3]
 728:.././hal/sam3u1c/udc.c **** 				(uint8_t *)udc_config.conf_hs[conf_num].desc,
 1889              	 .loc 1 728 4
 1890 00e2 5B88     	 ldrh r3,[r3,#2]
 1891 00e4 9BB2     	 uxth r3,r3
 1892 00e6 1946     	 mov r1,r3
 1893 00e8 494B     	 ldr r3,.L169+12
 1894 00ea 9847     	 blx r3
 1895              	.LVL33:
 1896 00ec 18E0     	 b .L160
 1897              	.L157:
 731:.././hal/sam3u1c/udc.c **** 		} else
 732:.././hal/sam3u1c/udc.c **** #endif
 733:.././hal/sam3u1c/udc.c **** 		{
 734:.././hal/sam3u1c/udc.c **** 			// FS descriptor
 735:.././hal/sam3u1c/udc.c **** 			if (conf_num >= udc_config.confdev_lsfs->
 1898              	 .loc 1 735 30
 1899 00ee 474B     	 ldr r3,.L169+8
 1900 00f0 1B68     	 ldr r3,[r3]
 1901              	 .loc 1 735 43
 1902 00f2 5B7C     	 ldrb r3,[r3,#17]
 1903              	 .loc 1 735 7
 1904 00f4 FA79     	 ldrb r2,[r7,#7]
 1905 00f6 9A42     	 cmp r2,r3
 1906 00f8 01D3     	 bcc .L161
 736:.././hal/sam3u1c/udc.c **** 					bNumConfigurations) {
 737:.././hal/sam3u1c/udc.c **** 				return false;
 1907              	 .loc 1 737 12
 1908 00fa 0023     	 movs r3,#0
 1909 00fc 7DE0     	 b .L159
 1910              	.L161:
 738:.././hal/sam3u1c/udc.c **** 			}
 739:.././hal/sam3u1c/udc.c **** 			udd_set_setup_payload(
 740:.././hal/sam3u1c/udc.c **** 				(uint8_t *)udc_config.conf_lsfs[conf_num].desc,
 1911              	 .loc 1 740 26
 1912 00fe 434B     	 ldr r3,.L169+8
 1913 0100 5A68     	 ldr r2,[r3,#4]
 1914              	 .loc 1 740 36
 1915 0102 FB79     	 ldrb r3,[r7,#7]
 1916 0104 DB00     	 lsls r3,r3,#3
 1917 0106 1344     	 add r3,r3,r2
 1918              	 .loc 1 740 46
 1919 0108 1868     	 ldr r0,[r3]
 741:.././hal/sam3u1c/udc.c **** 				le16_to_cpu(udc_config.conf_lsfs[conf_num].desc->wTotalLength));
 1920              	 .loc 1 741 5
 1921 010a 404B     	 ldr r3,.L169+8
 1922 010c 5A68     	 ldr r2,[r3,#4]
 1923 010e FB79     	 ldrb r3,[r7,#7]
 1924 0110 DB00     	 lsls r3,r3,#3
 1925 0112 1344     	 add r3,r3,r2
 1926 0114 1B68     	 ldr r3,[r3]
 739:.././hal/sam3u1c/udc.c **** 				(uint8_t *)udc_config.conf_lsfs[conf_num].desc,
 1927              	 .loc 1 739 4
 1928 0116 5B88     	 ldrh r3,[r3,#2]
 1929 0118 9BB2     	 uxth r3,r3
 1930 011a 1946     	 mov r1,r3
 1931 011c 3C4B     	 ldr r3,.L169+12
 1932 011e 9847     	 blx r3
 1933              	.LVL34:
 1934              	.L160:
 742:.././hal/sam3u1c/udc.c **** 		}
 743:.././hal/sam3u1c/udc.c **** 		((usb_conf_desc_t *) udd_g_ctrlreq.payload)->bDescriptorType =
 1935              	 .loc 1 743 37
 1936 0120 384B     	 ldr r3,.L169
 1937 0122 9B68     	 ldr r3,[r3,#8]
 1938              	 .loc 1 743 64
 1939 0124 0222     	 movs r2,#2
 1940 0126 5A70     	 strb r2,[r3,#1]
 744:.././hal/sam3u1c/udc.c **** 				USB_DT_CONFIGURATION;
 745:.././hal/sam3u1c/udc.c **** 		break;
 1941              	 .loc 1 745 3
 1942 0128 5CE0     	 b .L156
 1943              	.L150:
 746:.././hal/sam3u1c/udc.c **** 
 747:.././hal/sam3u1c/udc.c **** #ifdef USB_DEVICE_HS_SUPPORT
 748:.././hal/sam3u1c/udc.c **** 	case USB_DT_DEVICE_QUALIFIER:
 749:.././hal/sam3u1c/udc.c **** 		// Device qualifier descriptor requested
 750:.././hal/sam3u1c/udc.c **** 		udd_set_setup_payload( (uint8_t *) udc_config.qualifier,
 1944              	 .loc 1 750 48
 1945 012a 384B     	 ldr r3,.L169+8
 1946 012c DA68     	 ldr r2,[r3,#12]
 751:.././hal/sam3u1c/udc.c **** 				udc_config.qualifier->bLength);
 1947              	 .loc 1 751 15
 1948 012e 374B     	 ldr r3,.L169+8
 1949 0130 DB68     	 ldr r3,[r3,#12]
 1950              	 .loc 1 751 25
 1951 0132 1B78     	 ldrb r3,[r3]
 750:.././hal/sam3u1c/udc.c **** 				udc_config.qualifier->bLength);
 1952              	 .loc 1 750 3
 1953 0134 9BB2     	 uxth r3,r3
 1954 0136 1946     	 mov r1,r3
 1955 0138 1046     	 mov r0,r2
 1956 013a 354B     	 ldr r3,.L169+12
 1957 013c 9847     	 blx r3
 1958              	.LVL35:
 752:.././hal/sam3u1c/udc.c **** 		break;
 1959              	 .loc 1 752 3
 1960 013e 51E0     	 b .L156
 1961              	.L149:
 753:.././hal/sam3u1c/udc.c **** 
 754:.././hal/sam3u1c/udc.c **** 	case USB_DT_OTHER_SPEED_CONFIGURATION:
 755:.././hal/sam3u1c/udc.c **** 		// Other configuration descriptor requested
 756:.././hal/sam3u1c/udc.c **** 		if (!udd_is_high_speed()) {
 1962              	 .loc 1 756 8
 1963 0140 314B     	 ldr r3,.L169+4
 1964 0142 9847     	 blx r3
 1965              	.LVL36:
 1966 0144 0346     	 mov r3,r0
 1967              	 .loc 1 756 7
 1968 0146 83F00103 	 eor r3,r3,#1
 1969 014a DBB2     	 uxtb r3,r3
 1970              	 .loc 1 756 6
 1971 014c 002B     	 cmp r3,#0
 1972 014e 19D0     	 beq .L162
 757:.././hal/sam3u1c/udc.c **** 			// HS descriptor
 758:.././hal/sam3u1c/udc.c **** 			if (conf_num >= udc_config.confdev_hs->
 1973              	 .loc 1 758 30
 1974 0150 2E4B     	 ldr r3,.L169+8
 1975 0152 9B68     	 ldr r3,[r3,#8]
 1976              	 .loc 1 758 41
 1977 0154 5B7C     	 ldrb r3,[r3,#17]
 1978              	 .loc 1 758 7
 1979 0156 FA79     	 ldrb r2,[r7,#7]
 1980 0158 9A42     	 cmp r2,r3
 1981 015a 01D3     	 bcc .L163
 759:.././hal/sam3u1c/udc.c **** 					bNumConfigurations) {
 760:.././hal/sam3u1c/udc.c **** 				return false;
 1982              	 .loc 1 760 12
 1983 015c 0023     	 movs r3,#0
 1984 015e 4CE0     	 b .L159
 1985              	.L163:
 761:.././hal/sam3u1c/udc.c **** 			}
 762:.././hal/sam3u1c/udc.c **** 			udd_set_setup_payload(
 763:.././hal/sam3u1c/udc.c **** 				(uint8_t *)udc_config.conf_hs[conf_num].desc,
 1986              	 .loc 1 763 26
 1987 0160 2A4B     	 ldr r3,.L169+8
 1988 0162 1A69     	 ldr r2,[r3,#16]
 1989              	 .loc 1 763 34
 1990 0164 FB79     	 ldrb r3,[r7,#7]
 1991 0166 DB00     	 lsls r3,r3,#3
 1992 0168 1344     	 add r3,r3,r2
 1993              	 .loc 1 763 44
 1994 016a 1868     	 ldr r0,[r3]
 764:.././hal/sam3u1c/udc.c **** 				le16_to_cpu(udc_config.conf_hs[conf_num].desc->wTotalLength));
 1995              	 .loc 1 764 5
 1996 016c 274B     	 ldr r3,.L169+8
 1997 016e 1A69     	 ldr r2,[r3,#16]
 1998 0170 FB79     	 ldrb r3,[r7,#7]
 1999 0172 DB00     	 lsls r3,r3,#3
 2000 0174 1344     	 add r3,r3,r2
 2001 0176 1B68     	 ldr r3,[r3]
 762:.././hal/sam3u1c/udc.c **** 				(uint8_t *)udc_config.conf_hs[conf_num].desc,
 2002              	 .loc 1 762 4
 2003 0178 5B88     	 ldrh r3,[r3,#2]
 2004 017a 9BB2     	 uxth r3,r3
 2005 017c 1946     	 mov r1,r3
 2006 017e 244B     	 ldr r3,.L169+12
 2007 0180 9847     	 blx r3
 2008              	.LVL37:
 2009 0182 18E0     	 b .L164
 2010              	.L162:
 765:.././hal/sam3u1c/udc.c **** 		} else {
 766:.././hal/sam3u1c/udc.c **** 			// FS descriptor
 767:.././hal/sam3u1c/udc.c **** 			if (conf_num >= udc_config.confdev_lsfs->
 2011              	 .loc 1 767 30
 2012 0184 214B     	 ldr r3,.L169+8
 2013 0186 1B68     	 ldr r3,[r3]
 2014              	 .loc 1 767 43
 2015 0188 5B7C     	 ldrb r3,[r3,#17]
 2016              	 .loc 1 767 7
 2017 018a FA79     	 ldrb r2,[r7,#7]
 2018 018c 9A42     	 cmp r2,r3
 2019 018e 01D3     	 bcc .L165
 768:.././hal/sam3u1c/udc.c **** 					bNumConfigurations) {
 769:.././hal/sam3u1c/udc.c **** 				return false;
 2020              	 .loc 1 769 12
 2021 0190 0023     	 movs r3,#0
 2022 0192 32E0     	 b .L159
 2023              	.L165:
 770:.././hal/sam3u1c/udc.c **** 			}
 771:.././hal/sam3u1c/udc.c **** 			udd_set_setup_payload(
 772:.././hal/sam3u1c/udc.c **** 				(uint8_t *)udc_config.conf_lsfs[conf_num].desc,
 2024              	 .loc 1 772 26
 2025 0194 1D4B     	 ldr r3,.L169+8
 2026 0196 5A68     	 ldr r2,[r3,#4]
 2027              	 .loc 1 772 36
 2028 0198 FB79     	 ldrb r3,[r7,#7]
 2029 019a DB00     	 lsls r3,r3,#3
 2030 019c 1344     	 add r3,r3,r2
 2031              	 .loc 1 772 46
 2032 019e 1868     	 ldr r0,[r3]
 773:.././hal/sam3u1c/udc.c **** 				le16_to_cpu(udc_config.conf_lsfs[conf_num].desc->wTotalLength));
 2033              	 .loc 1 773 5
 2034 01a0 1A4B     	 ldr r3,.L169+8
 2035 01a2 5A68     	 ldr r2,[r3,#4]
 2036 01a4 FB79     	 ldrb r3,[r7,#7]
 2037 01a6 DB00     	 lsls r3,r3,#3
 2038 01a8 1344     	 add r3,r3,r2
 2039 01aa 1B68     	 ldr r3,[r3]
 771:.././hal/sam3u1c/udc.c **** 				(uint8_t *)udc_config.conf_lsfs[conf_num].desc,
 2040              	 .loc 1 771 4
 2041 01ac 5B88     	 ldrh r3,[r3,#2]
 2042 01ae 9BB2     	 uxth r3,r3
 2043 01b0 1946     	 mov r1,r3
 2044 01b2 174B     	 ldr r3,.L169+12
 2045 01b4 9847     	 blx r3
 2046              	.LVL38:
 2047              	.L164:
 774:.././hal/sam3u1c/udc.c **** 		}
 775:.././hal/sam3u1c/udc.c **** 		((usb_conf_desc_t *) udd_g_ctrlreq.payload)->bDescriptorType =
 2048              	 .loc 1 775 37
 2049 01b6 134B     	 ldr r3,.L169
 2050 01b8 9B68     	 ldr r3,[r3,#8]
 2051              	 .loc 1 775 64
 2052 01ba 0722     	 movs r2,#7
 2053 01bc 5A70     	 strb r2,[r3,#1]
 776:.././hal/sam3u1c/udc.c **** 				USB_DT_OTHER_SPEED_CONFIGURATION;
 777:.././hal/sam3u1c/udc.c **** 		break;
 2054              	 .loc 1 777 3
 2055 01be 11E0     	 b .L156
 2056              	.L147:
 778:.././hal/sam3u1c/udc.c **** #endif
 779:.././hal/sam3u1c/udc.c **** 	case USB_DT_BOS: //bos descriptor
 780:.././hal/sam3u1c/udc.c **** 		udd_set_setup_payload( (uint8_t *) BOS_DESC,
 2057              	 .loc 1 780 3
 2058 01c0 2121     	 movs r1,#33
 2059 01c2 1448     	 ldr r0,.L169+16
 2060 01c4 124B     	 ldr r3,.L169+12
 2061 01c6 9847     	 blx r3
 2062              	.LVL39:
 781:.././hal/sam3u1c/udc.c **** 			0x21);
 782:.././hal/sam3u1c/udc.c **** 		break;
 2063              	 .loc 1 782 3
 2064 01c8 0CE0     	 b .L156
 2065              	.L151:
 783:.././hal/sam3u1c/udc.c **** 
 784:.././hal/sam3u1c/udc.c **** 	case USB_DT_STRING:
 785:.././hal/sam3u1c/udc.c **** 		// String descriptor requested
 786:.././hal/sam3u1c/udc.c **** 		if (!udc_req_std_dev_get_str_desc()) {
 2066              	 .loc 1 786 8
 2067 01ca 134B     	 ldr r3,.L169+20
 2068 01cc 9847     	 blx r3
 2069              	.LVL40:
 2070 01ce 0346     	 mov r3,r0
 2071              	 .loc 1 786 7
 2072 01d0 83F00103 	 eor r3,r3,#1
 2073 01d4 DBB2     	 uxtb r3,r3
 2074              	 .loc 1 786 6
 2075 01d6 002B     	 cmp r3,#0
 2076 01d8 03D0     	 beq .L168
 787:.././hal/sam3u1c/udc.c **** 			return false;
 2077              	 .loc 1 787 11
 2078 01da 0023     	 movs r3,#0
 2079 01dc 0DE0     	 b .L159
 2080              	.L146:
 788:.././hal/sam3u1c/udc.c **** 		}
 789:.././hal/sam3u1c/udc.c **** 		break;
 790:.././hal/sam3u1c/udc.c **** 
 791:.././hal/sam3u1c/udc.c **** 	default:
 792:.././hal/sam3u1c/udc.c **** 		// Unknown descriptor requested
 793:.././hal/sam3u1c/udc.c **** 		return false;
 2081              	 .loc 1 793 10
 2082 01de 0023     	 movs r3,#0
 2083 01e0 0BE0     	 b .L159
 2084              	.L168:
 789:.././hal/sam3u1c/udc.c **** 
 2085              	 .loc 1 789 3
 2086 01e2 00BF     	 nop
 2087              	.L156:
 794:.././hal/sam3u1c/udc.c **** 	}
 795:.././hal/sam3u1c/udc.c **** 	// if the descriptor is larger than length requested, then reduce it
 796:.././hal/sam3u1c/udc.c **** 	if (udd_g_ctrlreq.req.wLength < udd_g_ctrlreq.payload_size) {
 2088              	 .loc 1 796 23
 2089 01e4 074B     	 ldr r3,.L169
 2090 01e6 DA88     	 ldrh r2,[r3,#6]
 2091              	 .loc 1 796 47
 2092 01e8 064B     	 ldr r3,.L169
 2093 01ea 9B89     	 ldrh r3,[r3,#12]
 2094              	 .loc 1 796 5
 2095 01ec 9A42     	 cmp r2,r3
 2096 01ee 03D2     	 bcs .L167
 797:.././hal/sam3u1c/udc.c **** 		udd_g_ctrlreq.payload_size = udd_g_ctrlreq.req.wLength;
 2097              	 .loc 1 797 49
 2098 01f0 044B     	 ldr r3,.L169
 2099 01f2 DA88     	 ldrh r2,[r3,#6]
 2100              	 .loc 1 797 30
 2101 01f4 034B     	 ldr r3,.L169
 2102 01f6 9A81     	 strh r2,[r3,#12]
 2103              	.L167:
 798:.././hal/sam3u1c/udc.c **** 	}
 799:.././hal/sam3u1c/udc.c **** 	return true;
 2104              	 .loc 1 799 9
 2105 01f8 0123     	 movs r3,#1
 2106              	.L159:
 800:.././hal/sam3u1c/udc.c **** }
 2107              	 .loc 1 800 1
 2108 01fa 1846     	 mov r0,r3
 2109 01fc 0837     	 adds r7,r7,#8
 2110              	.LCFI74:
 2111              	 .cfi_def_cfa_offset 8
 2112 01fe BD46     	 mov sp,r7
 2113              	.LCFI75:
 2114              	 .cfi_def_cfa_register 13
 2115              	 
 2116 0200 80BD     	 pop {r7,pc}
 2117              	.L170:
 2118 0202 00BF     	 .align 2
 2119              	.L169:
 2120 0204 00000000 	 .word udd_g_ctrlreq
 2121 0208 00000000 	 .word udd_is_high_speed
 2122 020c 00000000 	 .word udc_config
 2123 0210 00000000 	 .word udd_set_setup_payload
 2124 0214 00000000 	 .word BOS_DESC
 2125 0218 00000000 	 .word udc_req_std_dev_get_str_desc
 2126              	 .cfi_endproc
 2127              	.LFE93:
 2129              	 .section .text.udc_req_std_dev_get_configuration,"ax",%progbits
 2130              	 .align 1
 2131              	 .syntax unified
 2132              	 .thumb
 2133              	 .thumb_func
 2134              	 .fpu softvfp
 2136              	udc_req_std_dev_get_configuration:
 2137              	.LFB94:
 801:.././hal/sam3u1c/udc.c **** 
 802:.././hal/sam3u1c/udc.c **** /**
 803:.././hal/sam3u1c/udc.c ****  * \brief Standard device request to get configuration number
 804:.././hal/sam3u1c/udc.c ****  *
 805:.././hal/sam3u1c/udc.c ****  * \return true if success
 806:.././hal/sam3u1c/udc.c ****  */
 807:.././hal/sam3u1c/udc.c **** static bool udc_req_std_dev_get_configuration(void)
 808:.././hal/sam3u1c/udc.c **** {
 2138              	 .loc 1 808 1
 2139              	 .cfi_startproc
 2140              	 
 2141              	 
 2142 0000 80B5     	 push {r7,lr}
 2143              	.LCFI76:
 2144              	 .cfi_def_cfa_offset 8
 2145              	 .cfi_offset 7,-8
 2146              	 .cfi_offset 14,-4
 2147 0002 00AF     	 add r7,sp,#0
 2148              	.LCFI77:
 2149              	 .cfi_def_cfa_register 7
 809:.././hal/sam3u1c/udc.c **** 	if (udd_g_ctrlreq.req.wLength != 1) {
 2150              	 .loc 1 809 23
 2151 0004 064B     	 ldr r3,.L174
 2152 0006 DB88     	 ldrh r3,[r3,#6]
 2153              	 .loc 1 809 5
 2154 0008 012B     	 cmp r3,#1
 2155 000a 01D0     	 beq .L172
 810:.././hal/sam3u1c/udc.c **** 		return false;
 2156              	 .loc 1 810 10
 2157 000c 0023     	 movs r3,#0
 2158 000e 04E0     	 b .L173
 2159              	.L172:
 811:.././hal/sam3u1c/udc.c **** 	}
 812:.././hal/sam3u1c/udc.c **** 
 813:.././hal/sam3u1c/udc.c **** 	udd_set_setup_payload(&udc_num_configuration,1);
 2160              	 .loc 1 813 2
 2161 0010 0121     	 movs r1,#1
 2162 0012 0448     	 ldr r0,.L174+4
 2163 0014 044B     	 ldr r3,.L174+8
 2164 0016 9847     	 blx r3
 2165              	.LVL41:
 814:.././hal/sam3u1c/udc.c **** 	return true;
 2166              	 .loc 1 814 9
 2167 0018 0123     	 movs r3,#1
 2168              	.L173:
 815:.././hal/sam3u1c/udc.c **** }
 2169              	 .loc 1 815 1
 2170 001a 1846     	 mov r0,r3
 2171 001c 80BD     	 pop {r7,pc}
 2172              	.L175:
 2173 001e 00BF     	 .align 2
 2174              	.L174:
 2175 0020 00000000 	 .word udd_g_ctrlreq
 2176 0024 00000000 	 .word udc_num_configuration
 2177 0028 00000000 	 .word udd_set_setup_payload
 2178              	 .cfi_endproc
 2179              	.LFE94:
 2181              	 .section .text.udc_req_std_dev_set_configuration,"ax",%progbits
 2182              	 .align 1
 2183              	 .syntax unified
 2184              	 .thumb
 2185              	 .thumb_func
 2186              	 .fpu softvfp
 2188              	udc_req_std_dev_set_configuration:
 2189              	.LFB95:
 816:.././hal/sam3u1c/udc.c **** 
 817:.././hal/sam3u1c/udc.c **** /**
 818:.././hal/sam3u1c/udc.c ****  * \brief Standard device request to enable a configuration
 819:.././hal/sam3u1c/udc.c ****  *
 820:.././hal/sam3u1c/udc.c ****  * \return true if success
 821:.././hal/sam3u1c/udc.c ****  */
 822:.././hal/sam3u1c/udc.c **** static bool udc_req_std_dev_set_configuration(void)
 823:.././hal/sam3u1c/udc.c **** {
 2190              	 .loc 1 823 1
 2191              	 .cfi_startproc
 2192              	 
 2193              	 
 2194 0000 80B5     	 push {r7,lr}
 2195              	.LCFI78:
 2196              	 .cfi_def_cfa_offset 8
 2197              	 .cfi_offset 7,-8
 2198              	 .cfi_offset 14,-4
 2199 0002 82B0     	 sub sp,sp,#8
 2200              	.LCFI79:
 2201              	 .cfi_def_cfa_offset 16
 2202 0004 00AF     	 add r7,sp,#0
 2203              	.LCFI80:
 2204              	 .cfi_def_cfa_register 7
 824:.././hal/sam3u1c/udc.c **** 	uint8_t iface_num;
 825:.././hal/sam3u1c/udc.c **** 
 826:.././hal/sam3u1c/udc.c **** 	// Check request length
 827:.././hal/sam3u1c/udc.c **** 	if (udd_g_ctrlreq.req.wLength) {
 2205              	 .loc 1 827 23
 2206 0006 374B     	 ldr r3,.L188
 2207 0008 DB88     	 ldrh r3,[r3,#6]
 2208              	 .loc 1 827 5
 2209 000a 002B     	 cmp r3,#0
 2210 000c 01D0     	 beq .L177
 828:.././hal/sam3u1c/udc.c **** 		return false;
 2211              	 .loc 1 828 10
 2212 000e 0023     	 movs r3,#0
 2213 0010 63E0     	 b .L178
 2214              	.L177:
 829:.././hal/sam3u1c/udc.c **** 	}
 830:.././hal/sam3u1c/udc.c **** 	// Authorize configuration only if the address is valid
 831:.././hal/sam3u1c/udc.c **** 	if (!udd_getaddress()) {
 2215              	 .loc 1 831 7
 2216 0012 354B     	 ldr r3,.L188+4
 2217 0014 9847     	 blx r3
 2218              	.LVL42:
 2219 0016 0346     	 mov r3,r0
 2220              	 .loc 1 831 5
 2221 0018 002B     	 cmp r3,#0
 2222 001a 01D1     	 bne .L179
 832:.././hal/sam3u1c/udc.c **** 		return false;
 2223              	 .loc 1 832 10
 2224 001c 0023     	 movs r3,#0
 2225 001e 5CE0     	 b .L178
 2226              	.L179:
 833:.././hal/sam3u1c/udc.c **** 	}
 834:.././hal/sam3u1c/udc.c **** 	// Check the configuration number requested
 835:.././hal/sam3u1c/udc.c **** #ifdef USB_DEVICE_HS_SUPPORT
 836:.././hal/sam3u1c/udc.c **** 	if (udd_is_high_speed()) {
 2227              	 .loc 1 836 6
 2228 0020 324B     	 ldr r3,.L188+8
 2229 0022 9847     	 blx r3
 2230              	.LVL43:
 2231 0024 0346     	 mov r3,r0
 2232              	 .loc 1 836 5
 2233 0026 002B     	 cmp r3,#0
 2234 0028 09D0     	 beq .L180
 837:.././hal/sam3u1c/udc.c **** 		// HS descriptor
 838:.././hal/sam3u1c/udc.c **** 		if ((udd_g_ctrlreq.req.wValue & 0xFF) >
 2235              	 .loc 1 838 25
 2236 002a 2E4B     	 ldr r3,.L188
 2237 002c 5B88     	 ldrh r3,[r3,#2]
 2238              	 .loc 1 838 33
 2239 002e DBB2     	 uxtb r3,r3
 839:.././hal/sam3u1c/udc.c **** 				udc_config.confdev_hs->bNumConfigurations) {
 2240              	 .loc 1 839 15
 2241 0030 2F4A     	 ldr r2,.L188+12
 2242 0032 9268     	 ldr r2,[r2,#8]
 2243              	 .loc 1 839 26
 2244 0034 527C     	 ldrb r2,[r2,#17]
 838:.././hal/sam3u1c/udc.c **** 				udc_config.confdev_hs->bNumConfigurations) {
 2245              	 .loc 1 838 6
 2246 0036 9342     	 cmp r3,r2
 2247 0038 0BDD     	 ble .L181
 840:.././hal/sam3u1c/udc.c **** 			return false;
 2248              	 .loc 1 840 11
 2249 003a 0023     	 movs r3,#0
 2250 003c 4DE0     	 b .L178
 2251              	.L180:
 841:.././hal/sam3u1c/udc.c **** 		}
 842:.././hal/sam3u1c/udc.c **** 	} else
 843:.././hal/sam3u1c/udc.c **** #endif
 844:.././hal/sam3u1c/udc.c **** 	{
 845:.././hal/sam3u1c/udc.c **** 		// FS descriptor
 846:.././hal/sam3u1c/udc.c **** 		if ((udd_g_ctrlreq.req.wValue & 0xFF) >
 2252              	 .loc 1 846 25
 2253 003e 294B     	 ldr r3,.L188
 2254 0040 5B88     	 ldrh r3,[r3,#2]
 2255              	 .loc 1 846 33
 2256 0042 DBB2     	 uxtb r3,r3
 847:.././hal/sam3u1c/udc.c **** 				udc_config.confdev_lsfs->bNumConfigurations) {
 2257              	 .loc 1 847 15
 2258 0044 2A4A     	 ldr r2,.L188+12
 2259 0046 1268     	 ldr r2,[r2]
 2260              	 .loc 1 847 28
 2261 0048 527C     	 ldrb r2,[r2,#17]
 846:.././hal/sam3u1c/udc.c **** 				udc_config.confdev_lsfs->bNumConfigurations) {
 2262              	 .loc 1 846 6
 2263 004a 9342     	 cmp r3,r2
 2264 004c 01DD     	 ble .L181
 848:.././hal/sam3u1c/udc.c **** 			return false;
 2265              	 .loc 1 848 11
 2266 004e 0023     	 movs r3,#0
 2267 0050 43E0     	 b .L178
 2268              	.L181:
 849:.././hal/sam3u1c/udc.c **** 		}
 850:.././hal/sam3u1c/udc.c **** 	}
 851:.././hal/sam3u1c/udc.c **** 
 852:.././hal/sam3u1c/udc.c **** 	// Reset current configuration
 853:.././hal/sam3u1c/udc.c **** 	udc_reset();
 2269              	 .loc 1 853 2
 2270 0052 284B     	 ldr r3,.L188+16
 2271 0054 9847     	 blx r3
 2272              	.LVL44:
 854:.././hal/sam3u1c/udc.c **** 
 855:.././hal/sam3u1c/udc.c **** 	// Enable new configuration
 856:.././hal/sam3u1c/udc.c **** 	udc_num_configuration = udd_g_ctrlreq.req.wValue & 0xFF;
 2273              	 .loc 1 856 43
 2274 0056 234B     	 ldr r3,.L188
 2275 0058 5B88     	 ldrh r3,[r3,#2]
 2276              	 .loc 1 856 24
 2277 005a DAB2     	 uxtb r2,r3
 2278 005c 264B     	 ldr r3,.L188+20
 2279 005e 1A70     	 strb r2,[r3]
 857:.././hal/sam3u1c/udc.c **** 	if (udc_num_configuration == 0) {
 2280              	 .loc 1 857 28
 2281 0060 254B     	 ldr r3,.L188+20
 2282 0062 1B78     	 ldrb r3,[r3]
 2283              	 .loc 1 857 5
 2284 0064 002B     	 cmp r3,#0
 2285 0066 01D1     	 bne .L182
 858:.././hal/sam3u1c/udc.c **** 		return true; // Default empty configuration requested
 2286              	 .loc 1 858 10
 2287 0068 0123     	 movs r3,#1
 2288 006a 36E0     	 b .L178
 2289              	.L182:
 859:.././hal/sam3u1c/udc.c **** 	}
 860:.././hal/sam3u1c/udc.c **** 	// Update pointer of the configuration descriptor
 861:.././hal/sam3u1c/udc.c **** #ifdef USB_DEVICE_HS_SUPPORT
 862:.././hal/sam3u1c/udc.c **** 	if (udd_is_high_speed()) {
 2290              	 .loc 1 862 6
 2291 006c 1F4B     	 ldr r3,.L188+8
 2292 006e 9847     	 blx r3
 2293              	.LVL45:
 2294 0070 0346     	 mov r3,r0
 2295              	 .loc 1 862 5
 2296 0072 002B     	 cmp r3,#0
 2297 0074 0BD0     	 beq .L183
 863:.././hal/sam3u1c/udc.c **** 		// HS descriptor
 864:.././hal/sam3u1c/udc.c **** 		udc_ptr_conf = &udc_config.conf_hs[udc_num_configuration - 1];
 2298              	 .loc 1 864 29
 2299 0076 1E4B     	 ldr r3,.L188+12
 2300 0078 1A69     	 ldr r2,[r3,#16]
 2301              	 .loc 1 864 37
 2302 007a 1F4B     	 ldr r3,.L188+20
 2303 007c 1B78     	 ldrb r3,[r3]
 2304 007e 03F10053 	 add r3,r3,#536870912
 2305 0082 013B     	 subs r3,r3,#1
 2306 0084 DB00     	 lsls r3,r3,#3
 2307              	 .loc 1 864 18
 2308 0086 1344     	 add r3,r3,r2
 2309              	 .loc 1 864 16
 2310 0088 1C4A     	 ldr r2,.L188+24
 2311 008a 1360     	 str r3,[r2]
 2312 008c 0AE0     	 b .L184
 2313              	.L183:
 865:.././hal/sam3u1c/udc.c **** 	} else
 866:.././hal/sam3u1c/udc.c **** #endif
 867:.././hal/sam3u1c/udc.c **** 	{
 868:.././hal/sam3u1c/udc.c **** 		// FS descriptor
 869:.././hal/sam3u1c/udc.c **** 		udc_ptr_conf = &udc_config.conf_lsfs[udc_num_configuration - 1];
 2314              	 .loc 1 869 29
 2315 008e 184B     	 ldr r3,.L188+12
 2316 0090 5A68     	 ldr r2,[r3,#4]
 2317              	 .loc 1 869 39
 2318 0092 194B     	 ldr r3,.L188+20
 2319 0094 1B78     	 ldrb r3,[r3]
 2320 0096 03F10053 	 add r3,r3,#536870912
 2321 009a 013B     	 subs r3,r3,#1
 2322 009c DB00     	 lsls r3,r3,#3
 2323              	 .loc 1 869 18
 2324 009e 1344     	 add r3,r3,r2
 2325              	 .loc 1 869 16
 2326 00a0 164A     	 ldr r2,.L188+24
 2327 00a2 1360     	 str r3,[r2]
 2328              	.L184:
 870:.././hal/sam3u1c/udc.c **** 	}
 871:.././hal/sam3u1c/udc.c **** 	// Enable all interfaces of the selected configuration
 872:.././hal/sam3u1c/udc.c **** 	for (iface_num = 0; iface_num < udc_ptr_conf->desc->bNumInterfaces;
 2329              	 .loc 1 872 17
 2330 00a4 0023     	 movs r3,#0
 2331 00a6 FB71     	 strb r3,[r7,#7]
 2332              	 .loc 1 872 2
 2333 00a8 0FE0     	 b .L185
 2334              	.L187:
 873:.././hal/sam3u1c/udc.c **** 			iface_num++) {
 874:.././hal/sam3u1c/udc.c **** 		if (!udc_iface_enable(iface_num, 0)) {
 2335              	 .loc 1 874 8
 2336 00aa FB79     	 ldrb r3,[r7,#7]
 2337 00ac 0021     	 movs r1,#0
 2338 00ae 1846     	 mov r0,r3
 2339 00b0 134B     	 ldr r3,.L188+28
 2340 00b2 9847     	 blx r3
 2341              	.LVL46:
 2342 00b4 0346     	 mov r3,r0
 2343              	 .loc 1 874 7
 2344 00b6 83F00103 	 eor r3,r3,#1
 2345 00ba DBB2     	 uxtb r3,r3
 2346              	 .loc 1 874 6
 2347 00bc 002B     	 cmp r3,#0
 2348 00be 01D0     	 beq .L186
 875:.././hal/sam3u1c/udc.c **** 			return false;
 2349              	 .loc 1 875 11
 2350 00c0 0023     	 movs r3,#0
 2351 00c2 0AE0     	 b .L178
 2352              	.L186:
 873:.././hal/sam3u1c/udc.c **** 			iface_num++) {
 2353              	 .loc 1 873 13
 2354 00c4 FB79     	 ldrb r3,[r7,#7]
 2355 00c6 0133     	 adds r3,r3,#1
 2356 00c8 FB71     	 strb r3,[r7,#7]
 2357              	.L185:
 872:.././hal/sam3u1c/udc.c **** 			iface_num++) {
 2358              	 .loc 1 872 46 discriminator 1
 2359 00ca 0C4B     	 ldr r3,.L188+24
 2360 00cc 1B68     	 ldr r3,[r3]
 2361 00ce 1B68     	 ldr r3,[r3]
 872:.././hal/sam3u1c/udc.c **** 			iface_num++) {
 2362              	 .loc 1 872 52 discriminator 1
 2363 00d0 1B79     	 ldrb r3,[r3,#4]
 872:.././hal/sam3u1c/udc.c **** 			iface_num++) {
 2364              	 .loc 1 872 2 discriminator 1
 2365 00d2 FA79     	 ldrb r2,[r7,#7]
 2366 00d4 9A42     	 cmp r2,r3
 2367 00d6 E8D3     	 bcc .L187
 876:.././hal/sam3u1c/udc.c **** 		}
 877:.././hal/sam3u1c/udc.c **** 	}
 878:.././hal/sam3u1c/udc.c **** 	return true;
 2368              	 .loc 1 878 9
 2369 00d8 0123     	 movs r3,#1
 2370              	.L178:
 879:.././hal/sam3u1c/udc.c **** }
 2371              	 .loc 1 879 1
 2372 00da 1846     	 mov r0,r3
 2373 00dc 0837     	 adds r7,r7,#8
 2374              	.LCFI81:
 2375              	 .cfi_def_cfa_offset 8
 2376 00de BD46     	 mov sp,r7
 2377              	.LCFI82:
 2378              	 .cfi_def_cfa_register 13
 2379              	 
 2380 00e0 80BD     	 pop {r7,pc}
 2381              	.L189:
 2382 00e2 00BF     	 .align 2
 2383              	.L188:
 2384 00e4 00000000 	 .word udd_g_ctrlreq
 2385 00e8 00000000 	 .word udd_getaddress
 2386 00ec 00000000 	 .word udd_is_high_speed
 2387 00f0 00000000 	 .word udc_config
 2388 00f4 00000000 	 .word udc_reset
 2389 00f8 00000000 	 .word udc_num_configuration
 2390 00fc 00000000 	 .word udc_ptr_conf
 2391 0100 00000000 	 .word udc_iface_enable
 2392              	 .cfi_endproc
 2393              	.LFE95:
 2395              	 .section .text.udc_req_std_iface_get_setting,"ax",%progbits
 2396              	 .align 1
 2397              	 .syntax unified
 2398              	 .thumb
 2399              	 .thumb_func
 2400              	 .fpu softvfp
 2402              	udc_req_std_iface_get_setting:
 2403              	.LFB96:
 880:.././hal/sam3u1c/udc.c **** 
 881:.././hal/sam3u1c/udc.c **** /**
 882:.././hal/sam3u1c/udc.c ****  * \brief Standard interface request
 883:.././hal/sam3u1c/udc.c ****  * to get the alternate setting number of an interface
 884:.././hal/sam3u1c/udc.c ****  *
 885:.././hal/sam3u1c/udc.c ****  * \return true if success
 886:.././hal/sam3u1c/udc.c ****  */
 887:.././hal/sam3u1c/udc.c **** static bool udc_req_std_iface_get_setting(void)
 888:.././hal/sam3u1c/udc.c **** {
 2404              	 .loc 1 888 1
 2405              	 .cfi_startproc
 2406              	 
 2407              	 
 2408 0000 80B5     	 push {r7,lr}
 2409              	.LCFI83:
 2410              	 .cfi_def_cfa_offset 8
 2411              	 .cfi_offset 7,-8
 2412              	 .cfi_offset 14,-4
 2413 0002 82B0     	 sub sp,sp,#8
 2414              	.LCFI84:
 2415              	 .cfi_def_cfa_offset 16
 2416 0004 00AF     	 add r7,sp,#0
 2417              	.LCFI85:
 2418              	 .cfi_def_cfa_register 7
 889:.././hal/sam3u1c/udc.c **** 	static uint8_t udc_iface_setting;
 890:.././hal/sam3u1c/udc.c **** 	uint8_t iface_num;
 891:.././hal/sam3u1c/udc.c **** 	udi_api_t UDC_DESC_STORAGE *udi_api;
 892:.././hal/sam3u1c/udc.c **** 
 893:.././hal/sam3u1c/udc.c **** 	if (udd_g_ctrlreq.req.wLength != 1) {
 2419              	 .loc 1 893 23
 2420 0006 1E4B     	 ldr r3,.L196
 2421 0008 DB88     	 ldrh r3,[r3,#6]
 2422              	 .loc 1 893 5
 2423 000a 012B     	 cmp r3,#1
 2424 000c 01D0     	 beq .L191
 894:.././hal/sam3u1c/udc.c **** 		return false; // Error in request
 2425              	 .loc 1 894 10
 2426 000e 0023     	 movs r3,#0
 2427 0010 32E0     	 b .L192
 2428              	.L191:
 895:.././hal/sam3u1c/udc.c **** 	}
 896:.././hal/sam3u1c/udc.c **** 	if (!udc_num_configuration) {
 2429              	 .loc 1 896 6
 2430 0012 1C4B     	 ldr r3,.L196+4
 2431 0014 1B78     	 ldrb r3,[r3]
 2432              	 .loc 1 896 5
 2433 0016 002B     	 cmp r3,#0
 2434 0018 01D1     	 bne .L193
 897:.././hal/sam3u1c/udc.c **** 		return false; // The device is not is configured state yet
 2435              	 .loc 1 897 10
 2436 001a 0023     	 movs r3,#0
 2437 001c 2CE0     	 b .L192
 2438              	.L193:
 898:.././hal/sam3u1c/udc.c **** 	}
 899:.././hal/sam3u1c/udc.c **** 
 900:.././hal/sam3u1c/udc.c **** 	// Check the interface number included in the request
 901:.././hal/sam3u1c/udc.c **** 	iface_num = udd_g_ctrlreq.req.wIndex & 0xFF;
 2439              	 .loc 1 901 31
 2440 001e 184B     	 ldr r3,.L196
 2441 0020 9B88     	 ldrh r3,[r3,#4]
 2442              	 .loc 1 901 12
 2443 0022 FB71     	 strb r3,[r7,#7]
 902:.././hal/sam3u1c/udc.c **** 	if (iface_num >= udc_ptr_conf->desc->bNumInterfaces) {
 2444              	 .loc 1 902 31
 2445 0024 184B     	 ldr r3,.L196+8
 2446 0026 1B68     	 ldr r3,[r3]
 2447 0028 1B68     	 ldr r3,[r3]
 2448              	 .loc 1 902 37
 2449 002a 1B79     	 ldrb r3,[r3,#4]
 2450              	 .loc 1 902 5
 2451 002c FA79     	 ldrb r2,[r7,#7]
 2452 002e 9A42     	 cmp r2,r3
 2453 0030 01D3     	 bcc .L194
 903:.././hal/sam3u1c/udc.c **** 		return false;
 2454              	 .loc 1 903 10
 2455 0032 0023     	 movs r3,#0
 2456 0034 20E0     	 b .L192
 2457              	.L194:
 904:.././hal/sam3u1c/udc.c **** 	}
 905:.././hal/sam3u1c/udc.c **** 
 906:.././hal/sam3u1c/udc.c **** 	// Select first alternate setting of the interface to update udc_ptr_iface
 907:.././hal/sam3u1c/udc.c **** 	// before call iface->getsetting()
 908:.././hal/sam3u1c/udc.c **** 	if (!udc_update_iface_desc(iface_num, 0)) {
 2458              	 .loc 1 908 7
 2459 0036 FB79     	 ldrb r3,[r7,#7]
 2460 0038 0021     	 movs r1,#0
 2461 003a 1846     	 mov r0,r3
 2462 003c 134B     	 ldr r3,.L196+12
 2463 003e 9847     	 blx r3
 2464              	.LVL47:
 2465 0040 0346     	 mov r3,r0
 2466              	 .loc 1 908 6
 2467 0042 83F00103 	 eor r3,r3,#1
 2468 0046 DBB2     	 uxtb r3,r3
 2469              	 .loc 1 908 5
 2470 0048 002B     	 cmp r3,#0
 2471 004a 01D0     	 beq .L195
 909:.././hal/sam3u1c/udc.c **** 		return false;
 2472              	 .loc 1 909 10
 2473 004c 0023     	 movs r3,#0
 2474 004e 13E0     	 b .L192
 2475              	.L195:
 910:.././hal/sam3u1c/udc.c **** 	}
 911:.././hal/sam3u1c/udc.c **** 	// Get alternate setting from UDI
 912:.././hal/sam3u1c/udc.c **** 	udi_api = udc_ptr_conf->udi_apis[iface_num];
 2476              	 .loc 1 912 24
 2477 0050 0D4B     	 ldr r3,.L196+8
 2478 0052 1B68     	 ldr r3,[r3]
 2479 0054 5A68     	 ldr r2,[r3,#4]
 2480              	 .loc 1 912 34
 2481 0056 FB79     	 ldrb r3,[r7,#7]
 2482 0058 9B00     	 lsls r3,r3,#2
 2483 005a 1344     	 add r3,r3,r2
 2484              	 .loc 1 912 10
 2485 005c 1B68     	 ldr r3,[r3]
 2486 005e 3B60     	 str r3,[r7]
 913:.././hal/sam3u1c/udc.c **** 	udc_iface_setting = udi_api->getsetting();
 2487              	 .loc 1 913 29
 2488 0060 3B68     	 ldr r3,[r7]
 2489 0062 DB68     	 ldr r3,[r3,#12]
 2490              	 .loc 1 913 22
 2491 0064 9847     	 blx r3
 2492              	.LVL48:
 2493 0066 0346     	 mov r3,r0
 2494 0068 1A46     	 mov r2,r3
 2495              	 .loc 1 913 20
 2496 006a 094B     	 ldr r3,.L196+16
 2497 006c 1A70     	 strb r2,[r3]
 914:.././hal/sam3u1c/udc.c **** 
 915:.././hal/sam3u1c/udc.c **** 	// Link value to payload pointer of request
 916:.././hal/sam3u1c/udc.c **** 	udd_set_setup_payload(&udc_iface_setting,1);
 2498              	 .loc 1 916 2
 2499 006e 0121     	 movs r1,#1
 2500 0070 0748     	 ldr r0,.L196+16
 2501 0072 084B     	 ldr r3,.L196+20
 2502 0074 9847     	 blx r3
 2503              	.LVL49:
 917:.././hal/sam3u1c/udc.c **** 	return true;
 2504              	 .loc 1 917 9
 2505 0076 0123     	 movs r3,#1
 2506              	.L192:
 918:.././hal/sam3u1c/udc.c **** }
 2507              	 .loc 1 918 1
 2508 0078 1846     	 mov r0,r3
 2509 007a 0837     	 adds r7,r7,#8
 2510              	.LCFI86:
 2511              	 .cfi_def_cfa_offset 8
 2512 007c BD46     	 mov sp,r7
 2513              	.LCFI87:
 2514              	 .cfi_def_cfa_register 13
 2515              	 
 2516 007e 80BD     	 pop {r7,pc}
 2517              	.L197:
 2518              	 .align 2
 2519              	.L196:
 2520 0080 00000000 	 .word udd_g_ctrlreq
 2521 0084 00000000 	 .word udc_num_configuration
 2522 0088 00000000 	 .word udc_ptr_conf
 2523 008c 00000000 	 .word udc_update_iface_desc
 2524 0090 00000000 	 .word udc_iface_setting.7418
 2525 0094 00000000 	 .word udd_set_setup_payload
 2526              	 .cfi_endproc
 2527              	.LFE96:
 2529              	 .section .text.udc_req_std_iface_set_setting,"ax",%progbits
 2530              	 .align 1
 2531              	 .syntax unified
 2532              	 .thumb
 2533              	 .thumb_func
 2534              	 .fpu softvfp
 2536              	udc_req_std_iface_set_setting:
 2537              	.LFB97:
 919:.././hal/sam3u1c/udc.c **** 
 920:.././hal/sam3u1c/udc.c **** /**
 921:.././hal/sam3u1c/udc.c ****  * \brief Standard interface request
 922:.././hal/sam3u1c/udc.c ****  * to set an alternate setting of an interface
 923:.././hal/sam3u1c/udc.c ****  *
 924:.././hal/sam3u1c/udc.c ****  * \return true if success
 925:.././hal/sam3u1c/udc.c ****  */
 926:.././hal/sam3u1c/udc.c **** static bool udc_req_std_iface_set_setting(void)
 927:.././hal/sam3u1c/udc.c **** {
 2538              	 .loc 1 927 1
 2539              	 .cfi_startproc
 2540              	 
 2541              	 
 2542 0000 80B5     	 push {r7,lr}
 2543              	.LCFI88:
 2544              	 .cfi_def_cfa_offset 8
 2545              	 .cfi_offset 7,-8
 2546              	 .cfi_offset 14,-4
 2547 0002 82B0     	 sub sp,sp,#8
 2548              	.LCFI89:
 2549              	 .cfi_def_cfa_offset 16
 2550 0004 00AF     	 add r7,sp,#0
 2551              	.LCFI90:
 2552              	 .cfi_def_cfa_register 7
 928:.././hal/sam3u1c/udc.c **** 	uint8_t iface_num, setting_num;
 929:.././hal/sam3u1c/udc.c **** 
 930:.././hal/sam3u1c/udc.c **** 	if (udd_g_ctrlreq.req.wLength) {
 2553              	 .loc 1 930 23
 2554 0006 144B     	 ldr r3,.L203
 2555 0008 DB88     	 ldrh r3,[r3,#6]
 2556              	 .loc 1 930 5
 2557 000a 002B     	 cmp r3,#0
 2558 000c 01D0     	 beq .L199
 931:.././hal/sam3u1c/udc.c **** 		return false; // Error in request
 2559              	 .loc 1 931 10
 2560 000e 0023     	 movs r3,#0
 2561 0010 1EE0     	 b .L200
 2562              	.L199:
 932:.././hal/sam3u1c/udc.c **** 	}
 933:.././hal/sam3u1c/udc.c **** 	if (!udc_num_configuration) {
 2563              	 .loc 1 933 6
 2564 0012 124B     	 ldr r3,.L203+4
 2565 0014 1B78     	 ldrb r3,[r3]
 2566              	 .loc 1 933 5
 2567 0016 002B     	 cmp r3,#0
 2568 0018 01D1     	 bne .L201
 934:.././hal/sam3u1c/udc.c **** 		return false; // The device is not is configured state yet
 2569              	 .loc 1 934 10
 2570 001a 0023     	 movs r3,#0
 2571 001c 18E0     	 b .L200
 2572              	.L201:
 935:.././hal/sam3u1c/udc.c **** 	}
 936:.././hal/sam3u1c/udc.c **** 
 937:.././hal/sam3u1c/udc.c **** 	iface_num = udd_g_ctrlreq.req.wIndex & 0xFF;
 2573              	 .loc 1 937 31
 2574 001e 0E4B     	 ldr r3,.L203
 2575 0020 9B88     	 ldrh r3,[r3,#4]
 2576              	 .loc 1 937 12
 2577 0022 FB71     	 strb r3,[r7,#7]
 938:.././hal/sam3u1c/udc.c **** 	setting_num = udd_g_ctrlreq.req.wValue & 0xFF;
 2578              	 .loc 1 938 33
 2579 0024 0C4B     	 ldr r3,.L203
 2580 0026 5B88     	 ldrh r3,[r3,#2]
 2581              	 .loc 1 938 14
 2582 0028 BB71     	 strb r3,[r7,#6]
 939:.././hal/sam3u1c/udc.c **** 
 940:.././hal/sam3u1c/udc.c **** 	// Disable current setting
 941:.././hal/sam3u1c/udc.c **** 	if (!udc_iface_disable(iface_num)) {
 2583              	 .loc 1 941 7
 2584 002a FB79     	 ldrb r3,[r7,#7]
 2585 002c 1846     	 mov r0,r3
 2586 002e 0C4B     	 ldr r3,.L203+8
 2587 0030 9847     	 blx r3
 2588              	.LVL50:
 2589 0032 0346     	 mov r3,r0
 2590              	 .loc 1 941 6
 2591 0034 83F00103 	 eor r3,r3,#1
 2592 0038 DBB2     	 uxtb r3,r3
 2593              	 .loc 1 941 5
 2594 003a 002B     	 cmp r3,#0
 2595 003c 01D0     	 beq .L202
 942:.././hal/sam3u1c/udc.c **** 		return false;
 2596              	 .loc 1 942 10
 2597 003e 0023     	 movs r3,#0
 2598 0040 06E0     	 b .L200
 2599              	.L202:
 943:.././hal/sam3u1c/udc.c **** 	}
 944:.././hal/sam3u1c/udc.c **** 
 945:.././hal/sam3u1c/udc.c **** 	// Enable new setting
 946:.././hal/sam3u1c/udc.c **** 	return udc_iface_enable(iface_num, setting_num);
 2600              	 .loc 1 946 9
 2601 0042 BA79     	 ldrb r2,[r7,#6]
 2602 0044 FB79     	 ldrb r3,[r7,#7]
 2603 0046 1146     	 mov r1,r2
 2604 0048 1846     	 mov r0,r3
 2605 004a 064B     	 ldr r3,.L203+12
 2606 004c 9847     	 blx r3
 2607              	.LVL51:
 2608 004e 0346     	 mov r3,r0
 2609              	.L200:
 947:.././hal/sam3u1c/udc.c **** }
 2610              	 .loc 1 947 1
 2611 0050 1846     	 mov r0,r3
 2612 0052 0837     	 adds r7,r7,#8
 2613              	.LCFI91:
 2614              	 .cfi_def_cfa_offset 8
 2615 0054 BD46     	 mov sp,r7
 2616              	.LCFI92:
 2617              	 .cfi_def_cfa_register 13
 2618              	 
 2619 0056 80BD     	 pop {r7,pc}
 2620              	.L204:
 2621              	 .align 2
 2622              	.L203:
 2623 0058 00000000 	 .word udd_g_ctrlreq
 2624 005c 00000000 	 .word udc_num_configuration
 2625 0060 00000000 	 .word udc_iface_disable
 2626 0064 00000000 	 .word udc_iface_enable
 2627              	 .cfi_endproc
 2628              	.LFE97:
 2630              	 .section .text.udc_reqstd,"ax",%progbits
 2631              	 .align 1
 2632              	 .syntax unified
 2633              	 .thumb
 2634              	 .thumb_func
 2635              	 .fpu softvfp
 2637              	udc_reqstd:
 2638              	.LFB98:
 948:.././hal/sam3u1c/udc.c **** 
 949:.././hal/sam3u1c/udc.c **** /**
 950:.././hal/sam3u1c/udc.c ****  * \brief Main routine to manage the standard USB SETUP request
 951:.././hal/sam3u1c/udc.c ****  *
 952:.././hal/sam3u1c/udc.c ****  * \return true if the request is supported
 953:.././hal/sam3u1c/udc.c ****  */
 954:.././hal/sam3u1c/udc.c **** static bool udc_reqstd(void)
 955:.././hal/sam3u1c/udc.c **** {
 2639              	 .loc 1 955 1
 2640              	 .cfi_startproc
 2641              	 
 2642              	 
 2643 0000 80B5     	 push {r7,lr}
 2644              	.LCFI93:
 2645              	 .cfi_def_cfa_offset 8
 2646              	 .cfi_offset 7,-8
 2647              	 .cfi_offset 14,-4
 2648 0002 00AF     	 add r7,sp,#0
 2649              	.LCFI94:
 2650              	 .cfi_def_cfa_register 7
 956:.././hal/sam3u1c/udc.c **** 	if (Udd_setup_is_in()) {
 2651              	 .loc 1 956 6
 2652 0004 554B     	 ldr r3,.L243
 2653 0006 1B78     	 ldrb r3,[r3]
 2654 0008 5BB2     	 sxtb r3,r3
 2655              	 .loc 1 956 5
 2656 000a 002B     	 cmp r3,#0
 2657 000c 44DA     	 bge .L206
 957:.././hal/sam3u1c/udc.c **** 		// GET Standard Requests
 958:.././hal/sam3u1c/udc.c **** 		if (udd_g_ctrlreq.req.wLength == 0) {
 2658              	 .loc 1 958 24
 2659 000e 534B     	 ldr r3,.L243
 2660 0010 DB88     	 ldrh r3,[r3,#6]
 2661              	 .loc 1 958 6
 2662 0012 002B     	 cmp r3,#0
 2663 0014 01D1     	 bne .L207
 959:.././hal/sam3u1c/udc.c **** 			return false; // Error for USB host
 2664              	 .loc 1 959 11
 2665 0016 0023     	 movs r3,#0
 2666 0018 9DE0     	 b .L208
 2667              	.L207:
 960:.././hal/sam3u1c/udc.c **** 		}
 961:.././hal/sam3u1c/udc.c **** 
 962:.././hal/sam3u1c/udc.c **** 		if (USB_REQ_RECIP_DEVICE == Udd_setup_recipient()) {
 2668              	 .loc 1 962 31
 2669 001a 504B     	 ldr r3,.L243
 2670 001c 1B78     	 ldrb r3,[r3]
 2671 001e 03F01F03 	 and r3,r3,#31
 2672              	 .loc 1 962 6
 2673 0022 002B     	 cmp r3,#0
 2674 0024 16D1     	 bne .L232
 963:.././hal/sam3u1c/udc.c **** 			// Standard Get Device request
 964:.././hal/sam3u1c/udc.c **** 			switch (udd_g_ctrlreq.req.bRequest) {
 2675              	 .loc 1 964 29
 2676 0026 4D4B     	 ldr r3,.L243
 2677 0028 5B78     	 ldrb r3,[r3,#1]
 2678              	 .loc 1 964 4
 2679 002a 082B     	 cmp r3,#8
 2680 002c 0ED0     	 beq .L210
 2681 002e 082B     	 cmp r3,#8
 2682 0030 12DC     	 bgt .L233
 2683 0032 002B     	 cmp r3,#0
 2684 0034 02D0     	 beq .L212
 2685 0036 062B     	 cmp r3,#6
 2686 0038 04D0     	 beq .L213
 965:.././hal/sam3u1c/udc.c **** 			case USB_REQ_GET_STATUS:
 966:.././hal/sam3u1c/udc.c **** 				return udc_req_std_dev_get_status();
 967:.././hal/sam3u1c/udc.c **** 			case USB_REQ_GET_DESCRIPTOR:
 968:.././hal/sam3u1c/udc.c **** 				return udc_req_std_dev_get_descriptor();
 969:.././hal/sam3u1c/udc.c **** 			case USB_REQ_GET_CONFIGURATION:
 970:.././hal/sam3u1c/udc.c **** 				return udc_req_std_dev_get_configuration();
 971:.././hal/sam3u1c/udc.c **** 			default:
 972:.././hal/sam3u1c/udc.c **** 				break;
 2687              	 .loc 1 972 5
 2688 003a 0DE0     	 b .L233
 2689              	.L212:
 966:.././hal/sam3u1c/udc.c **** 			case USB_REQ_GET_DESCRIPTOR:
 2690              	 .loc 1 966 12
 2691 003c 484B     	 ldr r3,.L243+4
 2692 003e 9847     	 blx r3
 2693              	.LVL52:
 2694 0040 0346     	 mov r3,r0
 2695 0042 88E0     	 b .L208
 2696              	.L213:
 968:.././hal/sam3u1c/udc.c **** 			case USB_REQ_GET_CONFIGURATION:
 2697              	 .loc 1 968 12
 2698 0044 474B     	 ldr r3,.L243+8
 2699 0046 9847     	 blx r3
 2700              	.LVL53:
 2701 0048 0346     	 mov r3,r0
 2702 004a 84E0     	 b .L208
 2703              	.L210:
 970:.././hal/sam3u1c/udc.c **** 			default:
 2704              	 .loc 1 970 12
 2705 004c 464B     	 ldr r3,.L243+12
 2706 004e 9847     	 blx r3
 2707              	.LVL54:
 2708 0050 0346     	 mov r3,r0
 2709 0052 80E0     	 b .L208
 2710              	.L232:
 973:.././hal/sam3u1c/udc.c **** 			}
 974:.././hal/sam3u1c/udc.c **** 		}
 2711              	 .loc 1 974 3
 2712 0054 00BF     	 nop
 2713 0056 00E0     	 b .L209
 2714              	.L233:
 972:.././hal/sam3u1c/udc.c **** 			}
 2715              	 .loc 1 972 5
 2716 0058 00BF     	 nop
 2717              	.L209:
 975:.././hal/sam3u1c/udc.c **** 
 976:.././hal/sam3u1c/udc.c **** 		if (USB_REQ_RECIP_INTERFACE == Udd_setup_recipient()) {
 2718              	 .loc 1 976 34
 2719 005a 404B     	 ldr r3,.L243
 2720 005c 1B78     	 ldrb r3,[r3]
 2721 005e 03F01F03 	 and r3,r3,#31
 2722              	 .loc 1 976 6
 2723 0062 012B     	 cmp r3,#1
 2724 0064 07D1     	 bne .L234
 977:.././hal/sam3u1c/udc.c **** 			// Standard Get Interface request
 978:.././hal/sam3u1c/udc.c **** 			switch (udd_g_ctrlreq.req.bRequest) {
 2725              	 .loc 1 978 29
 2726 0066 3D4B     	 ldr r3,.L243
 2727 0068 5B78     	 ldrb r3,[r3,#1]
 2728              	 .loc 1 978 4
 2729 006a 0A2B     	 cmp r3,#10
 2730 006c 05D1     	 bne .L235
 979:.././hal/sam3u1c/udc.c **** 			case USB_REQ_GET_INTERFACE:
 980:.././hal/sam3u1c/udc.c **** 				return udc_req_std_iface_get_setting();
 2731              	 .loc 1 980 12
 2732 006e 3F4B     	 ldr r3,.L243+16
 2733 0070 9847     	 blx r3
 2734              	.LVL55:
 2735 0072 0346     	 mov r3,r0
 2736 0074 6FE0     	 b .L208
 2737              	.L234:
 981:.././hal/sam3u1c/udc.c **** 			default:
 982:.././hal/sam3u1c/udc.c **** 				break;
 983:.././hal/sam3u1c/udc.c **** 			}
 984:.././hal/sam3u1c/udc.c **** 		}
 2738              	 .loc 1 984 3
 2739 0076 00BF     	 nop
 2740 0078 00E0     	 b .L214
 2741              	.L235:
 982:.././hal/sam3u1c/udc.c **** 			}
 2742              	 .loc 1 982 5
 2743 007a 00BF     	 nop
 2744              	.L214:
 985:.././hal/sam3u1c/udc.c **** #if (0!=USB_DEVICE_MAX_EP)
 986:.././hal/sam3u1c/udc.c **** 		if (USB_REQ_RECIP_ENDPOINT == Udd_setup_recipient()) {
 2745              	 .loc 1 986 33
 2746 007c 374B     	 ldr r3,.L243
 2747 007e 1B78     	 ldrb r3,[r3]
 2748 0080 03F01F03 	 and r3,r3,#31
 2749              	 .loc 1 986 6
 2750 0084 022B     	 cmp r3,#2
 2751 0086 60D1     	 bne .L236
 987:.././hal/sam3u1c/udc.c **** 			// Standard Get Endpoint request
 988:.././hal/sam3u1c/udc.c **** 			switch (udd_g_ctrlreq.req.bRequest) {
 2752              	 .loc 1 988 29
 2753 0088 344B     	 ldr r3,.L243
 2754 008a 5B78     	 ldrb r3,[r3,#1]
 2755              	 .loc 1 988 4
 2756 008c 002B     	 cmp r3,#0
 2757 008e 5ED1     	 bne .L237
 989:.././hal/sam3u1c/udc.c **** 			case USB_REQ_GET_STATUS:
 990:.././hal/sam3u1c/udc.c **** 				return udc_req_std_ep_get_status();
 2758              	 .loc 1 990 12
 2759 0090 374B     	 ldr r3,.L243+20
 2760 0092 9847     	 blx r3
 2761              	.LVL56:
 2762 0094 0346     	 mov r3,r0
 2763 0096 5EE0     	 b .L208
 2764              	.L206:
 991:.././hal/sam3u1c/udc.c **** 			default:
 992:.././hal/sam3u1c/udc.c **** 				break;
 993:.././hal/sam3u1c/udc.c **** 			}
 994:.././hal/sam3u1c/udc.c **** 		}
 995:.././hal/sam3u1c/udc.c **** #endif
 996:.././hal/sam3u1c/udc.c **** 	} else {
 997:.././hal/sam3u1c/udc.c **** 		// SET Standard Requests
 998:.././hal/sam3u1c/udc.c **** 		if (USB_REQ_RECIP_DEVICE == Udd_setup_recipient()) {
 2765              	 .loc 1 998 31
 2766 0098 304B     	 ldr r3,.L243
 2767 009a 1B78     	 ldrb r3,[r3]
 2768 009c 03F01F03 	 and r3,r3,#31
 2769              	 .loc 1 998 6
 2770 00a0 002B     	 cmp r3,#0
 2771 00a2 29D1     	 bne .L238
 999:.././hal/sam3u1c/udc.c **** 			// Standard Set Device request
1000:.././hal/sam3u1c/udc.c **** 			switch (udd_g_ctrlreq.req.bRequest) {
 2772              	 .loc 1 1000 29
 2773 00a4 2D4B     	 ldr r3,.L243
 2774 00a6 5B78     	 ldrb r3,[r3,#1]
 2775 00a8 013B     	 subs r3,r3,#1
 2776 00aa 082B     	 cmp r3,#8
 2777 00ac 26D8     	 bhi .L239
 2778 00ae 01A2     	 adr r2,.L222
 2779 00b0 52F823F0 	 ldr pc,[r2,r3,lsl#2]
 2780              	 .p2align 2
 2781              	.L222:
 2782 00b4 E1000000 	 .word .L226+1
 2783 00b8 FD000000 	 .word .L239+1
 2784 00bc E9000000 	 .word .L225+1
 2785 00c0 FD000000 	 .word .L239+1
 2786 00c4 D9000000 	 .word .L224+1
 2787 00c8 FD000000 	 .word .L239+1
 2788 00cc FD000000 	 .word .L239+1
 2789 00d0 FD000000 	 .word .L239+1
 2790 00d4 F1000000 	 .word .L221+1
 2791              	 .p2align 1
 2792              	.L224:
1001:.././hal/sam3u1c/udc.c **** 			case USB_REQ_SET_ADDRESS:
1002:.././hal/sam3u1c/udc.c **** 				return udc_req_std_dev_set_address();
 2793              	 .loc 1 1002 12
 2794 00d8 264B     	 ldr r3,.L243+24
 2795 00da 9847     	 blx r3
 2796              	.LVL57:
 2797 00dc 0346     	 mov r3,r0
 2798 00de 3AE0     	 b .L208
 2799              	.L226:
1003:.././hal/sam3u1c/udc.c **** 			case USB_REQ_CLEAR_FEATURE:
1004:.././hal/sam3u1c/udc.c **** 				return udc_req_std_dev_clear_feature();
 2800              	 .loc 1 1004 12
 2801 00e0 254B     	 ldr r3,.L243+28
 2802 00e2 9847     	 blx r3
 2803              	.LVL58:
 2804 00e4 0346     	 mov r3,r0
 2805 00e6 36E0     	 b .L208
 2806              	.L225:
1005:.././hal/sam3u1c/udc.c **** 			case USB_REQ_SET_FEATURE:
1006:.././hal/sam3u1c/udc.c **** 				return udc_req_std_dev_set_feature();
 2807              	 .loc 1 1006 12
 2808 00e8 244B     	 ldr r3,.L243+32
 2809 00ea 9847     	 blx r3
 2810              	.LVL59:
 2811 00ec 0346     	 mov r3,r0
 2812 00ee 32E0     	 b .L208
 2813              	.L221:
1007:.././hal/sam3u1c/udc.c **** 			case USB_REQ_SET_CONFIGURATION:
1008:.././hal/sam3u1c/udc.c **** 				return udc_req_std_dev_set_configuration();
 2814              	 .loc 1 1008 12
 2815 00f0 234B     	 ldr r3,.L243+36
 2816 00f2 9847     	 blx r3
 2817              	.LVL60:
 2818 00f4 0346     	 mov r3,r0
 2819 00f6 2EE0     	 b .L208
 2820              	.L238:
1009:.././hal/sam3u1c/udc.c **** 			case USB_REQ_SET_DESCRIPTOR:
1010:.././hal/sam3u1c/udc.c **** 				/* Not supported (defined as optional by the USB 2.0 spec) */
1011:.././hal/sam3u1c/udc.c **** 				break;
1012:.././hal/sam3u1c/udc.c **** 			default:
1013:.././hal/sam3u1c/udc.c **** 				break;
1014:.././hal/sam3u1c/udc.c **** 			}
1015:.././hal/sam3u1c/udc.c **** 		}
 2821              	 .loc 1 1015 3
 2822 00f8 00BF     	 nop
 2823 00fa 00E0     	 b .L219
 2824              	.L239:
1013:.././hal/sam3u1c/udc.c **** 			}
 2825              	 .loc 1 1013 5
 2826 00fc 00BF     	 nop
 2827              	.L219:
1016:.././hal/sam3u1c/udc.c **** 
1017:.././hal/sam3u1c/udc.c **** 		if (USB_REQ_RECIP_INTERFACE == Udd_setup_recipient()) {
 2828              	 .loc 1 1017 34
 2829 00fe 174B     	 ldr r3,.L243
 2830 0100 1B78     	 ldrb r3,[r3]
 2831 0102 03F01F03 	 and r3,r3,#31
 2832              	 .loc 1 1017 6
 2833 0106 012B     	 cmp r3,#1
 2834 0108 07D1     	 bne .L240
1018:.././hal/sam3u1c/udc.c **** 			// Standard Set Interface request
1019:.././hal/sam3u1c/udc.c **** 			switch (udd_g_ctrlreq.req.bRequest) {
 2835              	 .loc 1 1019 29
 2836 010a 144B     	 ldr r3,.L243
 2837 010c 5B78     	 ldrb r3,[r3,#1]
 2838              	 .loc 1 1019 4
 2839 010e 0B2B     	 cmp r3,#11
 2840 0110 05D1     	 bne .L241
1020:.././hal/sam3u1c/udc.c **** 			case USB_REQ_SET_INTERFACE:
1021:.././hal/sam3u1c/udc.c **** 				return udc_req_std_iface_set_setting();
 2841              	 .loc 1 1021 12
 2842 0112 1C4B     	 ldr r3,.L243+40
 2843 0114 9847     	 blx r3
 2844              	.LVL61:
 2845 0116 0346     	 mov r3,r0
 2846 0118 1DE0     	 b .L208
 2847              	.L240:
1022:.././hal/sam3u1c/udc.c **** 			default:
1023:.././hal/sam3u1c/udc.c **** 				break;
1024:.././hal/sam3u1c/udc.c **** 			}
1025:.././hal/sam3u1c/udc.c **** 		}
 2848              	 .loc 1 1025 3
 2849 011a 00BF     	 nop
 2850 011c 00E0     	 b .L227
 2851              	.L241:
1023:.././hal/sam3u1c/udc.c **** 			}
 2852              	 .loc 1 1023 5
 2853 011e 00BF     	 nop
 2854              	.L227:
1026:.././hal/sam3u1c/udc.c **** #if (0!=USB_DEVICE_MAX_EP)
1027:.././hal/sam3u1c/udc.c **** 		if (USB_REQ_RECIP_ENDPOINT == Udd_setup_recipient()) {
 2855              	 .loc 1 1027 33
 2856 0120 0E4B     	 ldr r3,.L243
 2857 0122 1B78     	 ldrb r3,[r3]
 2858 0124 03F01F03 	 and r3,r3,#31
 2859              	 .loc 1 1027 6
 2860 0128 022B     	 cmp r3,#2
 2861 012a 12D1     	 bne .L242
1028:.././hal/sam3u1c/udc.c **** 			// Standard Set Endpoint request
1029:.././hal/sam3u1c/udc.c **** 			switch (udd_g_ctrlreq.req.bRequest) {
 2862              	 .loc 1 1029 29
 2863 012c 0B4B     	 ldr r3,.L243
 2864 012e 5B78     	 ldrb r3,[r3,#1]
 2865              	 .loc 1 1029 4
 2866 0130 012B     	 cmp r3,#1
 2867 0132 02D0     	 beq .L229
 2868 0134 032B     	 cmp r3,#3
 2869 0136 04D0     	 beq .L230
1030:.././hal/sam3u1c/udc.c **** 			case USB_REQ_CLEAR_FEATURE:
1031:.././hal/sam3u1c/udc.c **** 				return udc_req_std_ep_clear_feature();
1032:.././hal/sam3u1c/udc.c **** 			case USB_REQ_SET_FEATURE:
1033:.././hal/sam3u1c/udc.c **** 				return udc_req_std_ep_set_feature();
1034:.././hal/sam3u1c/udc.c **** 			default:
1035:.././hal/sam3u1c/udc.c **** 				break;
 2870              	 .loc 1 1035 5
 2871 0138 0CE0     	 b .L218
 2872              	.L229:
1031:.././hal/sam3u1c/udc.c **** 			case USB_REQ_SET_FEATURE:
 2873              	 .loc 1 1031 12
 2874 013a 134B     	 ldr r3,.L243+44
 2875 013c 9847     	 blx r3
 2876              	.LVL62:
 2877 013e 0346     	 mov r3,r0
 2878 0140 09E0     	 b .L208
 2879              	.L230:
1033:.././hal/sam3u1c/udc.c **** 			default:
 2880              	 .loc 1 1033 12
 2881 0142 124B     	 ldr r3,.L243+48
 2882 0144 9847     	 blx r3
 2883              	.LVL63:
 2884 0146 0346     	 mov r3,r0
 2885 0148 05E0     	 b .L208
 2886              	.L236:
 994:.././hal/sam3u1c/udc.c **** #endif
 2887              	 .loc 1 994 3
 2888 014a 00BF     	 nop
 2889 014c 02E0     	 b .L218
 2890              	.L237:
 992:.././hal/sam3u1c/udc.c **** 			}
 2891              	 .loc 1 992 5
 2892 014e 00BF     	 nop
 2893 0150 00E0     	 b .L218
 2894              	.L242:
1036:.././hal/sam3u1c/udc.c **** 			}
1037:.././hal/sam3u1c/udc.c **** 		}
 2895              	 .loc 1 1037 3
 2896 0152 00BF     	 nop
 2897              	.L218:
1038:.././hal/sam3u1c/udc.c **** #endif
1039:.././hal/sam3u1c/udc.c **** 	}
1040:.././hal/sam3u1c/udc.c **** 	return false;
 2898              	 .loc 1 1040 9
 2899 0154 0023     	 movs r3,#0
 2900              	.L208:
1041:.././hal/sam3u1c/udc.c **** }
 2901              	 .loc 1 1041 1
 2902 0156 1846     	 mov r0,r3
 2903 0158 80BD     	 pop {r7,pc}
 2904              	.L244:
 2905 015a 00BF     	 .align 2
 2906              	.L243:
 2907 015c 00000000 	 .word udd_g_ctrlreq
 2908 0160 00000000 	 .word udc_req_std_dev_get_status
 2909 0164 00000000 	 .word udc_req_std_dev_get_descriptor
 2910 0168 00000000 	 .word udc_req_std_dev_get_configuration
 2911 016c 00000000 	 .word udc_req_std_iface_get_setting
 2912 0170 00000000 	 .word udc_req_std_ep_get_status
 2913 0174 00000000 	 .word udc_req_std_dev_set_address
 2914 0178 00000000 	 .word udc_req_std_dev_clear_feature
 2915 017c 00000000 	 .word udc_req_std_dev_set_feature
 2916 0180 00000000 	 .word udc_req_std_dev_set_configuration
 2917 0184 00000000 	 .word udc_req_std_iface_set_setting
 2918 0188 00000000 	 .word udc_req_std_ep_clear_feature
 2919 018c 00000000 	 .word udc_req_std_ep_set_feature
 2920              	 .cfi_endproc
 2921              	.LFE98:
 2923              	 .section .text.udc_req_iface,"ax",%progbits
 2924              	 .align 1
 2925              	 .syntax unified
 2926              	 .thumb
 2927              	 .thumb_func
 2928              	 .fpu softvfp
 2930              	udc_req_iface:
 2931              	.LFB99:
1042:.././hal/sam3u1c/udc.c **** 
1043:.././hal/sam3u1c/udc.c **** /**
1044:.././hal/sam3u1c/udc.c ****  * \brief Send the SETUP interface request to UDI
1045:.././hal/sam3u1c/udc.c ****  *
1046:.././hal/sam3u1c/udc.c ****  * \return true if the request is supported
1047:.././hal/sam3u1c/udc.c ****  */
1048:.././hal/sam3u1c/udc.c **** static bool udc_req_iface(void)
1049:.././hal/sam3u1c/udc.c **** {
 2932              	 .loc 1 1049 1
 2933              	 .cfi_startproc
 2934              	 
 2935              	 
 2936 0000 80B5     	 push {r7,lr}
 2937              	.LCFI95:
 2938              	 .cfi_def_cfa_offset 8
 2939              	 .cfi_offset 7,-8
 2940              	 .cfi_offset 14,-4
 2941 0002 82B0     	 sub sp,sp,#8
 2942              	.LCFI96:
 2943              	 .cfi_def_cfa_offset 16
 2944 0004 00AF     	 add r7,sp,#0
 2945              	.LCFI97:
 2946              	 .cfi_def_cfa_register 7
1050:.././hal/sam3u1c/udc.c **** 	uint8_t iface_num;
1051:.././hal/sam3u1c/udc.c **** 	udi_api_t UDC_DESC_STORAGE *udi_api;
1052:.././hal/sam3u1c/udc.c **** 
1053:.././hal/sam3u1c/udc.c **** 	if (0 == udc_num_configuration) {
 2947              	 .loc 1 1053 8
 2948 0006 204B     	 ldr r3,.L251
 2949 0008 1B78     	 ldrb r3,[r3]
 2950              	 .loc 1 1053 5
 2951 000a 002B     	 cmp r3,#0
 2952 000c 01D1     	 bne .L246
1054:.././hal/sam3u1c/udc.c **** 		return false; // The device is not is configured state yet
 2953              	 .loc 1 1054 10
 2954 000e 0023     	 movs r3,#0
 2955 0010 36E0     	 b .L247
 2956              	.L246:
1055:.././hal/sam3u1c/udc.c **** 	}
1056:.././hal/sam3u1c/udc.c **** 	// Check interface number
1057:.././hal/sam3u1c/udc.c **** 	iface_num = udd_g_ctrlreq.req.wIndex & 0xFF;
 2957              	 .loc 1 1057 31
 2958 0012 1E4B     	 ldr r3,.L251+4
 2959 0014 9B88     	 ldrh r3,[r3,#4]
 2960              	 .loc 1 1057 12
 2961 0016 FB71     	 strb r3,[r7,#7]
1058:.././hal/sam3u1c/udc.c **** 	if (iface_num >= udc_ptr_conf->desc->bNumInterfaces) {
 2962              	 .loc 1 1058 31
 2963 0018 1D4B     	 ldr r3,.L251+8
 2964 001a 1B68     	 ldr r3,[r3]
 2965 001c 1B68     	 ldr r3,[r3]
 2966              	 .loc 1 1058 37
 2967 001e 1B79     	 ldrb r3,[r3,#4]
 2968              	 .loc 1 1058 5
 2969 0020 FA79     	 ldrb r2,[r7,#7]
 2970 0022 9A42     	 cmp r2,r3
 2971 0024 01D3     	 bcc .L248
1059:.././hal/sam3u1c/udc.c **** 		return false;
 2972              	 .loc 1 1059 10
 2973 0026 0023     	 movs r3,#0
 2974 0028 2AE0     	 b .L247
 2975              	.L248:
1060:.././hal/sam3u1c/udc.c **** 	}
1061:.././hal/sam3u1c/udc.c **** 
1062:.././hal/sam3u1c/udc.c **** 	//* To update udc_ptr_iface with the selected interface in request
1063:.././hal/sam3u1c/udc.c **** 	// Select first alternate setting of interface to update udc_ptr_iface
1064:.././hal/sam3u1c/udc.c **** 	// before calling udi_api->getsetting()
1065:.././hal/sam3u1c/udc.c **** 	if (!udc_update_iface_desc(iface_num, 0)) {
 2976              	 .loc 1 1065 7
 2977 002a FB79     	 ldrb r3,[r7,#7]
 2978 002c 0021     	 movs r1,#0
 2979 002e 1846     	 mov r0,r3
 2980 0030 184B     	 ldr r3,.L251+12
 2981 0032 9847     	 blx r3
 2982              	.LVL64:
 2983 0034 0346     	 mov r3,r0
 2984              	 .loc 1 1065 6
 2985 0036 83F00103 	 eor r3,r3,#1
 2986 003a DBB2     	 uxtb r3,r3
 2987              	 .loc 1 1065 5
 2988 003c 002B     	 cmp r3,#0
 2989 003e 01D0     	 beq .L249
1066:.././hal/sam3u1c/udc.c **** 		return false;
 2990              	 .loc 1 1066 10
 2991 0040 0023     	 movs r3,#0
 2992 0042 1DE0     	 b .L247
 2993              	.L249:
1067:.././hal/sam3u1c/udc.c **** 	}
1068:.././hal/sam3u1c/udc.c **** 	// Select the interface with the current alternate setting
1069:.././hal/sam3u1c/udc.c **** 	udi_api = udc_ptr_conf->udi_apis[iface_num];
 2994              	 .loc 1 1069 24
 2995 0044 124B     	 ldr r3,.L251+8
 2996 0046 1B68     	 ldr r3,[r3]
 2997 0048 5A68     	 ldr r2,[r3,#4]
 2998              	 .loc 1 1069 34
 2999 004a FB79     	 ldrb r3,[r7,#7]
 3000 004c 9B00     	 lsls r3,r3,#2
 3001 004e 1344     	 add r3,r3,r2
 3002              	 .loc 1 1069 10
 3003 0050 1B68     	 ldr r3,[r3]
 3004 0052 3B60     	 str r3,[r7]
1070:.././hal/sam3u1c/udc.c **** 	if (!udc_update_iface_desc(iface_num, udi_api->getsetting())) {
 3005              	 .loc 1 1070 47
 3006 0054 3B68     	 ldr r3,[r7]
 3007 0056 DB68     	 ldr r3,[r3,#12]
 3008              	 .loc 1 1070 7
 3009 0058 9847     	 blx r3
 3010              	.LVL65:
 3011 005a 0346     	 mov r3,r0
 3012 005c 1A46     	 mov r2,r3
 3013 005e FB79     	 ldrb r3,[r7,#7]
 3014 0060 1146     	 mov r1,r2
 3015 0062 1846     	 mov r0,r3
 3016 0064 0B4B     	 ldr r3,.L251+12
 3017 0066 9847     	 blx r3
 3018              	.LVL66:
 3019 0068 0346     	 mov r3,r0
 3020              	 .loc 1 1070 6
 3021 006a 83F00103 	 eor r3,r3,#1
 3022 006e DBB2     	 uxtb r3,r3
 3023              	 .loc 1 1070 5
 3024 0070 002B     	 cmp r3,#0
 3025 0072 01D0     	 beq .L250
1071:.././hal/sam3u1c/udc.c **** 		return false;
 3026              	 .loc 1 1071 10
 3027 0074 0023     	 movs r3,#0
 3028 0076 03E0     	 b .L247
 3029              	.L250:
1072:.././hal/sam3u1c/udc.c **** 	}
1073:.././hal/sam3u1c/udc.c **** 
1074:.././hal/sam3u1c/udc.c **** 	// Send the SETUP request to the UDI corresponding to the interface number
1075:.././hal/sam3u1c/udc.c **** 	return udi_api->setup();
 3030              	 .loc 1 1075 16
 3031 0078 3B68     	 ldr r3,[r7]
 3032 007a 9B68     	 ldr r3,[r3,#8]
 3033              	 .loc 1 1075 9
 3034 007c 9847     	 blx r3
 3035              	.LVL67:
 3036 007e 0346     	 mov r3,r0
 3037              	.L247:
1076:.././hal/sam3u1c/udc.c **** }
 3038              	 .loc 1 1076 1
 3039 0080 1846     	 mov r0,r3
 3040 0082 0837     	 adds r7,r7,#8
 3041              	.LCFI98:
 3042              	 .cfi_def_cfa_offset 8
 3043 0084 BD46     	 mov sp,r7
 3044              	.LCFI99:
 3045              	 .cfi_def_cfa_register 13
 3046              	 
 3047 0086 80BD     	 pop {r7,pc}
 3048              	.L252:
 3049              	 .align 2
 3050              	.L251:
 3051 0088 00000000 	 .word udc_num_configuration
 3052 008c 00000000 	 .word udd_g_ctrlreq
 3053 0090 00000000 	 .word udc_ptr_conf
 3054 0094 00000000 	 .word udc_update_iface_desc
 3055              	 .cfi_endproc
 3056              	.LFE99:
 3058              	 .section .text.udc_req_ep,"ax",%progbits
 3059              	 .align 1
 3060              	 .syntax unified
 3061              	 .thumb
 3062              	 .thumb_func
 3063              	 .fpu softvfp
 3065              	udc_req_ep:
 3066              	.LFB100:
1077:.././hal/sam3u1c/udc.c **** 
1078:.././hal/sam3u1c/udc.c **** /**
1079:.././hal/sam3u1c/udc.c ****  * \brief Send the SETUP interface request to UDI
1080:.././hal/sam3u1c/udc.c ****  *
1081:.././hal/sam3u1c/udc.c ****  * \return true if the request is supported
1082:.././hal/sam3u1c/udc.c ****  */
1083:.././hal/sam3u1c/udc.c **** static bool udc_req_ep(void)
1084:.././hal/sam3u1c/udc.c **** {
 3067              	 .loc 1 1084 1
 3068              	 .cfi_startproc
 3069              	 
 3070              	 
 3071 0000 80B5     	 push {r7,lr}
 3072              	.LCFI100:
 3073              	 .cfi_def_cfa_offset 8
 3074              	 .cfi_offset 7,-8
 3075              	 .cfi_offset 14,-4
 3076 0002 82B0     	 sub sp,sp,#8
 3077              	.LCFI101:
 3078              	 .cfi_def_cfa_offset 16
 3079 0004 00AF     	 add r7,sp,#0
 3080              	.LCFI102:
 3081              	 .cfi_def_cfa_register 7
1085:.././hal/sam3u1c/udc.c **** 	uint8_t iface_num;
1086:.././hal/sam3u1c/udc.c **** 	udi_api_t UDC_DESC_STORAGE *udi_api;
1087:.././hal/sam3u1c/udc.c **** 
1088:.././hal/sam3u1c/udc.c **** 	if (0 == udc_num_configuration) {
 3082              	 .loc 1 1088 8
 3083 0006 1E4B     	 ldr r3,.L260
 3084 0008 1B78     	 ldrb r3,[r3]
 3085              	 .loc 1 1088 5
 3086 000a 002B     	 cmp r3,#0
 3087 000c 01D1     	 bne .L254
1089:.././hal/sam3u1c/udc.c **** 		return false; // The device is not is configured state yet
 3088              	 .loc 1 1089 10
 3089 000e 0023     	 movs r3,#0
 3090 0010 32E0     	 b .L255
 3091              	.L254:
1090:.././hal/sam3u1c/udc.c **** 	}
1091:.././hal/sam3u1c/udc.c **** 	// Send this request on all enabled interfaces
1092:.././hal/sam3u1c/udc.c **** 	iface_num = udd_g_ctrlreq.req.wIndex & 0xFF;
 3092              	 .loc 1 1092 31
 3093 0012 1C4B     	 ldr r3,.L260+4
 3094 0014 9B88     	 ldrh r3,[r3,#4]
 3095              	 .loc 1 1092 12
 3096 0016 FB71     	 strb r3,[r7,#7]
1093:.././hal/sam3u1c/udc.c **** 	for (iface_num = 0; iface_num < udc_ptr_conf->desc->bNumInterfaces;
 3097              	 .loc 1 1093 17
 3098 0018 0023     	 movs r3,#0
 3099 001a FB71     	 strb r3,[r7,#7]
 3100              	 .loc 1 1093 2
 3101 001c 24E0     	 b .L256
 3102              	.L259:
1094:.././hal/sam3u1c/udc.c **** 			iface_num++) {
1095:.././hal/sam3u1c/udc.c **** 		// Select the interface with the current alternate setting
1096:.././hal/sam3u1c/udc.c **** 		udi_api = udc_ptr_conf->udi_apis[iface_num];
 3103              	 .loc 1 1096 25
 3104 001e 1A4B     	 ldr r3,.L260+8
 3105 0020 1B68     	 ldr r3,[r3]
 3106 0022 5A68     	 ldr r2,[r3,#4]
 3107              	 .loc 1 1096 35
 3108 0024 FB79     	 ldrb r3,[r7,#7]
 3109 0026 9B00     	 lsls r3,r3,#2
 3110 0028 1344     	 add r3,r3,r2
 3111              	 .loc 1 1096 11
 3112 002a 1B68     	 ldr r3,[r3]
 3113 002c 3B60     	 str r3,[r7]
1097:.././hal/sam3u1c/udc.c **** 		if (!udc_update_iface_desc(iface_num, udi_api->getsetting())) {
 3114              	 .loc 1 1097 48
 3115 002e 3B68     	 ldr r3,[r7]
 3116 0030 DB68     	 ldr r3,[r3,#12]
 3117              	 .loc 1 1097 8
 3118 0032 9847     	 blx r3
 3119              	.LVL68:
 3120 0034 0346     	 mov r3,r0
 3121 0036 1A46     	 mov r2,r3
 3122 0038 FB79     	 ldrb r3,[r7,#7]
 3123 003a 1146     	 mov r1,r2
 3124 003c 1846     	 mov r0,r3
 3125 003e 134B     	 ldr r3,.L260+12
 3126 0040 9847     	 blx r3
 3127              	.LVL69:
 3128 0042 0346     	 mov r3,r0
 3129              	 .loc 1 1097 7
 3130 0044 83F00103 	 eor r3,r3,#1
 3131 0048 DBB2     	 uxtb r3,r3
 3132              	 .loc 1 1097 6
 3133 004a 002B     	 cmp r3,#0
 3134 004c 01D0     	 beq .L257
1098:.././hal/sam3u1c/udc.c **** 			return false;
 3135              	 .loc 1 1098 11
 3136 004e 0023     	 movs r3,#0
 3137 0050 12E0     	 b .L255
 3138              	.L257:
1099:.././hal/sam3u1c/udc.c **** 		}
1100:.././hal/sam3u1c/udc.c **** 
1101:.././hal/sam3u1c/udc.c **** 		// Send the SETUP request to the UDI
1102:.././hal/sam3u1c/udc.c **** 		if (udi_api->setup()) {
 3139              	 .loc 1 1102 14
 3140 0052 3B68     	 ldr r3,[r7]
 3141 0054 9B68     	 ldr r3,[r3,#8]
 3142              	 .loc 1 1102 7
 3143 0056 9847     	 blx r3
 3144              	.LVL70:
 3145 0058 0346     	 mov r3,r0
 3146              	 .loc 1 1102 6
 3147 005a 002B     	 cmp r3,#0
 3148 005c 01D0     	 beq .L258
1103:.././hal/sam3u1c/udc.c **** 			return true;
 3149              	 .loc 1 1103 11
 3150 005e 0123     	 movs r3,#1
 3151 0060 0AE0     	 b .L255
 3152              	.L258:
1094:.././hal/sam3u1c/udc.c **** 		// Select the interface with the current alternate setting
 3153              	 .loc 1 1094 13
 3154 0062 FB79     	 ldrb r3,[r7,#7]
 3155 0064 0133     	 adds r3,r3,#1
 3156 0066 FB71     	 strb r3,[r7,#7]
 3157              	.L256:
1093:.././hal/sam3u1c/udc.c **** 			iface_num++) {
 3158              	 .loc 1 1093 46 discriminator 1
 3159 0068 074B     	 ldr r3,.L260+8
 3160 006a 1B68     	 ldr r3,[r3]
 3161 006c 1B68     	 ldr r3,[r3]
1093:.././hal/sam3u1c/udc.c **** 			iface_num++) {
 3162              	 .loc 1 1093 52 discriminator 1
 3163 006e 1B79     	 ldrb r3,[r3,#4]
1093:.././hal/sam3u1c/udc.c **** 			iface_num++) {
 3164              	 .loc 1 1093 2 discriminator 1
 3165 0070 FA79     	 ldrb r2,[r7,#7]
 3166 0072 9A42     	 cmp r2,r3
 3167 0074 D3D3     	 bcc .L259
1104:.././hal/sam3u1c/udc.c **** 		}
1105:.././hal/sam3u1c/udc.c **** 	}
1106:.././hal/sam3u1c/udc.c **** 	return false;
 3168              	 .loc 1 1106 9
 3169 0076 0023     	 movs r3,#0
 3170              	.L255:
1107:.././hal/sam3u1c/udc.c **** }
 3171              	 .loc 1 1107 1
 3172 0078 1846     	 mov r0,r3
 3173 007a 0837     	 adds r7,r7,#8
 3174              	.LCFI103:
 3175              	 .cfi_def_cfa_offset 8
 3176 007c BD46     	 mov sp,r7
 3177              	.LCFI104:
 3178              	 .cfi_def_cfa_register 13
 3179              	 
 3180 007e 80BD     	 pop {r7,pc}
 3181              	.L261:
 3182              	 .align 2
 3183              	.L260:
 3184 0080 00000000 	 .word udc_num_configuration
 3185 0084 00000000 	 .word udd_g_ctrlreq
 3186 0088 00000000 	 .word udc_ptr_conf
 3187 008c 00000000 	 .word udc_update_iface_desc
 3188              	 .cfi_endproc
 3189              	.LFE100:
 3191              	 .global winusb_20_desc
 3192              	 .section .data.winusb_20_desc,"aw"
 3193              	 .align 2
 3196              	winusb_20_desc:
 3197 0000 0A000000 	 .ascii "\012\000\000\000\000\000\003\006\236\000\024\000\003"
 3197      00000306 
 3197      9E001400 
 3197      03
 3198 000d 0057494E 	 .ascii "\000WINUSB\000\000\000\000\000\000\000\000\000\000\200"
 3198      55534200 
 3198      00000000 
 3198      00000000 
 3198      0080
 3199 001f 00040001 	 .ascii "\000\004\000\001\000(\000P\000h\000y\000W\000h\000i"
 3199      00280050 
 3199      00680079 
 3199      00570068 
 3199      0069
 3200 0031 00730070 	 .ascii "\000s\000p\000e\000r\000e\000r\000U\000S\000B\000\000"
 3200      00650072 
 3200      00650072 
 3200      00550053 
 3200      00420000 
 3201 0045 00000000 	 .ascii "\000\000\000\000\000\000\000\000\000N\000{\000c\000"
 3201      00000000 
 3201      004E007B 
 3201      006300
 3202 0054 63006500 	 .ascii "c\000e\0005\0002\0009\0001\000c\000-\000a\0006\0009"
 3202      35003200 
 3202      39003100 
 3202      63002D00 
 3202      61003600 
 3203 0069 0066002D 	 .ascii "\000f\000-\0004\0009\0009\0005\000-\000a\0004\000c\000"
 3203      00340039 
 3203      00390035 
 3203      002D0061 
 3203      00340063 
 3204 007e 32002D00 	 .ascii "2\000-\0002\000a\000e\0005\0007\000a\0005\0001\000a"
 3204      32006100 
 3204      65003500 
 3204      37006100 
 3204      35003100 
 3205 0093 00640065 	 .ascii "\000d\000e\0009\000}\000\000\000"
 3205      0039007D 
 3205      000000
 3206              	 .section .text.udc_process_setup,"ax",%progbits
 3207              	 .align 1
 3208              	 .global udc_process_setup
 3209              	 .syntax unified
 3210              	 .thumb
 3211              	 .thumb_func
 3212              	 .fpu softvfp
 3214              	udc_process_setup:
 3215              	.LFB101:
1108:.././hal/sam3u1c/udc.c **** // WinUSB 2.0 descriptor. This is what modern systems use
1109:.././hal/sam3u1c/udc.c **** // https://github.com/sowbug/weblight/blob/192ad7a0e903542e2aa28c607d98254a12a6399d/firmware/webusb
1110:.././hal/sam3u1c/udc.c **** // http://janaxelson.com/files/ms_os_20_descriptors.c
1111:.././hal/sam3u1c/udc.c **** // https://books.google.com/books?id=pkefBgAAQBAJ&pg=PA353&lpg=PA353
1112:.././hal/sam3u1c/udc.c **** // Taken from panda, this does something. 
1113:.././hal/sam3u1c/udc.c **** uint8_t winusb_20_desc[WINUSB_PLATFORM_DESCRIPTOR_LENGTH] = {
1114:.././hal/sam3u1c/udc.c ****   // Microsoft OS 2.0 descriptor set header (table 10)
1115:.././hal/sam3u1c/udc.c ****   0x0A, 0x00, // Descriptor size (10 bytes)
1116:.././hal/sam3u1c/udc.c ****   0x00, 0x00, // MS OS 2.0 descriptor set header
1117:.././hal/sam3u1c/udc.c **** 
1118:.././hal/sam3u1c/udc.c ****   0x00, 0x00, 0x03, 0x06, // Windows version (8.1) (0x06030000)
1119:.././hal/sam3u1c/udc.c ****   WINUSB_PLATFORM_DESCRIPTOR_LENGTH, 0x00, // Total size of MS OS 2.0 descriptor set
1120:.././hal/sam3u1c/udc.c **** 
1121:.././hal/sam3u1c/udc.c ****   // Microsoft OS 2.0 compatible ID descriptor
1122:.././hal/sam3u1c/udc.c ****     0x14, 0x00, // Descriptor size (20 bytes)
1123:.././hal/sam3u1c/udc.c ****     0x03, 0x00, // MS OS 2.0 compatible ID descriptor
1124:.././hal/sam3u1c/udc.c ****     'W', 'I', 'N', 'U', 'S', 'B', 0x00, 0x00, // compatible ID (WINUSB)
1125:.././hal/sam3u1c/udc.c ****     0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,     // Sub-compatible ID
1126:.././hal/sam3u1c/udc.c **** 
1127:.././hal/sam3u1c/udc.c ****   // Registry property descriptor
1128:.././hal/sam3u1c/udc.c ****   0x80, 0x00, // Descriptor size (130 bytes)
1129:.././hal/sam3u1c/udc.c ****   0x04, 0x00, // Registry Property descriptor
1130:.././hal/sam3u1c/udc.c ****   0x01, 0x00, // Strings are null-terminated Unicode
1131:.././hal/sam3u1c/udc.c ****   0x28, 0x00, // Size of Property Name (40 bytes) "DeviceInterfaceGUID"
1132:.././hal/sam3u1c/udc.c **** 
1133:.././hal/sam3u1c/udc.c ****   // bPropertyName (DeviceInterfaceGUID)
1134:.././hal/sam3u1c/udc.c ****     'P', 0x00, 'h', 0x00, 'y', 0x00, 'W', 0x00, 'h', 0x00, 'i', 0x00, 's', 0x00, 'p', 0x00,
1135:.././hal/sam3u1c/udc.c ****     'e', 0x00, 'r', 0x00, 'e', 0x00, 'r', 0x00, 'U', 0x00, 'S', 0x00, 'B', 0x00, 0x00, 0x00,
1136:.././hal/sam3u1c/udc.c ****    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
1137:.././hal/sam3u1c/udc.c **** 
1138:.././hal/sam3u1c/udc.c ****   0x4E, 0x00, // Size of Property Data (78 bytes)
1139:.././hal/sam3u1c/udc.c **** 
1140:.././hal/sam3u1c/udc.c ****   // Vendor-defined property data: {CCE5291C-A69F-4995-A4C2-2AE57A51ADE9}
1141:.././hal/sam3u1c/udc.c ****     '{', 0x00, 'c', 0x00, 'c', 0x00, 'e', 0x00, '5', 0x00, '2', 0x00, '9', 0x00, '1', 0x00, // 16
1142:.././hal/sam3u1c/udc.c ****     'c', 0x00, '-', 0x00, 'a', 0x00, '6', 0x00, '9', 0x00, 'f', 0x00, '-', 0x00, '4', 0x00, // 32
1143:.././hal/sam3u1c/udc.c ****     '9', 0x00, '9', 0x00, '5', 0x00, '-', 0x00, 'a', 0x00, '4', 0x00, 'c', 0x00, '2', 0x00, // 48
1144:.././hal/sam3u1c/udc.c ****     '-', 0x00, '2', 0x00, 'a', 0x00, 'e', 0x00, '5', 0x00, '7', 0x00, 'a', 0x00, '5', 0x00, // 64
1145:.././hal/sam3u1c/udc.c ****     '1', 0x00, 'a', 0x00, 'd', 0x00, 'e', 0x00, '9', 0x00, '}', 0x00, 0x00, 0x00 // 78 bytes
1146:.././hal/sam3u1c/udc.c **** };
1147:.././hal/sam3u1c/udc.c **** 
1148:.././hal/sam3u1c/udc.c **** /**
1149:.././hal/sam3u1c/udc.c ****  * \brief Main routine to manage the USB SETUP request.
1150:.././hal/sam3u1c/udc.c ****  *
1151:.././hal/sam3u1c/udc.c ****  * This function parses a USB SETUP request and submits an appropriate
1152:.././hal/sam3u1c/udc.c ****  * response back to the host or, in the case of SETUP OUT requests
1153:.././hal/sam3u1c/udc.c ****  * with data, sets up a buffer for receiving the data payload.
1154:.././hal/sam3u1c/udc.c ****  *
1155:.././hal/sam3u1c/udc.c ****  * The main standard requests defined by the USB 2.0 standard are handled
1156:.././hal/sam3u1c/udc.c ****  * internally. The interface requests are sent to UDI, and the specific request
1157:.././hal/sam3u1c/udc.c ****  * sent to a specific application callback.
1158:.././hal/sam3u1c/udc.c ****  *
1159:.././hal/sam3u1c/udc.c ****  * \return true if the request is supported, else the request is stalled by UDD
1160:.././hal/sam3u1c/udc.c ****  */
1161:.././hal/sam3u1c/udc.c **** bool udc_process_setup(void)
1162:.././hal/sam3u1c/udc.c **** {
 3216              	 .loc 1 1162 1
 3217              	 .cfi_startproc
 3218              	 
 3219              	 
 3220 0000 80B5     	 push {r7,lr}
 3221              	.LCFI105:
 3222              	 .cfi_def_cfa_offset 8
 3223              	 .cfi_offset 7,-8
 3224              	 .cfi_offset 14,-4
 3225 0002 00AF     	 add r7,sp,#0
 3226              	.LCFI106:
 3227              	 .cfi_def_cfa_register 7
1163:.././hal/sam3u1c/udc.c **** 	// By default no data (receive/send) and no callbacks registered
1164:.././hal/sam3u1c/udc.c **** 	udd_g_ctrlreq.payload_size = 0;
 3228              	 .loc 1 1164 29
 3229 0004 254B     	 ldr r3,.L269
 3230 0006 0022     	 movs r2,#0
 3231 0008 9A81     	 strh r2,[r3,#12]
1165:.././hal/sam3u1c/udc.c **** 	udd_g_ctrlreq.callback = NULL;
 3232              	 .loc 1 1165 25
 3233 000a 244B     	 ldr r3,.L269
 3234 000c 0022     	 movs r2,#0
 3235 000e 1A61     	 str r2,[r3,#16]
1166:.././hal/sam3u1c/udc.c **** 	udd_g_ctrlreq.over_under_run = NULL;
 3236              	 .loc 1 1166 31
 3237 0010 224B     	 ldr r3,.L269
 3238 0012 0022     	 movs r2,#0
 3239 0014 5A61     	 str r2,[r3,#20]
1167:.././hal/sam3u1c/udc.c **** 
1168:.././hal/sam3u1c/udc.c **** 	// MS requests this using request type 0xC0 and our user defined bRequest (0x01 in our case)
1169:.././hal/sam3u1c/udc.c **** 	if ((udd_g_ctrlreq.req.bmRequestType == 0xC0) && (udd_g_ctrlreq.req.bRequest == 0x01)) {
 3240              	 .loc 1 1169 24
 3241 0016 214B     	 ldr r3,.L269
 3242 0018 1B78     	 ldrb r3,[r3]
 3243              	 .loc 1 1169 5
 3244 001a C02B     	 cmp r3,#192
 3245 001c 09D1     	 bne .L263
 3246              	 .loc 1 1169 69 discriminator 1
 3247 001e 1F4B     	 ldr r3,.L269
 3248 0020 5B78     	 ldrb r3,[r3,#1]
 3249              	 .loc 1 1169 48 discriminator 1
 3250 0022 012B     	 cmp r3,#1
 3251 0024 05D1     	 bne .L263
1170:.././hal/sam3u1c/udc.c **** 		udd_set_setup_payload(winusb_20_desc, WINUSB_PLATFORM_DESCRIPTOR_LENGTH);
 3252              	 .loc 1 1170 3
 3253 0026 9E21     	 movs r1,#158
 3254 0028 1D48     	 ldr r0,.L269+4
 3255 002a 1E4B     	 ldr r3,.L269+8
 3256 002c 9847     	 blx r3
 3257              	.LVL71:
1171:.././hal/sam3u1c/udc.c **** 		return true;
 3258              	 .loc 1 1171 10
 3259 002e 0123     	 movs r3,#1
 3260 0030 32E0     	 b .L264
 3261              	.L263:
1172:.././hal/sam3u1c/udc.c **** 	}
1173:.././hal/sam3u1c/udc.c **** 
1174:.././hal/sam3u1c/udc.c **** 	if (Udd_setup_is_in()) {
 3262              	 .loc 1 1174 6
 3263 0032 1A4B     	 ldr r3,.L269
 3264 0034 1B78     	 ldrb r3,[r3]
 3265 0036 5BB2     	 sxtb r3,r3
 3266              	 .loc 1 1174 5
 3267 0038 002B     	 cmp r3,#0
 3268 003a 05DA     	 bge .L265
1175:.././hal/sam3u1c/udc.c **** 		if (udd_g_ctrlreq.req.wLength == 0) {
 3269              	 .loc 1 1175 24
 3270 003c 174B     	 ldr r3,.L269
 3271 003e DB88     	 ldrh r3,[r3,#6]
 3272              	 .loc 1 1175 6
 3273 0040 002B     	 cmp r3,#0
 3274 0042 01D1     	 bne .L265
1176:.././hal/sam3u1c/udc.c **** 			return false; // Error from USB host
 3275              	 .loc 1 1176 11
 3276 0044 0023     	 movs r3,#0
 3277 0046 27E0     	 b .L264
 3278              	.L265:
1177:.././hal/sam3u1c/udc.c **** 		}
1178:.././hal/sam3u1c/udc.c **** 	}
1179:.././hal/sam3u1c/udc.c **** 
1180:.././hal/sam3u1c/udc.c **** 	// If standard request then try to decode it in UDC
1181:.././hal/sam3u1c/udc.c **** 	if (Udd_setup_type() == USB_REQ_TYPE_STANDARD) {
 3279              	 .loc 1 1181 6
 3280 0048 144B     	 ldr r3,.L269
 3281 004a 1B78     	 ldrb r3,[r3]
 3282 004c 03F06003 	 and r3,r3,#96
 3283              	 .loc 1 1181 5
 3284 0050 002B     	 cmp r3,#0
 3285 0052 06D1     	 bne .L266
1182:.././hal/sam3u1c/udc.c **** 		if (udc_reqstd()) {
 3286              	 .loc 1 1182 7
 3287 0054 144B     	 ldr r3,.L269+12
 3288 0056 9847     	 blx r3
 3289              	.LVL72:
 3290 0058 0346     	 mov r3,r0
 3291              	 .loc 1 1182 6
 3292 005a 002B     	 cmp r3,#0
 3293 005c 01D0     	 beq .L266
1183:.././hal/sam3u1c/udc.c **** 			return true;
 3294              	 .loc 1 1183 11
 3295 005e 0123     	 movs r3,#1
 3296 0060 1AE0     	 b .L264
 3297              	.L266:
1184:.././hal/sam3u1c/udc.c **** 		}
1185:.././hal/sam3u1c/udc.c **** 	}
1186:.././hal/sam3u1c/udc.c **** 
1187:.././hal/sam3u1c/udc.c **** 	// If interface request then try to decode it in UDI
1188:.././hal/sam3u1c/udc.c **** 	if (Udd_setup_recipient() == USB_REQ_RECIP_INTERFACE) {
 3298              	 .loc 1 1188 6
 3299 0062 0E4B     	 ldr r3,.L269
 3300 0064 1B78     	 ldrb r3,[r3]
 3301 0066 03F01F03 	 and r3,r3,#31
 3302              	 .loc 1 1188 5
 3303 006a 012B     	 cmp r3,#1
 3304 006c 06D1     	 bne .L267
1189:.././hal/sam3u1c/udc.c **** 		if (udc_req_iface()) {
 3305              	 .loc 1 1189 7
 3306 006e 0F4B     	 ldr r3,.L269+16
 3307 0070 9847     	 blx r3
 3308              	.LVL73:
 3309 0072 0346     	 mov r3,r0
 3310              	 .loc 1 1189 6
 3311 0074 002B     	 cmp r3,#0
 3312 0076 01D0     	 beq .L267
1190:.././hal/sam3u1c/udc.c **** 			return true;
 3313              	 .loc 1 1190 11
 3314 0078 0123     	 movs r3,#1
 3315 007a 0DE0     	 b .L264
 3316              	.L267:
1191:.././hal/sam3u1c/udc.c **** 		}
1192:.././hal/sam3u1c/udc.c **** 	}
1193:.././hal/sam3u1c/udc.c **** 
1194:.././hal/sam3u1c/udc.c **** 	// If endpoint request then try to decode it in UDI
1195:.././hal/sam3u1c/udc.c **** 	if (Udd_setup_recipient() == USB_REQ_RECIP_ENDPOINT) {
 3317              	 .loc 1 1195 6
 3318 007c 074B     	 ldr r3,.L269
 3319 007e 1B78     	 ldrb r3,[r3]
 3320 0080 03F01F03 	 and r3,r3,#31
 3321              	 .loc 1 1195 5
 3322 0084 022B     	 cmp r3,#2
 3323 0086 06D1     	 bne .L268
1196:.././hal/sam3u1c/udc.c **** 		if (udc_req_ep()) {
 3324              	 .loc 1 1196 7
 3325 0088 094B     	 ldr r3,.L269+20
 3326 008a 9847     	 blx r3
 3327              	.LVL74:
 3328 008c 0346     	 mov r3,r0
 3329              	 .loc 1 1196 6
 3330 008e 002B     	 cmp r3,#0
 3331 0090 01D0     	 beq .L268
1197:.././hal/sam3u1c/udc.c **** 			return true;
 3332              	 .loc 1 1197 11
 3333 0092 0123     	 movs r3,#1
 3334 0094 00E0     	 b .L264
 3335              	.L268:
1198:.././hal/sam3u1c/udc.c **** 		}
1199:.././hal/sam3u1c/udc.c **** 	}
1200:.././hal/sam3u1c/udc.c **** 
1201:.././hal/sam3u1c/udc.c **** 	// Here SETUP request unknown by UDC and UDIs
1202:.././hal/sam3u1c/udc.c **** #ifdef USB_DEVICE_SPECIFIC_REQUEST
1203:.././hal/sam3u1c/udc.c **** 	// Try to decode it in specific callback
1204:.././hal/sam3u1c/udc.c **** 	return USB_DEVICE_SPECIFIC_REQUEST(); // Ex: Vendor request,...
1205:.././hal/sam3u1c/udc.c **** #else
1206:.././hal/sam3u1c/udc.c **** 	return false;
 3336              	 .loc 1 1206 9
 3337 0096 0023     	 movs r3,#0
 3338              	.L264:
1207:.././hal/sam3u1c/udc.c **** #endif
1208:.././hal/sam3u1c/udc.c **** }
 3339              	 .loc 1 1208 1
 3340 0098 1846     	 mov r0,r3
 3341 009a 80BD     	 pop {r7,pc}
 3342              	.L270:
 3343              	 .align 2
 3344              	.L269:
 3345 009c 00000000 	 .word udd_g_ctrlreq
 3346 00a0 00000000 	 .word winusb_20_desc
 3347 00a4 00000000 	 .word udd_set_setup_payload
 3348 00a8 00000000 	 .word udc_reqstd
 3349 00ac 00000000 	 .word udc_req_iface
 3350 00b0 00000000 	 .word udc_req_ep
 3351              	 .cfi_endproc
 3352              	.LFE101:
 3354              	 .section .bss.udc_ep_status.7347,"aw",%nobits
 3355              	 .align 1
 3358              	udc_ep_status.7347:
 3359 0000 0000     	 .space 2
 3360              	 .section .bss.udc_iface_setting.7418,"aw",%nobits
 3363              	udc_iface_setting.7418:
 3364 0000 00       	 .space 1
 3365              	 .text
 3366              	.Letext0:
 3367              	 .file 2 "c:\\program files (x86)\\gnu arm embedded toolchain\\9 2020-q2-update\\arm-none-eabi\\include\\machine\\_default_types.h"
 3368              	 .file 3 "c:\\program files (x86)\\gnu arm embedded toolchain\\9 2020-q2-update\\arm-none-eabi\\include\\sys\\_stdint.h"
 3369              	 .file 4 ".././hal/sam3u1c/inc/core_cm3.h"
 3370              	 .file 5 ".././hal/sam3u1c/inc/system_sam3u.h"
 3371              	 .file 6 "c:\\program files (x86)\\gnu arm embedded toolchain\\9 2020-q2-update\\lib\\gcc\\arm-none-eabi\\9.3.1\\include\\stddef.h"
 3372              	 .file 7 "c:\\program files (x86)\\gnu arm embedded toolchain\\9 2020-q2-update\\arm-none-eabi\\include\\sys\\_types.h"
 3373              	 .file 8 "c:\\program files (x86)\\gnu arm embedded toolchain\\9 2020-q2-update\\arm-none-eabi\\include\\sys\\reent.h"
 3374              	 .file 9 "c:\\program files (x86)\\gnu arm embedded toolchain\\9 2020-q2-update\\arm-none-eabi\\include\\sys\\lock.h"
 3375              	 .file 10 "c:\\program files (x86)\\gnu arm embedded toolchain\\9 2020-q2-update\\arm-none-eabi\\include\\stdlib.h"
 3376              	 .file 11 ".././hal/sam3u1c/inc/interrupt/interrupt_sam_nvic.h"
 3377              	 .file 12 ".././hal/sam3u1c/inc/compiler.h"
 3378              	 .file 13 "./conf_usb.h"
 3379              	 .file 14 ".././hal/sam3u1c/inc/usb_protocol.h"
 3380              	 .file 15 ".././hal/sam3u1c/inc/udi.h"
 3381              	 .file 16 ".././hal/sam3u1c/inc/udc_desc.h"
 3382              	 .file 17 ".././hal/sam3u1c/inc/udd.h"
 3383              	 .file 18 ".././hal/sam3u1c/inc/udi_vendor.h"
DEFINED SYMBOLS
                            *ABS*:00000000 udc.c
    {standard input}:16     .bss.cpu_irq_critical_section_counter:00000000 $d
    {standard input}:19     .bss.cpu_irq_critical_section_counter:00000000 cpu_irq_critical_section_counter
    {standard input}:24     .bss.cpu_irq_prev_interrupt_state:00000000 cpu_irq_prev_interrupt_state
    {standard input}:25     .bss.cpu_irq_prev_interrupt_state:00000000 $d
    {standard input}:27     .bss.udc_device_status:00000000 $d
    {standard input}:30     .bss.udc_device_status:00000000 udc_device_status
    {standard input}:35     .bss.udc_num_configuration:00000000 udc_num_configuration
    {standard input}:36     .bss.udc_num_configuration:00000000 $d
    {standard input}:38     .bss.udc_ptr_conf:00000000 $d
    {standard input}:41     .bss.udc_ptr_conf:00000000 udc_ptr_conf
    {standard input}:44     .bss.udc_ptr_iface:00000000 $d
    {standard input}:47     .bss.udc_ptr_iface:00000000 udc_ptr_iface
    {standard input}:50     .data.udc_string_desc_languageid:00000000 $d
    {standard input}:53     .data.udc_string_desc_languageid:00000000 udc_string_desc_languageid
    {standard input}:58     .data.udc_string_manufacturer_name:00000000 $d
    {standard input}:61     .data.udc_string_manufacturer_name:00000000 udc_string_manufacturer_name
    {standard input}:64     .data.udc_string_product_name:00000000 $d
    {standard input}:67     .data.udc_string_product_name:00000000 udc_string_product_name
    {standard input}:70     .text.udc_get_string_serial_name:00000000 $t
    {standard input}:77     .text.udc_get_string_serial_name:00000000 udc_get_string_serial_name
    {standard input}:108    .text.udc_get_string_serial_name:00000010 $d
    {standard input}:113    .data.udc_string_desc:00000000 $d
    {standard input}:116    .data.udc_string_desc:00000000 udc_string_desc
    {standard input}:121    .text.udc_get_interface_desc:00000000 $t
    {standard input}:128    .text.udc_get_interface_desc:00000000 udc_get_interface_desc
    {standard input}:159    .text.udc_get_interface_desc:00000010 $d
    {standard input}:164    .text.udc_get_eof_conf:00000000 $t
    {standard input}:170    .text.udc_get_eof_conf:00000000 udc_get_eof_conf
    {standard input}:210    .text.udc_get_eof_conf:00000020 $d
    {standard input}:215    .text.udc_next_desc_in_iface:00000000 $t
    {standard input}:221    .text.udc_next_desc_in_iface:00000000 udc_next_desc_in_iface
    {standard input}:309    .text.udc_next_desc_in_iface:00000058 $d
    {standard input}:314    .text.udc_update_iface_desc:00000000 $t
    {standard input}:320    .text.udc_update_iface_desc:00000000 udc_update_iface_desc
    {standard input}:444    .text.udc_update_iface_desc:0000008c $d
    {standard input}:452    .text.udc_iface_disable:00000000 $t
    {standard input}:458    .text.udc_iface_disable:00000000 udc_iface_disable
    {standard input}:583    .text.udc_iface_disable:0000008c $d
    {standard input}:592    .text.udc_iface_enable:00000000 $t
    {standard input}:598    .text.udc_iface_enable:00000000 udc_iface_enable
    {standard input}:709    .text.udc_iface_enable:00000084 $d
    {standard input}:718    .text.udc_start:00000000 $t
    {standard input}:725    .text.udc_start:00000000 udc_start
    {standard input}:749    .text.udc_start:0000000c $d
    {standard input}:754    .text.udc_stop:00000000 $t
    {standard input}:761    .text.udc_stop:00000000 udc_stop
    {standard input}:789    .text.udc_stop:00000010 $d
    {standard input}:802    .text.udc_reset:00000000 udc_reset
    {standard input}:795    .text.udc_reset:00000000 $t
    {standard input}:874    .text.udc_reset:00000044 $d
    {standard input}:882    .text.udc_sof_notify:00000000 $t
    {standard input}:889    .text.udc_sof_notify:00000000 udc_sof_notify
    {standard input}:976    .text.udc_sof_notify:00000058 $d
    {standard input}:982    .text.udc_req_std_dev_get_status:00000000 $t
    {standard input}:988    .text.udc_req_std_dev_get_status:00000000 udc_req_std_dev_get_status
    {standard input}:1027   .text.udc_req_std_dev_get_status:00000020 $d
    {standard input}:1034   .text.udc_req_std_ep_get_status:00000000 $t
    {standard input}:1040   .text.udc_req_std_ep_get_status:00000000 udc_req_std_ep_get_status
    {standard input}:1094   .text.udc_req_std_ep_get_status:00000034 $d
    {standard input}:3358   .bss.udc_ep_status.7347:00000000 udc_ep_status.7347
    {standard input}:1102   .text.udc_req_std_dev_clear_feature:00000000 $t
    {standard input}:1108   .text.udc_req_std_dev_clear_feature:00000000 udc_req_std_dev_clear_feature
    {standard input}:1166   .text.udc_req_std_dev_clear_feature:00000034 $d
    {standard input}:1172   .text.udc_req_std_ep_clear_feature:00000000 $t
    {standard input}:1178   .text.udc_req_std_ep_clear_feature:00000000 udc_req_std_ep_clear_feature
    {standard input}:1229   .text.udc_req_std_ep_clear_feature:00000030 $d
    {standard input}:1235   .text.udc_req_std_dev_set_feature:00000000 $t
    {standard input}:1241   .text.udc_req_std_dev_set_feature:00000000 udc_req_std_dev_set_feature
    {standard input}:1317   .text.udc_req_std_dev_set_feature:00000058 $d
    {standard input}:1321   .text.udc_req_std_dev_set_feature:00000068 $t
    {standard input}:1376   .text.udc_req_std_dev_set_feature:000000a0 $d
    {standard input}:1387   .text.udc_req_std_ep_set_feature:00000000 $t
    {standard input}:1393   .text.udc_req_std_ep_set_feature:00000000 udc_req_std_ep_set_feature
    {standard input}:1453   .text.udc_req_std_ep_set_feature:0000003c $d
    {standard input}:1460   .text.udc_valid_address:00000000 $t
    {standard input}:1466   .text.udc_valid_address:00000000 udc_valid_address
    {standard input}:1498   .text.udc_valid_address:0000001c $d
    {standard input}:1504   .text.udc_req_std_dev_set_address:00000000 $t
    {standard input}:1510   .text.udc_req_std_dev_set_address:00000000 udc_req_std_dev_set_address
    {standard input}:1555   .text.udc_req_std_dev_set_address:00000020 $d
    {standard input}:1561   .text.udc_req_std_dev_get_str_desc:00000000 $t
    {standard input}:1567   .text.udc_req_std_dev_get_str_desc:00000000 udc_req_std_dev_get_str_desc
    {standard input}:1598   .text.udc_req_std_dev_get_str_desc:0000001c $d
    {standard input}:1602   .text.udc_req_std_dev_get_str_desc:0000002c $t
    {standard input}:1716   .text.udc_req_std_dev_get_str_desc:000000b0 $d
    {standard input}:1731   .rodata.BOS_DESC:00000000 BOS_DESC
    {standard input}:1728   .rodata.BOS_DESC:00000000 $d
    {standard input}:1736   .text.udc_req_std_dev_get_descriptor:00000000 $t
    {standard input}:1742   .text.udc_req_std_dev_get_descriptor:00000000 udc_req_std_dev_get_descriptor
    {standard input}:1778   .text.udc_req_std_dev_get_descriptor:00000024 $d
    {standard input}:1793   .text.udc_req_std_dev_get_descriptor:00000060 $t
    {standard input}:2120   .text.udc_req_std_dev_get_descriptor:00000204 $d
    {standard input}:2130   .text.udc_req_std_dev_get_configuration:00000000 $t
    {standard input}:2136   .text.udc_req_std_dev_get_configuration:00000000 udc_req_std_dev_get_configuration
    {standard input}:2175   .text.udc_req_std_dev_get_configuration:00000020 $d
    {standard input}:2182   .text.udc_req_std_dev_set_configuration:00000000 $t
    {standard input}:2188   .text.udc_req_std_dev_set_configuration:00000000 udc_req_std_dev_set_configuration
    {standard input}:2384   .text.udc_req_std_dev_set_configuration:000000e4 $d
    {standard input}:2396   .text.udc_req_std_iface_get_setting:00000000 $t
    {standard input}:2402   .text.udc_req_std_iface_get_setting:00000000 udc_req_std_iface_get_setting
    {standard input}:2520   .text.udc_req_std_iface_get_setting:00000080 $d
    {standard input}:3363   .bss.udc_iface_setting.7418:00000000 udc_iface_setting.7418
    {standard input}:2530   .text.udc_req_std_iface_set_setting:00000000 $t
    {standard input}:2536   .text.udc_req_std_iface_set_setting:00000000 udc_req_std_iface_set_setting
    {standard input}:2623   .text.udc_req_std_iface_set_setting:00000058 $d
    {standard input}:2631   .text.udc_reqstd:00000000 $t
    {standard input}:2637   .text.udc_reqstd:00000000 udc_reqstd
    {standard input}:2782   .text.udc_reqstd:000000b4 $d
    {standard input}:2791   .text.udc_reqstd:000000d8 $t
    {standard input}:2907   .text.udc_reqstd:0000015c $d
    {standard input}:2924   .text.udc_req_iface:00000000 $t
    {standard input}:2930   .text.udc_req_iface:00000000 udc_req_iface
    {standard input}:3051   .text.udc_req_iface:00000088 $d
    {standard input}:3059   .text.udc_req_ep:00000000 $t
    {standard input}:3065   .text.udc_req_ep:00000000 udc_req_ep
    {standard input}:3184   .text.udc_req_ep:00000080 $d
    {standard input}:3196   .data.winusb_20_desc:00000000 winusb_20_desc
    {standard input}:3193   .data.winusb_20_desc:00000000 $d
    {standard input}:3207   .text.udc_process_setup:00000000 $t
    {standard input}:3214   .text.udc_process_setup:00000000 udc_process_setup
    {standard input}:3345   .text.udc_process_setup:0000009c $d
    {standard input}:3355   .bss.udc_ep_status.7347:00000000 $d
    {standard input}:3364   .bss.udc_iface_setting.7418:00000000 $d
                           .group:00000000 wm4.0.2cd8a2cb7ff4c48cec7eeec776a1dd8c
                           .group:00000000 wm4.stddef.h.39.27677723d43e5b5a7afdf8d798429f1d
                           .group:00000000 wm4.parts.h.45.afc900689b2c82332e69d798acedc875
                           .group:00000000 wm4.tpaste.h.45.af3ee36765243b162c88f7f944858426
                           .group:00000000 wm4.stringz.h.45.c4f6cbe0005e6c1d2139bc6c0e4f4722
                           .group:00000000 wm4.mrepeat.h.59.c5daaed201a4340b0edf435161d0b77f
                           .group:00000000 wm4._newlib_version.h.4.1ef4e12f167f8b69d7c30054be56050d
                           .group:00000000 wm4.features.h.33.5bd1eea2d80518b50f7af0b5ce6750e0
                           .group:00000000 wm4._default_types.h.15.247e5cd201eca3442cbf5404108c4935
                           .group:00000000 wm4._intsup.h.10.48bafbb683905c4daa4565a85aeeb264
                           .group:00000000 wm4._stdint.h.10.c24fa3af3bc1706662bb5593a907e841
                           .group:00000000 wm4.stdint.h.23.d53047a68f4a85177f80b422d52785ed
                           .group:00000000 wm4.sam3u1c.h.220.c0b54b5a55bc87791749ae17b1487779
                           .group:00000000 wm4.core_cm3.h.32.5c59c312db585622d253fdb887b0afb1
                           .group:00000000 wm4.core_cmInstr.h.25.d8165482ef3061013a2fc83e2d85f3d9
                           .group:00000000 wm4.core_cm3.h.127.b561404f2a159dc517b409bc244d16c1
                           .group:00000000 wm4.component_adc.h.43.d49887380d07d1cd08cc4e37b3485e31
                           .group:00000000 wm4.component_adc12b.h.43.eadc09f1073923fb91f1f393cc397dcb
                           .group:00000000 wm4.component_chipid.h.43.15825c969b1cc9eeea3d9416499874c8
                           .group:00000000 wm4.component_dmac.h.43.cc8187b1cf6bfeadc91b14fdd28b9e8b
                           .group:00000000 wm4.component_efc.h.43.cb1b3997ad9ea3733ad421ecbfd02fdd
                           .group:00000000 wm4.component_gpbr.h.43.49b7e13894fe38b29f2243bbbe530227
                           .group:00000000 wm4.component_hsmci.h.43.7b7194c92e1480c038f3342f7cec440a
                           .group:00000000 wm4.component_matrix.h.43.1d209838fb75b4827119203a357141ee
                           .group:00000000 wm4.component_pdc.h.43.19528a5f9ef5a348234ea06f89069c55
                           .group:00000000 wm4.component_pio.h.43.163b46c3683ccf92e8de39a5554f50e8
                           .group:00000000 wm4.component_pmc.h.43.ee4f030602866917aeed15fb2b948de8
                           .group:00000000 wm4.component_pwm.h.43.ab6262a86f0aea354b43fe6dce7e7eb3
                           .group:00000000 wm4.component_rstc.h.43.4eb59dc2ddcf585fabf251d0c329fcdd
                           .group:00000000 wm4.component_rtc.h.43.ba8ccafc772b11d562a3cceab8b95072
                           .group:00000000 wm4.component_rtt.h.43.3206ef8f067e5e747c3c4c7e719c1429
                           .group:00000000 wm4.component_smc.h.43.907847915f1a5616734199d7e34424fa
                           .group:00000000 wm4.component_spi.h.43.a2a09df64ab768c0a32be55285c74ded
                           .group:00000000 wm4.component_ssc.h.43.d7c78f990c13fc511671b64798c4bcd0
                           .group:00000000 wm4.component_supc.h.43.7d17f8e5ed3ba815e84381152735062f
                           .group:00000000 wm4.component_tc.h.43.662eac8137408372b4f9d26c0b5f8621
                           .group:00000000 wm4.component_twi.h.43.eda18625bd851fc4605861f5b3240c0b
                           .group:00000000 wm4.component_uart.h.43.2d92735c5ea05c973661e1ba99a2f37c
                           .group:00000000 wm4.component_udphs.h.43.21cecd26a4e44df0013037f29f2716e4
                           .group:00000000 wm4.component_usart.h.43.7872f8f455adb38b67b9fbdb15657fbe
                           .group:00000000 wm4.component_wdt.h.43.e31e10a5469b62c3660b49ab250f802f
                           .group:00000000 wm4.instance_hsmci.h.43.e233236cc7fd5a805539a7ecc0e1d8d2
                           .group:00000000 wm4.instance_ssc.h.43.c0cfabc3b9f3bb60745c913111bce965
                           .group:00000000 wm4.instance_spi.h.43.570ae46af19e4179d9796872b9a8b9bc
                           .group:00000000 wm4.instance_tc0.h.43.049b3a82387d2961594190609e896a29
                           .group:00000000 wm4.instance_twi0.h.43.255dc0afa9e0d45eaea0a935eca2f103
                           .group:00000000 wm4.instance_twi1.h.43.652d1d407893f259f2a817544ba662c2
                           .group:00000000 wm4.instance_pwm.h.43.88294acec3ca56d6fc521038521a1567
                           .group:00000000 wm4.instance_usart0.h.43.e26677512aee3dd3bedd71d394410000
                           .group:00000000 wm4.instance_usart1.h.43.1ba97dbc6610d9fb3132b9d845688201
                           .group:00000000 wm4.instance_usart2.h.43.baa1bf30b3c5acdee90c4a1f50fe9ebd
                           .group:00000000 wm4.instance_udphs.h.43.b1ce94181e0d1f22877b81c6040a4363
                           .group:00000000 wm4.instance_adc12b.h.43.d73ed59e867ccdfdb846d9ef32a50c0c
                           .group:00000000 wm4.instance_adc.h.43.2b7611a00afeb4c555339b844d4b8456
                           .group:00000000 wm4.instance_dmac.h.43.ee72691d84889c8f285932be4a075ddb
                           .group:00000000 wm4.instance_smc.h.43.29610fd00979caaaa65821ad40e9da06
                           .group:00000000 wm4.instance_matrix.h.43.01ee474141594385374c41a29daeeefe
                           .group:00000000 wm4.instance_pmc.h.43.37430325ed7b8b24c3fe640c41c29ef5
                           .group:00000000 wm4.instance_uart.h.43.bd378395ba022bc8670c82ebe656fbbd
                           .group:00000000 wm4.instance_chipid.h.43.29cd8fb600f149aa58830fcc78fe36f9
                           .group:00000000 wm4.instance_efc0.h.43.6b85dba20721a7e9fc4350e78d193680
                           .group:00000000 wm4.instance_efc1.h.43.2c5e94fc4d2742678318d73450d08d57
                           .group:00000000 wm4.instance_pioa.h.43.eeb46cc3bfe01a1f28e67aa3a6851ed8
                           .group:00000000 wm4.instance_piob.h.43.652ce26b6c37ac56f9ed42a9216d9aca
                           .group:00000000 wm4.instance_rstc.h.43.c5de224364a50a85f237c0b864aa4c8f
                           .group:00000000 wm4.instance_supc.h.43.a5f1a5ca08f468ccf34ed3653e045f1f
                           .group:00000000 wm4.instance_rtt.h.43.8622b192c23334996132415e3095df7f
                           .group:00000000 wm4.instance_wdt.h.43.407ea53e133eacf09acf2c7fcb6b7524
                           .group:00000000 wm4.instance_rtc.h.43.f70b77f9180401c8d9d920cb4a1cd166
                           .group:00000000 wm4.instance_gpbr.h.43.9066cb40d557f6755101368854272348
                           .group:00000000 wm4.sam3u1c.h.312.ae446d8e874d34ca3df78faf190c678f
                           .group:00000000 wm4.pio_sam3u1c.h.43.18b24f16e1710ff2a400d88fe33c5107
                           .group:00000000 wm4.sam3u1c.h.442.cd4bbc3af493e98bc9b60c2905132ed0
                           .group:00000000 wm4.newlib.h.8.7cb3972cd43265932d4782d5eb589854
                           .group:00000000 wm4.ieeefp.h.77.f33a4dce62116f6f5175ff8bae57a54c
                           .group:00000000 wm4.config.h.224.c701144a7b0518c6ee9b9b5465b79f81
                           .group:00000000 wm4._ansi.h.31.de524f58584151836e90d8620a16f8e8
                           .group:00000000 wm4.stdio.h.31.7c0e28c411445f3f9c5b11accf882760
                           .group:00000000 wm4.stddef.h.155.ba788add86a0e365f264484f110c3c29
                           .group:00000000 wm4.cdefs.h.49.2bf373aedffd8b393ccd11dc057e8547
                           .group:00000000 wm4.stdarg.h.34.3a23a216c0c293b3d2ea2e89281481e6
                           .group:00000000 wm4._types.h.20.dd0d04dca3800a0d2a6129b87f3adbb2
                           .group:00000000 wm4.stddef.h.155.3588ebfdd1e8c7ede80509bb9c3b8009
                           .group:00000000 wm4._types.h.127.34941de1b2539d59d5cac00e0dd27a45
                           .group:00000000 wm4.reent.h.17.e292bf8b0bec6c96e131a54347145a30
                           .group:00000000 wm4.lock.h.2.1461d1fff82dffe8bfddc23307f6484f
                           .group:00000000 wm4.reent.h.77.dcd6129ff07fe81bd5636db29abe53b2
                           .group:00000000 wm4.types.h.40.8b6acba56cefbb11746718204edc8f5e
                           .group:00000000 wm4._endian.h.31.65a10590763c3dde1ac4a7f66d7d4891
                           .group:00000000 wm4.endian.h.9.49f3a4695c1b61e8a0808de3c4a106cb
                           .group:00000000 wm4._timeval.h.32.bec3221fa7a9bb0bdde696c9c57e47d2
                           .group:00000000 wm4.timespec.h.41.d855182eb0e690443ab8651bcedca6e1
                           .group:00000000 wm4.select.h.19.97ca6fd0c752a0f3b6719fd314d361e6
                           .group:00000000 wm4.types.h.51.5571ec98f267d17d3c670b7a3ba33afa
                           .group:00000000 wm4.sched.h.22.c60982713a5c428609783c78f9c78d95
                           .group:00000000 wm4._pthreadtypes.h.36.fcee9961c35163dde6267ef772ad1972
                           .group:00000000 wm4.stdio.h.2.4aa87247282eca6c8f36f9de33d8df1a
                           .group:00000000 wm4.stdio.h.81.932d0c162786b883f622b8d05c120c78
                           .group:00000000 wm4.stdbool.h.29.07dce69c3b78884144b7f7bd19483461
                           .group:00000000 wm4.stdlib.h.13.4ed386f5c1a80d71e72172885d946ef2
                           .group:00000000 wm4.alloca.h.8.dfc0c703c47ec3e69746825b17d9e66d
                           .group:00000000 wm4.stdlib.h.56.f4862cfbf4363a1db01842d5bdf72c18
                           .group:00000000 wm4.compiler.h.88.0e6ad966134fa012ce9a34053d3f48aa
                           .group:00000000 wm4.interrupt_sam_nvic.h.45.4876da6c127868305d66389e87e0876f
                           .group:00000000 wm4.compiler.h.425.66dd29c210af3287ed85ec3553a3e6b1
                           .group:00000000 wm4.conf_usb.h.56.f175acea7b1aa84c1a9647f9b8aa7250
                           .group:00000000 wm4.udi_vendor_conf.h.56.4348c8e521d040f44df868219dae6785
                           .group:00000000 wm4.usb_atmel.h.45.c31b525dbe01f8d9e2022a03356ec174
                           .group:00000000 wm4.usb_protocol.h.63.850c58f3469fce50a9ac9a6854f7594b
                           .group:00000000 wm4.usb_protocol_vendor.h.45.83dfe073428ff799abc3ed1c7b04c77d
                           .group:00000000 wm4.udc_desc.h.77.5fec235bd7553e7256e345e020840072
                           .group:00000000 wm4.udd.h.103.3ccc59b50c14ec70568e6136eeb22d56
                           .group:00000000 wm4.udi_vendor.h.125.7b9085237d4d4a9757f4c148fba1918d

UNDEFINED SYMBOLS
usb_serial_number
udd_ep_free
udd_ep_alloc
udd_enable
udd_disable
udd_g_ctrlreq
udd_set_setup_payload
udd_ep_is_halted
udd_ep_clear_halt
udd_is_high_speed
udd_test_mode_j
udd_test_mode_k
udd_test_mode_se0_nak
udd_test_mode_packet
udd_ep_abort
udd_ep_set_halt
udd_set_address
udc_config
udd_getaddress
